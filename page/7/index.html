<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Matrix207&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Matrix207's Blog">
<meta property="og:url" content="http://matrix207.github.com/page/7/index.html">
<meta property="og:site_name" content="Matrix207's Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Matrix207's Blog">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Matrix207&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Matrix207&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://matrix207.github.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-linux-io-performance-monitor" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/30/linux-io-performance-monitor/" class="article-date">
  <time datetime="2014-07-29T16:00:00.000Z" itemprop="datePublished">2014-07-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/storage/">storage</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/30/linux-io-performance-monitor/">Linux IO performance monitor</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="what-your-should-know"><a href="#What-your-should-know" class="headerlink" title="What your should know"></a>What your should know</h3><ul>
<li><p>Your system parameters:</p>
<ul>
<li>storage device: HDD, SSD (which?), Raid (which?)</li>
<li>filesystem, block size, journal mode</li>
<li>file cache, dirty thresholds, amount of memory</li>
<li>IO scheduler, its tunables</li>
<li>number of CPUs</li>
<li>kernel version</li>
</ul>
</li>
<li><p>Your test parameters:</p>
<ul>
<li>read or write performance?</li>
<li>sequential or random?</li>
<li>1 thread or multiple?</li>
<li>size of requests</li>
<li>optimize for throughput or request delay?</li>
</ul>
</li>
<li><p>IO&#x2019;s Per Second&#xFF08;IOPS&#xFF09; </p>
<ul>
<li>IOPS=1000/(tseek+trotation+transfer), tseek:3~15ms, trotation:2ms, Transfer&lt;&lt;1<br>IOPS=1000/(5+2)=142</li>
</ul>
</li>
<li><p>random io and sequential io</p>
</li>
</ul>
<h3 id="monitor"><a href="#Monitor" class="headerlink" title="Monitor"></a>Monitor</h3><ul>
<li><p>start from dd test (install centos 7 to u-disk)</p>
<p>  [root@localhost Downloads]# dd if=/home/dennis/Downloads/CentOS-7.0-1406-x86_64-DVD.iso of=/dev/sdc</p>
</li>
<li><p>using /proc/diskstats</p>
<pre><code>[dennis@localhost Downloads]$ cat /proc/diskstats
   8   0 sda 141736 59689 8916560 2493999 102005 133358 13766420 6019722 1 954049 8513774
   8   1 sda1 286 562 3822 5720 7 1 28 156 0 4959 5875
   8   2 sda2 141324 59017 8910850 2482584 90409 133357 13766392 5797210 1 762103 8279724
 253   0 dm-0 14247 0 113976 102438 61899 0 495192 6397303 0 45071 6499746
 253   1 dm-1 151287 0 5630082 3598603 47156 0 1021320 5247386 0 551034 8846229
 253   2 dm-2 35848 0 3166248 352901 115404 0 12249880 2422762 1 524204 2775689
   8  16 sdb 152 871 2311 604 0 0 0 0 0 564 604
   8  17 sdb1 70 801 1095 280 0 0 0 0 0 262 280
   8  32 sdc 248265 108 1986984 316895 5710 170143 1370400 48417446 158 346876 49258416
   8  33 sdc1 248249 108 1986856 316866 5710 170143 1370400 48417446 158 346847 49258387
</code></pre></li>
</ul>
<pre><code>- [dennis@localhost Downloads]$ cat /proc/diskstats | grep &quot;sdc &quot;
  &#x4E0B;&#x9762;&#x7684;&#x663E;&#x793A;&#x53BB;&#x6389;&#x4E86; &quot;8   32 sd &quot;
  +   1     2    3        4    5     6        7      8       9     10      11
  + 132725 108 1062664 167643 2681  81983  643440  24022041  147 177399  24801880
  + 274044 108 2193216 348847 6582  195199 1579680 54459810  150 388700  55296467
  + 480307 108 3843320 608357 13408 392863 3217920 101917275 139 719423  103013695
  + 636845 108 5095624 802159 18568 542271 4456320 138060107 132 971278  139338459 
  + 717802 108 5743280 902925 21254 620223 5100960 156763894 134 1101859 158182895 
- &#x7B2C;1&#x4E2A;&#x57DF;&#xFF1A;&#x8BFB;&#x5B8C;&#x6210;&#x6B21;&#x6570; ----- &#x8BFB;&#x78C1;&#x76D8;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x6210;&#x529F;&#x5B8C;&#x6210;&#x8BFB;&#x7684;&#x603B;&#x6B21;&#x6570;&#x3002;
- &#x7B2C;2&#x4E2A;&#x57DF;&#xFF1A;&#x5408;&#x5E76;&#x8BFB;&#x5B8C;&#x6210;&#x6B21;&#x6570;&#xFF0C; &#x7B2C;6&#x4E2A;&#x57DF;&#xFF1A;&#x5408;&#x5E76;&#x5199;&#x5B8C;&#x6210;&#x6B21;&#x6570;&#x3002;&#x4E3A;&#x4E86;&#x6548;&#x7387;&#x53EF;&#x80FD;&#x4F1A;&#x5408;&#x5E76;&#x76F8;&#x90BB;
           &#x7684;&#x8BFB;&#x548C;&#x5199;&#x3002;&#x4ECE;&#x800C;&#x4E24;&#x6B21;4K&#x7684;&#x8BFB;&#x5728;&#x5B83;&#x6700;&#x7EC8;&#x88AB;&#x5904;&#x7406;&#x5230;&#x78C1;&#x76D8;&#x4E0A;&#x4E4B;&#x524D;&#x53EF;&#x80FD;&#x4F1A;&#x53D8;&#x6210;&#x4E00;&#x6B21;
           8K&#x7684;&#x8BFB;&#xFF0C;&#x624D;&#x88AB;&#x8BA1;&#x6570;&#xFF08;&#x548C;&#x6392;&#x961F;&#xFF09;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x6709;&#x4E00;&#x6B21;I/O&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x4E2A;&#x57DF;&#x4F7F;&#x4F60;&#x77E5;
  &#x9053;&#x8FD9;&#x6837;&#x7684;&#x64CD;&#x4F5C;&#x6709;&#x591A;&#x9891;&#x7E41;&#x3002;
- &#x7B2C;3&#x4E2A;&#x57DF;&#xFF1A;&#x8BFB;&#x6247;&#x533A;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x6210;&#x529F;&#x8BFB;&#x8FC7;&#x7684;&#x6247;&#x533A;&#x603B;&#x6B21;&#x6570;&#x3002;
- &#x7B2C;4&#x4E2A;&#x57DF;&#xFF1A;&#x8BFB;&#x82B1;&#x8D39;&#x7684;&#x6BEB;&#x79D2;&#x6570;&#xFF0C;&#x8FD9;&#x662F;&#x6240;&#x6709;&#x8BFB;&#x64CD;&#x4F5C;&#x6240;&#x82B1;&#x8D39;&#x7684;&#x6BEB;&#x79D2;&#x6570;
           (&#x7528;make_request()&#x5230;end_that_request_last()&#x6D4B;&#x91CF;)
- &#x7B2C;5&#x4E2A;&#x57DF;&#xFF1A;&#x5199;&#x5B8C;&#x6210;&#x6B21;&#x6570; ----&#x5199;&#x5B8C;&#x6210;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x6210;&#x529F;&#x5199;&#x5B8C;&#x6210;&#x7684;&#x603B;&#x6B21;&#x6570;&#x3002;
- &#x7B2C;6&#x4E2A;&#x57DF;&#xFF1A;&#x5408;&#x5E76;&#x5199;&#x5B8C;&#x6210;&#x6B21;&#x6570; -----&#x5408;&#x5E76;&#x5199;&#x6B21;&#x6570;&#x3002;
- &#x7B2C;7&#x4E2A;&#x57DF;&#xFF1A;&#x5199;&#x6247;&#x533A;&#x6B21;&#x6570; ---- &#x5199;&#x6247;&#x533A;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x6210;&#x529F;&#x5199;&#x6247;&#x533A;&#x603B;&#x6B21;&#x6570;&#x3002;
- &#x7B2C;8&#x4E2A;&#x57DF;&#xFF1A;&#x5199;&#x64CD;&#x4F5C;&#x82B1;&#x8D39;&#x7684;&#x6BEB;&#x79D2;&#x6570;  ---  &#x5199;&#x82B1;&#x8D39;&#x7684;&#x6BEB;&#x79D2;&#x6570;&#xFF0C;&#x8FD9;&#x662F;&#x6240;&#x6709;&#x5199;&#x64CD;&#x4F5C;&#x6240;&#x82B1;&#x8D39;&#x7684;&#x6BEB;&#x79D2;&#x6570;
- &#x7B2C;9&#x4E2A;&#x57DF;&#xFF1A;&#x6B63;&#x5728;&#x5904;&#x7406;&#x7684;&#x8F93;&#x5165;/&#x8F93;&#x51FA;&#x8BF7;&#x6C42;&#x6570; -- -I/O&#x7684;&#x5F53;&#x524D;&#x8FDB;&#x5EA6;&#xFF0C;&#x53EA;&#x6709;&#x8FD9;&#x4E2A;&#x57DF;&#x5E94;&#x8BE5;&#x662F;0&#x3002;
           &#x5F53;&#x8BF7;&#x6C42;&#x88AB;&#x4EA4;&#x7ED9;&#x9002;&#x5F53;&#x7684;request_queue_t&#x65F6;&#x589E;&#x52A0;&#x548C;&#x8BF7;&#x6C42;&#x5B8C;&#x6210;&#x65F6;&#x51CF;&#x5C0F;&#x3002;
- &#x7B2C;10&#x4E2A;&#x57DF;&#xFF1A;&#x8F93;&#x5165;/&#x8F93;&#x51FA;&#x64CD;&#x4F5C;&#x82B1;&#x8D39;&#x7684;&#x6BEB;&#x79D2;&#x6570;  ----&#x82B1;&#x5728;I/O&#x64CD;&#x4F5C;&#x4E0A;&#x7684;&#x6BEB;&#x79D2;&#x6570;&#xFF0C;&#x8FD9;&#x4E2A;&#x57DF;&#x4F1A;&#x589E;&#x957F;&#x53EA;&#x8981;field 9&#x4E0D;&#x4E3A;0&#x3002;
- &#x7B2C;11&#x4E2A;&#x57DF;&#xFF1A;&#x8F93;&#x5165;/&#x8F93;&#x51FA;&#x64CD;&#x4F5C;&#x82B1;&#x8D39;&#x7684;&#x52A0;&#x6743;&#x6BEB;&#x79D2;&#x6570; -----  &#x52A0;&#x6743;&#xFF0C;&#x82B1;&#x5728;I/O&#x64CD;&#x4F5C;&#x4E0A;&#x7684;&#x6BEB;&#x79D2;&#x6570;&#xFF0C;
            &#x5728;&#x6BCF;&#x6B21;I/O&#x5F00;&#x59CB;&#xFF0C;I/O&#x7ED3;&#x675F;&#xFF0C;I/O&#x5408;&#x5E76;&#x65F6;&#x8FD9;&#x4E2A;&#x57DF;&#x90FD;&#x4F1A;&#x589E;&#x52A0;&#x3002;&#x8FD9;&#x53EF;&#x4EE5;&#x7ED9;I/O&#x5B8C;&#x6210;
            &#x65F6;&#x95F4;&#x548C;&#x5B58;&#x50A8;&#x90A3;&#x4E9B;&#x53EF;&#x4EE5;&#x7D2F;&#x79EF;&#x7684;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x4FBF;&#x5229;&#x7684;&#x6D4B;&#x91CF;&#x6807;&#x51C6;&#x3002;
</code></pre><ul>
<li><p>using vmstat</p>
<pre><code>[dennis@localhost Downloads]$ vmstat 1 10
procs -----------memory---------- ---swap-- -----io---- -system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so   bi    bo   in   cs us sy id wa
 0  2 262060  79832 1290864 736688  0    2    82    80  165  143  5  1 92  2
 0  2 262060  81964 1279336 746696  0    0  5176  3840 5693 10504  5 10 23 62
 0  2 262060  75888 1282288 749680  0    0  5896  3840 5259 11483  5  5 41 49
 0  2 262060  70184 1285204 752636  0    0  5860     0 5213 11354  6  2 39 53
 1  2 262060  79092 1281472 747172  0    0  5668  3904 5047 11017  5  4 43 49
 1  2 262060  79584 1284256 743532  0    0  5832     0 5004 11202  5  2 43 50
 0  2 262060  77532 1287020 742796  0    0  5672  3840 5126 11111  6  3 39 53
 0  2 262060  79668 1289484 738468  0    0  5316     0 5598 10422  5  5 23 68
 0  2 262060  79536 1290632 737000  0    0  5180  3840 4860 10482  6  3 41 50
 0  2 262060  79880 1291936 735188  0    0  5160     0 5469 10400  5  6 27 62

[dennis@localhost Downloads]$ vmstat -d
disk- ------------reads------------ ------------writes----------- -----IO------
       total merged sectors      ms  total merged sectors      ms   cur   sec
sda   188079  70330 16034138 2811643 108057 169484 14406740 8013520   0  1118
dm-0   15970      0  127760  112213  93653      0  749224  16348510   0    70
dm-1  181140      0 6578234 4012264  51721      0 1236960   7818610   0   681
dm-2   61516      0 9321616  477028 121227      0 12420520  2505467   0   622
sdb      152    871    2311     604      0      0       0         0   0     0
sdc   1012855   108 8103704 1284706  33810 978925 8101888 241555468   0  1636
</code></pre></li>
<li><p>using top(using <code>man top</code> for help)   </p>
</li>
<li><p>using iostat(using <code>man iostat</code> for help)   </p>
<pre><code>[dennis@localhost Downloads]$ su -c &apos;yum install sysstat -y&apos;
[dennis@localhost Downloads]$ iostat -x 1 3
Linux 3.15.6-200.fc20.x86_64 (localhost.localdomain)     07/30/2014     _x86_64_    (2 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           4.59    0.15    1.48    2.20    0.00   91.59

Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
sda               0.46     1.11    1.25    0.72    53.26    48.59   103.44     0.07   36.97   15.02   75.16   3.76   0.74
dm-0              0.00     0.00    0.10    0.61     0.42     2.43     8.00     0.11  156.53    7.06  182.19   0.65   0.05
dm-1              0.00     0.00    1.21    0.34    21.67     4.18    33.36     0.08   51.41   22.36  152.90   2.90   0.45
dm-2              0.00     0.00    0.41    0.80    31.16    41.98   120.98     0.02   16.56    7.58   21.12   3.43   0.41
sdb               0.01     0.00    0.00    0.00     0.01     0.00    15.20     0.00    3.97    3.97    0.00   3.71   0.00
sdc               0.00     6.08    6.77    0.21    27.07    25.02    14.94     1.52  217.29    1.27 7226.26   1.52   1.06

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           2.91    0.00    9.22   52.91    0.00   34.95

Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
sda               0.00   660.00   22.00    8.00  2816.00  3404.00   414.67     0.08    2.83    0.50    9.25   1.63   4.90
dm-0              0.00     0.00    0.00  666.00     0.00  2664.00     8.00     7.13   10.84    0.00   10.84   0.06   3.80
dm-1              0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00
dm-2              0.00     0.00   22.00    0.00  2816.00     0.00   256.00     0.01    0.50    0.50    0.00   0.50   1.10
sdb               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00
sdc               0.00     0.00  719.00   15.00  2876.00  1800.00    12.74   150.38  197.33    1.32 9592.53   1.36 100.00

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           3.06    0.00    3.57   51.02    0.00   42.35

Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util
sda               0.00     0.00   23.00    1.00  2944.00     4.00   245.67     0.01    0.50    0.52    0.00   0.50   1.20
dm-0              0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00
dm-1              0.00     0.00    0.00    1.00     0.00     4.00     8.00     0.00    0.00    0.00    0.00   0.00   0.00
dm-2              0.00     0.00   23.00    0.00  2944.00     0.00   256.00     0.01    0.52    0.52    0.00   0.52   1.20
sdb               0.00     0.00    0.00    0.00     0.00     0.00     0.00     0.00    0.00    0.00    0.00   0.00   0.00
sdc               0.00   928.00  733.00   15.00  2932.00  1800.00    12.65   136.75  211.08    1.36 10459.40   1.34 100.00
[dennis@localhost Downloads]$ watch iostat -x 
</code></pre></li>
<li><p>using shell script monitor_io_stats.sh</p>
<pre><code>#!/bin/sh
/etc/init.d/syslog stop
echo 1 &gt; /proc/sys/vm/block_dump
sleep 60
dmesg | awk &apos;/(READ|WRITE|dirtied)/ {process[$1]++} END {for (x in process) \
print process[x],x}&apos; |sort -nr |awk &apos;{print $2 &quot; &quot; $1}&apos; | \
head -n 10
echo 0 &gt; /proc/sys/vm/block_dump
/etc/init.d/syslog start
</code></pre></li>
</ul>
<h3 id="other-tools"><a href="#Other-tools" class="headerlink" title="Other tools"></a>Other tools</h3><ul>
<li><p>IOMeter, using for testing block device</p>
<ul>
<li>Test parameters<ul>
<li>of Outstanding I/Os, using <code>8</code> per target</li>
<li>each worker select one target?</li>
<li>100% Write or 100% Read</li>
<li>Sequential or Random</li>
<li>Transfer Request Size using 1MB</li>
<li>Result Since, select <code>Last Update</code></li>
<li>Update Frequency(seconds) select <code>1</code></li>
</ul>
</li>
</ul>
</li>
<li><p>SANergy, using for testing filesystem(Samba)</p>
<ul>
<li>Select <code>Performance Tester</code></li>
<li>Select driver(mapping the director as a driver, such as Z)</li>
<li>Select <code>Read test</code> or <code>Write test</code></li>
<li>File size(MB) using <code>10240</code></li>
<li>Record size(KB) using <code>1024</code></li>
<li>select &#x2018;Loop&#x2019;</li>
<li>start test</li>
</ul>
</li>
<li><p>Iozone: a filesystem benchmark tool</p>
<ul>
<li>download from <a href="http://www.iozone.org/src/current/" target="_blank" rel="external">http://www.iozone.org/src/current/</a></li>
<li>compile source code: <code>make linux-AMD64</code>(NOTICE: check you cpu model and select correct command for compile)</li>
<li>test for nfs<ul>
<li>showmount -e 172.16.130.111</li>
<li>mkdir /mnt/nastest</li>
<li>mount -t nfs 172.16.130.111:/share/nfs1 /mnt/nastest</li>
<li>./iozone -az -b /mnt/nastest/test.xls -g 256G -y 32k -i 0 -i 1   </li>
</ul>
</li>
</ul>
</li>
<li><p>FIO  </p>
<ul>
<li>read: <code>fio --filename=/dev/sda3 --direct=1 --iodepth 1 --thread --rw=read --ioengine=psync --bs=4k --size=2G --numjobs=10 --runtime=100 --group_reporting --name=mytest</code></li>
<li>write: <code>fio --filename=/dev/sda3 --direct=1 --iodepth 1 --thread --rw=write --ioengine=psync --bs=4k --size=2G --numjobs=10 --runtime=100 --group_reporting --name=mytest</code></li>
<li>random read: <code>fio --filename=/dev/sda3 --direct=1 --iodepth 1 --thread --rw=randread --ioengine=psync --bs=4k --size=2G --numjobs=10 --runtime=100 --group_reporting --name=mytest</code></li>
<li>random write: <code>fio --filename=/dev/sda3 --direct=1 --iodepth 1 --thread --rw=randwrite --ioengine=psync --bs=4k --size=2G --numjobs=10 --runtime=100 --group_reporting --name=mytest</code></li>
<li>Mix random read and write: <code>fio --filename=/dev/sda3 --direct=1 --iodepth 1 --thread --rw=randrw --rwmixread=70 --ioengine=psync --bs=4k --size=2G --numjobs=10 --runtime=100 --group_reporting --name=mytest --ioscheduler=noop</code></li>
</ul>
</li>
<li><p>blktrace: is a block layer IO tracing mechanism which provides detailed information  </p>
<pre><code>about request queue operations up to user space.
</code></pre><ul>
<li>read: <code>fio --filename=/dev/sda3 --direct=1 --iodepth 1 --thread --rw=read --ioengine=psync --bs=4k --size=2G --numjobs=10 --runtime=100 --group_reporting --name=mytest</code></li>
</ul>
</li>
</ul>
<h3 id="example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><ul>
<li><p>Troubleshooting high <code>uitl</code> of <code>iostat</code> command</p>
<ul>
<li>using <code>iostat -x 2 5</code> to view the disk information</li>
</ul>
</li>
<li><p>Troubleshooting high <code>uitl</code> of <code>iostat</code> command</p>
</li>
</ul>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://os.51cto.com/art/201012/239886.htm" target="_blank" rel="external">Linux&#x6027;&#x80FD;&#x76D1;&#x6D4B;&#xFF1A;&#x78C1;&#x76D8;IO&#x7BC7;</a></li>
<li><a href="http://www.tecmint.com/linux-performance-monitoring-with-vmstat-and-iostat-commands/" target="_blank" rel="external">Linux Performance Monitoring with Vmstat and Iostat Commands</a></li>
<li><a href="http://www.cnblogs.com/mfryf/archive/2012/03/12/2392012.html" target="_blank" rel="external">&#x67E5;&#x770B;linux&#x670D;&#x52A1;&#x5668;&#x786C;&#x76D8;IO&#x8BFB;&#x5199;&#x8D1F;&#x8F7D;</a></li>
<li><a href="http://blog.csdn.net/tenfyguo/article/details/7477526" target="_blank" rel="external">/proc/diskstats</a></li>
<li><a href="http://stackoverflow.com/a/3549620" target="_blank" rel="external">Testing IO performance in Linux</a></li>
<li><a href="http://www.jb51.net/LINUXjishu/65741.html" target="_blank" rel="external">linux &#x67E5;&#x770B;&#x78C1;&#x76D8;IO&#x72B6;&#x6001;&#x64CD;&#x4F5C;&#x6307;&#x5357;</a></li>
<li><a href="http://bannaych.blogspot.jp/2005/12/random-and-sequential-io.html" target="_blank" rel="external">random and sequential io</a></li>
<li><a href="http://en.wikipedia.org/wiki/Hard_disk_drive#Seek_time" target="_blank" rel="external">hdd seek time</a></li>
<li><a href="https://www.usenix.org/legacy/events/fast04/tech/full_papers/radkov/radkov_html/node14.html" target="_blank" rel="external">impact of sequential and random io</a></li>
<li><a href="http://wushank.blog.51cto.com/3489095/1585927" target="_blank" rel="external">linux&#x4E0B;&#x7684;CPU&#x3001;&#x5185;&#x5B58;&#x3001;IO&#x3001;&#x7F51;&#x7EDC;&#x7684;&#x538B;&#x529B;&#x6D4B;&#x8BD5;</a></li>
<li><a href="http://blog.csdn.net/liuaigui/article/details/6168186" target="_blank" rel="external">&#x78C1;&#x76D8;IOPS&#x8BA1;&#x7B97;&#x4E0E;&#x6D4B;&#x91CF;</a></li>
<li><a href="http://dadaru.blog.51cto.com/218979/481394" target="_blank" rel="external">http://dadaru.blog.51cto.com/218979/481394</a></li>
<li><a href="http://dadaru.blog.51cto.com/218979/481394" target="_blank" rel="external">&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x5206;&#x6790;&#x5DE5;&#x5177;&amp;&amp;&#x4E00;&#x4E9B;&#x6211;&#x5BF9;&#x78C1;&#x76D8;IOPS&#x7684;&#x7B80;&#x5355;&#x8BA4;&#x8BC6;</a></li>
<li><a href="http://www.dbabeta.com/2009/io-performence-01_several-concepts.html" target="_blank" rel="external">IO&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x4E4B;&#x4E00;&#xFF1A;&#x8861;&#x91CF;&#x6027;&#x80FD;&#x7684;&#x51E0;&#x4E2A;&#x6307;&#x6807;</a></li>
<li><a href="http://blog.yufeng.info/archives/tag/fio" target="_blank" rel="external">fio&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#x65B0;&#x6DFB;&#x56FE;&#x5F62;&#x524D;&#x7AEF;gfio</a></li>
<li><a href="http://blog.itpub.net/26855487/viewspace-754346/" target="_blank" rel="external">linux &#x4F7F;&#x7528;FIO&#x6D4B;&#x8BD5;&#x78C1;&#x76D8;iops</a></li>
<li>&#x2605;&#x2605;&#x2605;<a href="http://bencane.com/2012/08/06/troubleshooting-high-io-wait-in-linux/" target="_blank" rel="external">Troubleshooting High I/O Wait in Linux</a></li>
<li>&#x2605;&#x2605;&#x2605;<a href="http://blogread.cn/it/article/6145" target="_blank" rel="external">&#x901A;&#x8FC7;blktrace, debugfs&#x5206;&#x6790;&#x78C1;&#x76D8;IO</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/07/30/linux-io-performance-monitor/" data-id="cinga3ymr00bwdcizu6zxkzac" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/performance/">performance</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-data-structures-relation-to-image" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/28/data-structures-relation-to-image/" class="article-date">
  <time datetime="2014-07-27T16:00:00.000Z" itemprop="datePublished">2014-07-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/28/data-structures-relation-to-image/">data structures relation to image</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="what-it-is"><a href="#What-it-is" class="headerlink" title="What it is"></a>What it is</h3><p><strong>ds2img</strong>.py (DataStructure To Image) </p>
<p>A python script transfer c header file which contains lots of data structures<br>to a dot script, and then use dot to convert to a image file</p>
<h3 id="how-to-run"><a href="#How-to-run" class="headerlink" title="How to run"></a>How to run</h3><pre><code>Usage: ds2imgpy -i INPUT_FILE -f png|svg -o OUTPUT_FILE [-d DOT_FILE]

-i  input file which have structures&quot;
-f  image fomat, only support png and svg&quot;
-o  output file, image file&quot;
-d  dot script file, default is tmp.dot&quot;

e.g:

python ds2img.py -i t.h -f png -o t.png 
</code></pre><h3 id="todo"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h3><p>Waiting for your advices</p>
<h3 id="warning"><a href="#Warning" class="headerlink" title="Warning"></a>Warning</h3><ol>
<li>Not support structure contain other structure!</li>
<li>Not support multi-lines comment</li>
</ol>
<h3 id="source"><a href="#Source" class="headerlink" title="Source"></a>Source</h3><p>You can get the latest version from:<br><a href="https://github.com/matrix207/scripts/blob/master/ds2img/ds2img.py" target="_blank" rel="external">https://github.com/matrix207/scripts/blob/master/ds2img/ds2img.py</a></p>
<pre><code>#!/usr/bin/python
#####################################################################
# Generate dot script file from c file, which have lots of structures
#
# You can get the latest version from: 
# https://github.com/matrix207/scripts/blob/master/ds2img/ds2img.py
#
# Warning: Not support structure contain other structure!
# 
# Depends:
#     1. python
#     2. graphviz
#
# History:
#    v1.0  2014-07-28  Dennis  implement generate_relation function
#                              add parse option funtion
#    v0.1  2014-07-27  Dennis  Create
#####################################################################

import os
import re
import sys
import getopt
import datetime

version = &quot;v1.0 Create by Dennis 2014-07-28&quot;
debug = 0

def is_comment(line):
    if &apos;\\&apos; in line:
        return true
    print true

# process each line
def process(line):
    print line,

def get_struct_name(line):
    print line,

def get_datetime():
    today = datetime.datetime.now()
    print today.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)

def generate_dot_header(output_file):
    if debug : 
        print &quot;generating dot header&quot;
    f=open(output_file,&apos;a+&apos;)
    print&gt;&gt;f, &quot;/**********************************************&quot;
    print&gt;&gt;f, &quot;* Auto generate by ds2img.py&quot;
    print&gt;&gt;f, &quot;* Author:  matrix207&quot;
    print&gt;&gt;f, &quot;* Date  :  %s&quot; % datetime.datetime.now().strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)
    print&gt;&gt;f, &quot;**********************************************/\n&quot;
    print&gt;&gt;f, &quot;digraph DS2IMG {&quot;
    print&gt;&gt;f, &quot;    node [shape=record fontsize=12 fontname=Courier style=filled];&quot;
    print&gt;&gt;f, &quot;    edge[color=blue]; rankdir=LR;&quot;
    print&gt;&gt;f, &quot;&quot;
    f.close()

def generate_dot_end(output_file):
    if debug : 
        print &quot;generating dot end&quot;
    f=open(output_file,&apos;a+&apos;)
    print&gt;&gt;f, &quot;}&quot;
    f.close()

def generate_struct_header(output_file, struct_name):
    if debug : 
        print &quot;generating struct header&quot;
    f=open(output_file,&apos;a+&apos;)
    print&gt;&gt;f, &quot;subgraph cluster_%s {&quot; % struct_name
    print&gt;&gt;f, &quot;    node [shape=record fontsize=12 fontname=Courier style=filled];&quot;
    print&gt;&gt;f, &quot;    color = lightgray; style=filled; label = \&quot;struct %s \&quot;; edge[color=\&quot;#2e3436\&quot;];&quot; % struct_name
    print&gt;&gt;f, &quot;    node_%s [shape=record label=\&quot;&lt;f0&gt;*** struct %s ***\\&quot; % (struct_name, struct_name)
    f.close()

def generate_struct_member(output_file, index, member_name):
    if debug : 
        print &quot;generating struct member&quot;
    f=open(output_file,&apos;a+&apos;)
    print&gt;&gt;f, &quot;|&lt;f%d&gt;%s\\n\\&quot; % (index, member_name)
    f.close()

def generate_struct_end(output_file):
    if debug : 
        print &quot;generating struct end&quot;
    f=open(output_file,&apos;a+&apos;)
    print&gt;&gt;f, &quot;\&quot;];&quot;
    print&gt;&gt;f, &quot;}&quot;
    print&gt;&gt;f, &quot;&quot;
    f.close()

def generate_relation(output_file, structs_name, structs):
    if debug : 
        print &quot;generating relation&quot;
    f=open(output_file,&apos;a+&apos;)
    print&gt;&gt;f, &quot;#relation &quot;
    # structs_name contain all structure name 
    # structs      contain all structures, include structure name and it&apos;s member name
    for a in structs_name:           # structs_name[a] is structure name
        for b in structs:            # b is structure name 
            for c in structs[b]:     # c is member index, structs[b][c] is member name
                # only match structure name
                tmp = structs[b][c].split(&apos; &apos;)
                #if structs_name[a] in structs[b][c]:
                if tmp[1]==structs_name[a]:
                    #print &quot;%s contain %s\n&quot; % (b,structs_name[a])
                    #print &quot;%s:&lt;f%d&gt; -&gt; %s:f0\n&quot; % (b,c,structs_name[a])
                    print&gt;&gt;f, &quot;node_%s:&lt;f%d&gt; -&gt; node_%s:f0;&quot; % (b,c,structs_name[a])
    print&gt;&gt;f, &quot;&quot;
    f.close()

def clean_multi_space(line):
    line = re.sub(r&apos; +&apos;, &apos; &apos;, line)
    return line

def clean_array_size(line):
    line = re.sub(r&apos;\[.+\]&apos;, &apos;[]&apos;, line)
    return line

def clean_specify_dirty(line):
    line = re.sub(r&apos;\[.+&lt;&lt;.+\]&apos;, &apos;[]&apos;, line)
    return line

# handle line which has comment information
def handle_comment(line):
    pos = line.find(&quot;/*&quot;)
    if pos &gt; 0:
        line = re.sub(r&apos;/\*.+\*/&apos;, &apos;&apos;, line)
        line = line.strip()
    return line

def struct2dot(input_file, output_file):
    generate_dot_header(output_file)
    reader = open(input_file, &apos;r&apos;)
    i = 1
    structs = {}
    structs_name = {}
    while True: 
        line = reader.readline()
        if not line: 
            break
        # skip the comment line
        pos = line.find(&quot;/&quot;)
        if pos == 0:
            continue
        if pos &gt; 0:
            handle_comment(line)
        m = re.match(&apos;^struct (\w+) {$&apos;,line)
        if m: # Find structure start
            structs_name[i] = m.group(1)
            st_name = m.group(1)
            i += 1
            generate_struct_header(output_file, m.group(1))
            structs[m.group(1)] = {}
            j = 1
            while True:
                line = reader.readline()
                if not line: 
                    break
                line = line.strip();
                if len(line) == 0:
                    continue
                # skip the comment line
                pos = line.find(&quot;/&quot;)
                if pos == 0:
                    continue
                if pos &gt; 0:
                    line = handle_comment(line)
                line = clean_specify_dirty(line)
                line = clean_multi_space(line)
                m = re.match(&apos;^};$&apos;,line)
                if m: # Find structure end
                    generate_struct_end(output_file)
                    break
                structs[st_name][j] = line
                generate_struct_member(output_file, j, line)
                j += 1
    reader.close()
    generate_relation(output_file, structs_name, structs)
    generate_dot_end(output_file)

def dot2png(input_file, output_file):
    cmdline = &quot;dot -Tpng &quot; + input_file + &quot; -o &quot; + output_file
    if debug:
        print cmdline
    os.system(cmdline)

def clean_file(input_file):
    cmdline = &quot;&gt; &quot; + input_file
    os.system(cmdline)

# Test Function
def test(input_file, output_file):
    #find_comment(sys.argv[1])
    generate_dot_header(output_file)
    generate_struct_header(output_file, &quot;func_test&quot;)
    generate_struct_member(output_file, 1, &quot;int test_a_13;&quot;)
    generate_struct_member(output_file, 2, &quot;int test_a_13;&quot;)
    generate_struct_member(output_file, 3, &quot;int test_a_13;&quot;)
    generate_struct_end(output_file)
    generate_dot_end(output_file)

def find_comment(input_file):
    reader = open(input_file, &apos;r&apos;)
    while True:
        line = reader.readline()
        if len(line) == 0:
            break
        pos = line.find(&quot;/*&quot;)
        if pos&gt;=0:
            print line,
    reader.close()

def usage(bin_file):
    print &quot;Usage: %s -i INPUT_FILE -f png|svg -o OUTPUT_FILE [-d DOT_FILE]&quot; % bin_file
    print &quot;      -i  input file which have structures&quot;
    print &quot;      -f  image fomat, only support png and svg&quot;
    print &quot;      -o  output file, image file&quot;
    print &quot;      -d  dot script file, default is tmp.dot&quot;
    print &quot;  e.g:\n\tpython %s -i t.h -f png -o t.png&quot; % bin_file
    sys.exit(1)

if __name__ == &apos;__main__&apos;:
    paramlen = len(sys.argv)

    config = {  
        &quot;input&quot;:&quot;&quot;,  
        &quot;format&quot;:&quot;&quot;,  
        &quot;output&quot;:&quot;&quot;,  
        &quot;dotfile&quot;:&quot;tmp.dot&quot;,  
    }      
    opts, args = getopt.getopt(sys.argv[1:], &apos;hi:f:o:d:&apos;,
        [  
        &apos;input=&apos;,
        &apos;format=&apos;,
        &apos;output=&apos;,
        &apos;dotfile=&apos;,
        &apos;help&apos;  
        ]  
    )    

    for option, value in opts:  
        if  option in [&quot;-h&quot;,&quot;--help&quot;]:  
            usage(sys.argv[0])
        elif option in [&apos;--input&apos;, &apos;-i&apos;]:  
            config[&quot;input&quot;] = value  
        elif option in [&apos;--output&apos;, &apos;-o&apos;]:  
            config[&quot;output&quot;] = value  
        elif option in [&apos;--format&apos;, &apos;-f&apos;]:  
            config[&quot;format&quot;] = value  
        elif option in [&apos;--dotfile&apos;, &apos;-d&apos;]:  
            config[&quot;dotfile&quot;] = value  
        else:
            usage(sys.argv[0])

    if config[&quot;input&quot;] == &quot;&quot; or config[&quot;output&quot;]==&quot;&quot; or config[&quot;format&quot;]==&quot;&quot; :
        usage(sys.argv[0])


    clean_file(config[&quot;dotfile&quot;])

    struct2dot(config[&quot;input&quot;], config[&quot;dotfile&quot;])

    # generate graphic
    filename = os.path.basename(sys.argv[1]) 
    png_file = filename + &quot;.png&quot;
    dot2png(config[&quot;dotfile&quot;], config[&quot;output&quot;])

    print &quot;Done&quot;
</code></pre><h3 id="example"><a href="#example" class="headerlink" title="example"></a>example</h3><p>transfer iscsitarget-1.4.20/kernel/iscsi.h </p>
<pre><code>[dennis@localhost kernel]$ pwd
/home/dennis/work/git/iet/src/iscsitarget-1.4.20/kernel
[dennis@localhost kernel]$ ds2img.py -i iscsi.h -f png -o iscsi.png
Done
[dennis@localhost kernel]$ ds2img.py -i iscsi.h -f svg -o iscsi.svg
Done
</code></pre><p><img src="/assets/image/posts/iscsi_kernel_structs.png" alt=""></p>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://emacser.com/emacs_graphviz_ds.htm" target="_blank" rel="external">&#x2605;&#x2605;&#x2605;&#x4F7F;&#x7528;graphviz&#x753B;&#x6570;&#x636E;&#x7ED3;&#x6784;</a></li>
<li><a href="http://www.graphviz.org/content/datastruct" target="_blank" rel="external">graphviz for Data Structures</a></li>
<li><a href="http://gashero.iteye.com/blog/1748795" target="_blank" rel="external">&#x4F7F;&#x7528;graphviz dot&#x6765;&#x753B;&#x56FE;&#x8868;</a></li>
<li><a href="http://www.cnblogs.com/huxi/archive/2010/07/04/1771073.html" target="_blank" rel="external">Python&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6307;&#x5357;</a></li>
<li><a href="http://blog.csdn.net/wangyezi19930928/article/details/25652295" target="_blank" rel="external">&#x2605;&#x2605;python&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#x5B57;&#x7B26;&#x4E32;&#x64CD;&#x4F5C;&#x603B;&#x7ED3;</a></li>
<li><a href="http://zhidao.baidu.com/link?url=lwqlXGEAznkWAc26v929RcbA-TuG_McqeQ2BgRWWXaiNS2KQPfU4LR-QdmJkn3eWb5Bfn6qA_7wAboaFThjUkSznQi432soyDnXbd3vPxWO" target="_blank" rel="external">&#x7528;python&#x5982;&#x4F55;&#x5339;&#x914D;&#x6CE8;&#x91CA;</a></li>
<li><a href="http://blog.csdn.net/xmnathan/article/details/4192821" target="_blank" rel="external">Python&#x6587;&#x4EF6;&#x53BB;&#x9664;&#x6CE8;&#x91CA;</a></li>
<li><a href="http://5iqiong.blog.51cto.com/2999926/806230" target="_blank" rel="external">&#x2605;&#x2605;&#x2605;&#x904D;&#x5386;python&#x5B57;&#x5178;&#x51E0;&#x79CD;&#x65B9;&#x6CD5;</a></li>
<li><a href="http://www.cnblogs.com/skyhacker/archive/2012/01/27/2330177.html" target="_blank" rel="external">python&#x5FAA;&#x73AF;&#x904D;&#x5386;&#x5B57;&#x5178;&#x5143;&#x7D20;</a></li>
<li><a href="http://blog.csdn.net/nrs12345/article/details/4869272" target="_blank" rel="external">Python&#x7684;&#x5B57;&#x5178;&#x64CD;&#x4F5C;</a></li>
<li><a href="http://blog.csdn.net/feixin620/article/details/4209783" target="_blank" rel="external">&#x2605;&#x2605;&#x2605;python&#x89E3;&#x6790;ini&#x6587;&#x4EF6;</a></li>
<li><a href="http://blog.csdn.net/xiaocaiju/article/details/7590106" target="_blank" rel="external">python_getopt&#x89E3;&#x6790;&#x547D;&#x4EE4;&#x884C;&#x8F93;&#x5165;&#x53C2;&#x6570;&#x7684;&#x4F7F;&#x7528;</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/07/28/data-structures-relation-to-image/" data-id="cinga3yn100cedcizk23ac0a4" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/graphviz/">graphviz</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iscsi/">iscsi</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tools/">tools</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-jni-on-linux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/18/jni-on-linux/" class="article-date">
  <time datetime="2014-07-17T16:00:00.000Z" itemprop="datePublished">2014-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/language/">language</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/18/jni-on-linux/">jni on linux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-create-messagejava-define-native-function-and-load-library"><a href="#1-create-Message-java-define-native-function-and-load-library" class="headerlink" title="1. create Message.java, define native function and load library"></a>1. create Message.java, define native function and load library</h4><pre><code>[dennis@localhost jni]$ cat Message.java
class Message
{ 
    public native int writeMessage(int type, char page_num, String content); 
    public native int getCPUTemperature(); 
    public native int getHDDTemperature(); 

    static 
    { 
        System.loadLibrary(&quot;Message&quot;); 
    }  
}
</code></pre><h4 id="2-run-javac-messagejava-to-generate-messageclass"><a href="#2-run-&#x2018;javac-Message-java&#x2019;-to-generate-Message-class" class="headerlink" title="2. run &#x2018;javac Message.java&#x2019; to generate Message.class"></a>2. run &#x2018;javac Message.java&#x2019; to generate Message.class</h4><pre><code>[dennis@localhost jni]$ javac Message.java 
</code></pre><h4 id="3-run-javah-message-to-generate-messageh"><a href="#3-run-&#x2018;javah-Message&#x2019;-to-generate-Message-h" class="headerlink" title="3. run &#x2018;javah Message&#x2019; to generate Message.h"></a>3. run &#x2018;javah Message&#x2019; to generate Message.h</h4><pre><code>[dennis@localhost jni]$ javah Message
[dennis@localhost jni]$ cat Message.h
/* DO NOT EDIT THIS FILE - it is machine generated */
#include &lt;jni.h&gt;
/* Header for class Message */

#ifndef _Included_Message
#define _Included_Message
#ifdef __cplusplus
extern &quot;C&quot; {
#endif
/*
 * Class:     Message
 * Method:    writeMessage
 * Signature: (ICLjava/lang/String;)I
 */
JNIEXPORT jint JNICALL Java_Message_writeMessage
  (JNIEnv *, jobject, jint, jchar, jstring);

/*
 * Class:     Message
 * Method:    getCPUTemperature
 * Signature: ()I
 */
JNIEXPORT jint JNICALL Java_Message_getCPUTemperature
  (JNIEnv *, jobject);

/*
 * Class:     Message
 * Method:    getHDDTemperature
 * Signature: ()I
 */
JNIEXPORT jint JNICALL Java_Message_getHDDTemperature
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif
</code></pre><h4 id="4-create-messagec-and-implement-function"><a href="#4-create-Message-c-and-implement-function" class="headerlink" title="4. create Message.c, and implement function"></a>4. create Message.c, and implement function</h4><pre><code>[dennis@localhost jni]$ cat Message.c
#include &lt;jni.h&gt;
#include &lt;stdio.h&gt;
#include &quot;Message.h&quot;

int iCpu;
int iHdd;
int iMainboard;
int iFan;

void ReadTemperatureIni()
{
    iCpu = 37;
    iHdd = 28;
    iMainboard = 30;
    iFan = 3200;
    printf(&quot;call %s %s %d\n&quot;, __FILE__, __func__, __LINE__);
}

void send_msg(const short code, const char page, const char *content) 
{
    printf(&quot;code=%d, page=%d, content=%s\n&quot;, code, page, content);
    printf(&quot;call %s %s %d\n&quot;, __FILE__, __func__, __LINE__);
}

JNIEXPORT jint JNICALL Java_Message_getCPUTemperature(JNIEnv *env, jobject obj)
{
    ReadTemperatureIni();
    return iCpu;
}

JNIEXPORT jint JNICALL Java_Message_getHDDTemperature(JNIEnv *env, jobject obj)
{
    ReadTemperatureIni();
    return iHdd;
}

JNIEXPORT jint JNICALL Java_Message_getMainboardTemperature (JNIEnv *env, jobject obj)
{
    ReadTemperatureIni();
    return iMainboard;    
}

JNIEXPORT jint JNICALL Java_Message_getCPUFanSpeed (JNIEnv *env, jobject obj)
{
    ReadTemperatureIni();
    return iFan;
}


JNIEXPORT jint JNICALL Java_Message_writeMessage 
(JNIEnv *env, jobject obj, jint type, jchar page_num, jstring content)
{
    /* c   code use: (*env)-&gt; */
    /* c++ code use: env-&gt;    */
    const jbyte *str = (const jbyte *)(*env)-&gt;GetStringUTFChars(env,content,JNI_FALSE);
    send_msg(type, page_num, (const char*)str);
    (*env)-&gt;ReleaseStringUTFChars(env,content,(const char *)str);

    return 0;
}
</code></pre><h4 id="5-start-to-compile-file-to-dynamic-library-then-copy-the-so-file-to-usrlib64"><a href="#5-start-to-compile-file-to-dynamic-library-then-copy-the-so-file-to-usr-lib64" class="headerlink" title="5. start to compile file to dynamic library, then copy the *.so file to /usr/lib64/"></a>5. start to compile file to dynamic library, then copy the *.so file to /usr/lib64/</h4><pre><code>[dennis@localhost jni]$ cat Makefile 
CC = gcc 
CFLAGS = -Wall -shared -fPIC
# change the directory for YOUR OS
JAVA_INC = -I/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.60-2.5.0.1.fc20.x86_64/include/  \
           -I/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.60-2.5.0.1.fc20.x86_64/include/linux 
TARGET = libMessage.so

all:$(TARGET)

libMessage.so: Message.c
    $(CC) $(CFLAGS) $(JAVA_INC) -o $@ $^

.PHONY:clean
clean:
    rm -f *.class $(TARGET)
[dennis@localhost jni]$ make
gcc  -Wall -shared -fPIC -I/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.60-2.5.0.1.fc20.x86_64/include/ -I/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.60-2.5.0.1.fc20.x86_64/include/linux  -o libMessage.so Message.c
[dennis@localhost jni]$ su -c &apos;cp libMessage.so /usr/lib64&apos;
</code></pre><h4 id="6-create-testjava-a-sample-code-to-test-interface-function"><a href="#6-create-Test-java-a-sample-code-to-test-interface-function" class="headerlink" title="6. create Test.java, a sample code to test interface function"></a>6. create Test.java, a sample code to test interface function</h4><pre><code>[dennis@localhost jni]$ cat Test.java 
public class Test
{
     public static void main(String argv[])
     {
         new Test();
     }

     public Test()
     {
         char type = 0x1F;
         char page = 1;
         String content = &quot;Test Message&quot;;
         int ret = new Message().writeMessage(type, page, content); 

         int cpu=new Message().getCPUTemperature();
         System.out.println(cpu);     

         int hdd=new Message().getHDDTemperature();
         System.out.println(hdd);
     }
}
</code></pre><h4 id="7-run-javac-testjava"><a href="#7-run-&#x2018;javac-Test-java&#x2019;" class="headerlink" title="7. run &#x2018;javac Test.java&#x2019;"></a>7. run &#x2018;javac Test.java&#x2019;</h4><pre><code>[dennis@localhost jni]$ javac Test.java    
</code></pre><h4 id="8-run-java-test"><a href="#8-run-&#x2018;java-Test&#x2019;" class="headerlink" title="8. run &#x2018;java Test&#x2019;"></a>8. run &#x2018;java Test&#x2019;</h4><pre><code>[dennis@localhost jni]$ java Test 
code=31, page=1, content=Test Message
call Message.c send_msg 22
call Message.c ReadTemperatureIni 16
37
call Message.c ReadTemperatureIni 16
28
</code></pre><h4 id="a-full-version-makefile-support-compile-java-code"><a href="#A-full-version-Makefile-support-compile-java-code" class="headerlink" title="A full version Makefile, support compile java code"></a>A full version Makefile, support compile java code</h4><pre><code>#################################################################
# Makefile 
# For JNI project on Fedora x86_64 release 20
# Create by Dennis
# 2014-07-18
#
# HOW TO MAKE A JNI PROJECT
# 1. create Message.java, define native function and load library
# 2. run &apos;javac Message.java&apos; to generate Message.class
# 3. run &apos;javah Message&apos; to generate Message.h
# 4. create Message.c, and implement function
# 5. start to compile file to dynamic library, then copy the *.so 
#    file to /usr/lib64/
# 6. create Test.java, a sample code to test interface function
# 7. run &apos;javac Test.java&apos; to generate Test.class
# 7. run &apos;java Test&apos; 
#################################################################
CC = gcc 
JAVAC = javac
CFLAGS = -Wall -shared -fPIC
# change the directory for YOUR OS
JAVA_INC = -I/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.60-2.5.0.1.fc20.x86_64/include/  \
           -I/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.60-2.5.0.1.fc20.x86_64/include/linux 
TARGET = libMessage.so Test.class

all:$(TARGET)

libMessage.so: Message.c
    $(CC) $(CFLAGS) $(JAVA_INC) -o $@ $^

Test.class: 
    $(JAVAC) Test.java    

.PHONY:clean
clean:
    rm -f *.class $(TARGET)
</code></pre><h4 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><ul>
<li><a href="http://www.cnblogs.com/bastard/archive/2012/05/17/2506877.html" target="_blank" rel="external">Linux&#x4E0B; JNI&#x7684;&#x4F7F;&#x7528;</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/07/18/jni-on-linux/" data-id="cinga3ymq00bsdcizp7th39lq" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-storage-technology" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/18/storage-technology/" class="article-date">
  <time datetime="2014-07-17T16:00:00.000Z" itemprop="datePublished">2014-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/storage/">storage</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/18/storage-technology/">storage technology</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###<a href="http://blog.csdn.net/liuaigui/article/details/5333752" target="_blank" rel="external">&#x4ECE;&#x7814;&#x53D1;&#x89D2;&#x5EA6;&#x8C08;&#x5B58;&#x50A8;&#x6280;&#x672F;&#x7684;&#x5B66;&#x4E60;</a></p>
<p>&#x5BF9;&#x4E8E;&#x7814;&#x53D1;&#x4EBA;&#x5458;&#xFF0C;&#x5B58;&#x50A8;&#x6280;&#x672F;&#x7684;&#x5B66;&#x4E60;&#x5185;&#x5BB9;&#x975E;&#x5E38;&#x4E4B;&#x591A;&#x3002;&#x6211;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x7406;&#x89E3;&#xFF0C;&#x628A;&#x5B83;&#x4EEC;&#x5927;&#x81F4;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;8&#x9879;&#x5185;&#x5BB9;&#xFF1A;</p>
<ol>
<li>&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#xFF1A;UNIX/Linux/Windows&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#xFF0C;&#x8981;&#x6C42;&#x719F;&#x6089;&#x751A;&#x81F3;&#x7CBE;&#x901A;&#x3002;</li>
<li>&#x5F00;&#x53D1;&#x6280;&#x672F;&#xFF1A;C/C++&#xFF0C;&#x7F51;&#x7EDC;&#x7F16;&#x7A0B;&#xFF0C;&#x591A;&#x8FDB;&#x7A0B;/&#x591A;&#x7EBF;&#x7A0B;&#xFF0C;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x3002;&#x5982;&#x679C;&#x80FD;&#x638C;&#x63E1;&#x5185;&#x6838;&#x5F00;&#x53D1;&#x3001;&#x9A71;<br>&#x52A8;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x5219;&#x66F4;&#x4F73;&#x3002;</li>
<li>&#x5B58;&#x50A8;&#x57FA;&#x7840;&#xFF1A;&#x78C1;&#x76D8;&#x3001;RAID&#x9635;&#x5217;&#x3001;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7B49;&#x5B58;&#x50A8;&#x76F8;&#x5173;&#x786C;&#x4EF6;&#x548C;&#x8F6F;&#x4EF6;&#x7684;&#x5B89;&#x88C5;&#x3001;&#x914D;&#x7F6E;&#x3001;&#x8C03;&#x8BD5;&#x3002;</li>
<li>&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#xFF1A;RAID, DAS, SAN, NAS, CAS&#x7B49;&#xFF0C;&#x5BF9;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x7684;&#x539F;&#x7406;&#x4EE5;&#x53CA;&#x5B9E;&#x73B0;&#x6280;&#x672F;&#x719F;&#x6089;&#x3002;</li>
<li>&#x5B58;&#x50A8;&#x534F;&#x8BAE;&#xFF1A;TCP/IP, SCSI, iSCSI, NFS/CIFS&#x7B49;, &#x719F;&#x6089;&#x8FD9;&#x4E9B;&#x5B58;&#x50A8;&#x76F8;&#x5173;&#x534F;&#x8BAE;&#x3002;</li>
<li>&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF1A;VFS, EXTx/NTFS/FAT32&#x7B49;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;, NFS/CIFS&#x7F51;&#x7EDC;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;, Lustre/GFS/AFS<br>&#x7B49;&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x638C;&#x63E1;&#x539F;&#x7406;&#x548C;&#x5B9E;&#x73B0;&#x6280;&#x672F;&#xFF0C;&#x80FD;&#x591F;&#x9605;&#x8BFB;&#x6E90;&#x7801;&#x5219;&#x66F4;&#x597D;&#x3002;</li>
<li>&#x5B58;&#x50A8;&#x6280;&#x672F;&#xFF1A;Deduplication, SSD, HSM, Virtualization, Snapshot, Replication, CDP<br>, VTL, Thin Provision&#x7B49;&#x7B49;&#xFF0C;&#x5C3D;&#x91CF;&#x591A;&#x8DDF;&#x8E2A;&#x6700;&#x65B0;&#x5B58;&#x50A8;&#x6280;&#x672F;&#x8FDB;&#x5C55;&#xFF0C;&#x591A;&#x591A;&#x76CA;&#x5584;&#x3002;</li>
<li>&#x5B58;&#x50A8;&#x67B6;&#x6784;&#xFF1A;&#x638C;&#x63E1;&#x4E0D;&#x540C;&#x884C;&#x4E1A;&#x7684;&#x5B58;&#x50A8;&#x9700;&#x6C42;&#xFF0C;&#x80FD;&#x591F;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x9700;&#x6C42;&#x63D0;&#x51FA;&#x5B58;&#x50A8;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x5B58;<br>&#x50A8;&#x7CFB;&#x7EDF;&#x67B6;&#x6784;&#x3001;&#x8BBE;&#x8BA1;&#x548C;&#x5B9E;&#x73B0;&#x3002;</li>
</ol>
<p>&#x5B58;&#x50A8;&#x7814;&#x53D1;&#x4EBA;&#x5458;&#x6210;&#x957F;&#x5927;&#x81F4;&#x53EF;&#x5206;&#x4E3A;&#x56DB;&#x4E2A;&#x7EA7;&#x522B;&#xFF1A;</p>
<ol>
<li>&#x5B58;&#x50A8;&#x521D;&#x7EA7;&#x7814;&#x53D1;&#xFF1A;&#x638C;&#x63E1;1&#x3001;2&#x3001;3&#x9879;&#x5B58;&#x50A8;&#x5185;&#x5BB9;&#xFF0C;&#x5728;&#x4E2D;&#x9AD8;&#x7EA7;&#x5B58;&#x50A8;&#x7814;&#x53D1;&#x6307;&#x5BFC;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#x7814;&#x53D1;&#x5DE5;&#x4F5C;&#x3002;</li>
<li>&#x5B58;&#x50A8;&#x4E2D;&#x7EA7;&#x7814;&#x53D1;&#xFF1A;&#x638C;&#x63E1;4&#x3001;5&#x9879;&#x5B58;&#x50A8;&#x5185;&#x5BB9;&#xFF0C;&#x53EF;&#x4EE5;&#x5E26;&#x9886;&#x56E2;&#x961F;&#x8FDB;&#x884C;&#x7814;&#x53D1;&#x5DE5;&#x4F5C;&#xFF0C;&#x5E76;&#x6307;&#x5BFC;&#x521D;&#x7EA7;&#x7814;&#x53D1;&#x3002;</li>
<li>&#x5B58;&#x50A8;&#x9AD8;&#x7EA7;&#x7814;&#x53D1;&#xFF1A;&#x638C;&#x63E1;6&#x3001;7&#x9879;&#x5B58;&#x50A8;&#x5185;&#x5BB9;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#x65B0;&#x6280;&#x672F;&#x7684;&#x7814;&#x7A76;&#xFF0C;&#x5BF9;&#x73B0;&#x6709;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x4F18;<br>&#x5316;&#x6539;&#x8FDB;&#xFF0C;&#x539F;&#x578B;&#x7CFB;&#x7EDF;&#x5F00;&#x53D1;&#x3002;</li>
<li>&#x5B58;&#x50A8;&#x7814;&#x53D1;&#x4E13;&#x5BB6;&#xFF1A;&#x638C;&#x63E1;8&#x9879;&#x5B58;&#x50A8;&#x5185;&#x5BB9;&#xFF0C;&#x5B58;&#x50A8;&#x524D;&#x6CBF;&#x6280;&#x672F;&#x7814;&#x7A76;&#xFF0C;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x89C4;&#x5212;&#x4E0E;&#x67B6;&#x6784;&#xFF0C;&#x5BF9;&#x5B58;&#x50A8;&#x53D1;<br>&#x5C55;&#x8D8B;&#x52BF;&#x6709;&#x7740;&#x5F88;&#x597D;&#x7684;&#x7406;&#x89E3;&#x548C;&#x6D1E;&#x5BDF;&#x3002;</li>
</ol>
<p>10000&#x5C0F;&#x65F6;&#x6CD5;&#x5219; (The 10,OOO Hour Rule)&#xFF0C;&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x4EFB;&#x4F55;&#x4EBA;&#x8981;&#x5728;&#x4EFB;&#x4F55;&#x9886;&#x57DF;&#x51FA;&#x7C7B;&#x62D4;&#x8403;&#xFF0C;&#x8131;&#x9896;<br>&#x800C;&#x51FA;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x8BA4;&#x771F;&#x6295;&#x5165;10000&#x5C0F;&#x65F6;&#x4EE5;&#x4E0A;&#x3002;10000&#x5C0F;&#x65F6;&#x662F;&#x4E00;&#x4E2A;&#x7A81;&#x7834;&#x7684;&#x4E34;&#x754C;&#x70B9;&#x3002;&#x4EE5;&#x6BCF;&#x5929;10&#x4E2A;&#x5C0F;&#x65F6;&#x7B97;<br>&#xFF0C;10000&#x5C0F;&#x65F6;&#x76F8;&#x5F53;&#x4E8E;&#x4E09;&#x5E74;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x8981;&#x505A;&#x6210;&#x529F;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;&#xFF0C;&#x4F60;&#x5C31;&#x8981;&#x6BCF;&#x5929;10&#x5C0F;&#x65F6;&#x6295;&#x5165;&#xFF0C;&#x6301;&#x7EED;3&#x5E74;<br>&#x3002;&#x5982;&#x679C;&#x6BCF;&#x5929;&#x53EA;&#x6709;5&#x5C0F;&#x65F6;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;6&#x5E74;&#x3002;&#x5982;&#x679C;&#x6BCF;&#x5929;3&#x5C0F;&#x65F6;&#xFF0C;&#x5219;&#x9700;&#x8981;10&#x5E74;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x6210;&#x4E3A;&#x5B58;<br>&#x50A8;&#x9886;&#x57DF;&#x7684;&#x4E13;&#x5BB6;&#xFF0C;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x6377;&#x5F84;&#x53EF;&#x8D70;&#xFF0C;&#x53EA;&#x6709;&#x575A;&#x6301;&#x5B66;&#x4E60;&#x3001;&#x5B9E;&#x8DF5;&#x3001;&#x601D;&#x8003;&#x3002;3&#x5E74;&#x3001;5&#x5E74;&#x3001;8&#x5E74;&#x3001;10&#x5E74;&#x540E;<br>&#xFF0C;&#x53EA;&#x8981;&#x4F60;&#x4ECD;&#x5728;&#x8FFD;&#x6C42;&#x65E2;&#x5B9A;&#x76EE;&#x6807;&#xFF0C;&#x5B9A;&#x4F1A;&#x6709;&#x6240;&#x6210;&#x5C31;&#x3002;</p>
<p>&#x201C;&#x539A;&#x79EF;&#x800C;&#x8584;&#x53D1;&#x201D;&#xFF0C;&#x4E0E;&#x6240;&#x6709;&#x5B58;&#x50A8;&#x540C;&#x884C;&#x5171;&#x52C9;&#xFF01;</p>
<p>###<a href="http://blog.csdn.net/liuaigui/article/details/5368300" target="_blank" rel="external">&#x5B58;&#x50A8;&#x5B66;&#x4E60;&#x4E4B;&#x8DEF;</a></p>
<ul>
<li>0&#x3001;&#x5B58;&#x50A8;&#x5165;&#x95E8;</li>
</ul>
<p>&#x3000;&#x9886;&#x8DEF;&#x4EBA;&#x7684;&#x4F5C;&#x7528;&#x5F88;&#x5927;&#xFF0C;&#x8FD9;&#x4E2A;&#x4EBA;&#x53EF;&#x80FD;&#x662F;&#x4F60;&#x505A;&#x7814;&#x7A76;&#x751F;&#x7684;&#x5BFC;&#x5E08;&#xFF0C;&#x6216;&#x8005;&#x5DE5;&#x4F5C;&#x4E2D;&#x7684;tutor&#xFF0C;&#x6216;&#x8005;&#x662F;&#x670B;&#x53CB;&#x3001;<br>&#x540C;&#x4E8B;&#x3002;&#x6307;&#x70B9;&#x8FF7;&#x6D25;&#xFF0C;&#x5B66;&#x4E60;&#x548C;&#x7814;&#x7A76;&#x8FC7;&#x7A0B;&#x4E2D;&#x5C06;&#x5C11;&#x8D70;&#x5F88;&#x591A;&#x5F2F;&#x8DEF;&#xFF0C;&#x7ECF;&#x9A8C;&#x7684;&#x4EF7;&#x503C;&#x8FD9;&#x5728;&#x8FD9;&#x91CC;&#x4F53;&#x73B0;&#x3002;&#x5982;&#x679C;&#x4F60;&#x662F;<br>&#x5B58;&#x50A8;&#x521D;&#x5B66;&#x8005;&#xFF0C;&#x8D76;&#x5FEB;&#x53BB;&#x5BFB;&#x627E;&#x4F60;&#x7684;&#x9886;&#x8DEF;&#x4EBA;&#x3002;&#x5F53;&#x7136;&#x81EA;&#x5B66;&#x6210;&#x624D;&#x7684;&#x4F8B;&#x5B50;&#x4E3E;&#x4E0D;&#x80DC;&#x4E3E;&#xFF0C;&#x8FD8;&#x662F;&#x9760;&#x81EA;&#x5DF1;&#x6765;&#x505A;&#x6743;&#x8861;&#x3002;</p>
<ul>
<li>1&#x3001;&#x5B58;&#x50A8;&#x56FE;&#x4E66;</li>
</ul>
<p>&#x3000;&#x5B66;&#x4E60;&#x5B58;&#x50A8;&#x7684;&#x57FA;&#x7840;&#x7406;&#x8BBA;&#x6700;&#x76F4;&#x63A5;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x8BFB;&#x4E66;&#x3002;&#x76F8;&#x5BF9;&#x4E8E;&#x8BA1;&#x7B97;&#x4E0E;&#x7F51;&#x7EDC;&#x6280;&#x672F;&#xFF0C;&#x5B58;&#x50A8;&#x6280;&#x672F;&#x53D1;&#x5C55;&#x662F;&#x76F8;<br>&#x5BF9;&#x843D;&#x540E;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x56FE;&#x4E66;&#x65B9;&#x9762;&#x4E5F;&#x8981;&#x5C11;&#x5F88;&#x591A;&#xFF0C;&#x56FD;&#x5185;&#x7684;&#x66F4;&#x5C11;&#xFF0C;&#x800C;&#x4E14;&#x5927;&#x591A;&#x662F;&#x7FFB;&#x8BD1;&#x6216;&#x6539;&#x7F16;&#x7684;&#x3002;&#x6211;&#x8BFB;&#x8FC7;&#x7684;&#x56FD;<br>&#x5185;&#x5B58;&#x50A8;&#x56FE;&#x4E66;&#x6709;&#xFF1A;</p>
<ul>
<li>&#x7F51;&#x7EDC;&#x5B58;&#x50A8;&#x6280;&#x672F;    &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;</li>
<li>&#x7F51;&#x7EDC;&#x5B58;&#x50A8;&#x6280;&#x672F;&#x5BFC;&#x8BBA;    &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;</li>
<li>SAN&#x5B58;&#x50A8;&#x533A;&#x57DF;&#x7F51;&#x7EDC;    &#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;</li>
<li>&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5907;&#x4EFD;&#x4E0E;&#x707E;&#x96BE;&#x6062;&#x590D;    &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;</li>
<li>&#x57FA;&#x4E8E;&#x5BF9;&#x8C61;&#x7684;&#x7F51;&#x7EDC;&#x5B58;&#x50A8;    &#x7535;&#x5B50;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;</li>
<li>IPSAN&#x6743;&#x5A01;&#x6307;&#x5357;    &#x4E2D;&#x56FD;&#x7535;&#x529B;&#x51FA;&#x7248;&#x793E;</li>
<li>&#x6210;&#x5C31;&#x5B58;&#x50A8;&#x4E13;&#x5BB6;&#x4E4B;&#x8DEF;    &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;</li>
<li>&#x4FE1;&#x606F;&#x5B58;&#x50A8;&#x4E0E;&#x7BA1;&#x7406;    &#x4EBA;&#x6C11;&#x90AE;&#x7535;&#x51FA;&#x7248;&#x793E;</li>
<li>&#x5927;&#x8BDD;&#x5B58;&#x50A8;    &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;    </li>
<li>&#x6570;&#x636E;&#x91CD;&#x73B0;    &#x6E05;&#x534E;&#x5927;&#x5B66;&#x51FA;&#x7248;&#x793E;</li>
</ul>
<ul>
<li>2&#x3001;&#x5B58;&#x50A8;&#x8D44;&#x6E90;</li>
</ul>
<p>&#x3000;&#x7F51;&#x7EDC;&#x8D44;&#x6E90;&#x4E5F;&#x662F;&#x5B66;&#x4E60;&#x5B58;&#x50A8;&#x7684;&#x91CD;&#x8981;&#x8D44;&#x6E90;&#xFF0C;&#x800C;&#x4E14;&#x80FD;&#x591F;&#x5F88;&#x597D;&#x5730;&#x8DDF;&#x8E2A;&#x5B58;&#x50A8;&#x7684;&#x6700;&#x8FD1;&#x53D1;&#x5C55;&#x52A8;&#x6001;&#x3002;&#x6211;&#x5E38;&#x8BBF;&#x95EE;&#x7684;URL&#x6709;&#xFF1A;</p>
<ul>
<li>InfoStor: <a href="http://www.infostor.com" target="_blank" rel="external">http://www.infostor.com</a>  </li>
<li>SINA: <a href="http://www.snia.org/home" target="_blank" rel="external">http://www.snia.org/home</a>  </li>
<li>Gartner: <a href="http://www.gartner.com/technology/home.jsp" target="_blank" rel="external">http://www.gartner.com/technology/home.jsp</a>  </li>
<li>SanSky: <a href="http://www.sansky.net/" target="_blank" rel="external">http://www.sansky.net/</a>  </li>
<li>DoStor: <a href="http://www.dostor.com/" target="_blank" rel="external">http://www.dostor.com/</a>  </li>
<li>WatchStor: <a href="http://www.watchstor.com/" target="_blank" rel="external">http://www.watchstor.com/</a>  </li>
</ul>
<p>&#x53E6;&#x5916;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x56FD;&#x9645;&#x4E0A;&#x5B58;&#x50A8;&#x4F1A;&#x8BAE;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<ul>
<li>SDC&#xFF0C;Storage Developer Conference&#x3000;(2009,<a href="http://www.snia.org/events/storage-developer2009/presentations" target="_blank" rel="external">http://www.snia.org/events/storage-developer2009/presentations</a>)</li>
<li>FAST, File and Storage Technologies (<a href="http://www.usenix.org/events/fast/" target="_blank" rel="external">http://www.usenix.org/events/fast/</a>)</li>
</ul>
<ul>
<li><p>3&#x3001;&#x5B58;&#x50A8;&#x5B9E;&#x8DF5;</p>
<p>&#x5927;&#x5B66;&#x4E2D;&#x6211;&#x4EEC;&#x6700;&#x7F3A;&#x662F;&#x4F30;&#x8BA1;&#x5C31;&#x662F;&#x5B9E;&#x8DF5;&#x3002;&#x5B9E;&#x8DF5;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x66F4;&#x6DF1;&#x523B;&#x5730;&#x7406;&#x89E3;&#x548C;&#x638C;&#x63E1;&#x7406;&#x8BBA;&#xFF0C;&#x5E76;&#x4E14;&#x83B7;&#x5F97;<br>&#x5C06;&#x7406;&#x8BBA;&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x548C;&#x5E94;&#x7528;&#x7684;&#x80FD;&#x529B;&#x3002;&#x5B9E;&#x8DF5;&#x6709;&#x5F88;&#x591A;&#x65B9;&#x5F0F;&#xFF0C;&#x6BD4;&#x5982;&#x81EA;&#x5DF1;&#x52A8;&#x624B;&#x8FDB;&#x884C;&#x5B58;&#x50A8;&#x8F6F;&#x786C;&#x4EF6;&#x7684;&#x8C03;&#x8BD5;&#x3001;&#x5B58;<br>&#x50A8;&#x7CFB;&#x7EDF;&#x96C6;&#x4F18;&#x5316;&#x6539;&#x8FDB;&#x3001;&#x5F00;&#x53D1;&#x4E00;&#x4E9B;&#x8F6F;&#x4EF6;&#x3001;&#x9605;&#x8BFB;&#x5B58;&#x50A8;&#x8F6F;&#x4EF6;&#x6E90;&#x7801;&#x7B49;&#x7B49;&#x3002;&#x5B9E;&#x8DF5;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#xFF0C;&#x591A;&#x591A;&#x76CA;&#x5584;&#xFF0C;&#x5C3D;<br>&#x91CF;&#x627E;&#x673A;&#x4F1A;&#x591A;&#x505A;&#x3002;&#x6E90;&#x4EE3;&#x7801;&#x9664;&#x4E86;Linux kernel&#x5916;&#xFF0C;www.sourceforge.net&#x662F;&#x6700;&#x597D;&#x7684;&#x53BB;&#x5904;&#xFF0C;&#x53EF;&#x4EE5;&#x8BFB;<br>VFS&#x3001;EXT2/3/4&#x3001;Soft RAID&#x3001;LVM&#x3001;FDISK&#x3001;NFS/CIFS&#x3001;SCSI/iSCSI&#x3001;FUSE&#x3001;AFS&#x3001;LUSTRE&#x7B49;&#x7B49;&#x3002;</p>
</li>
<li><p>4&#x3001;&#x5B58;&#x50A8;&#x4EA4;&#x6D41;</p>
</li>
</ul>
<p>&#x3000;&#x725B;&#x4EBA;&#x5927;&#x591A;&#x90FD;&#x662F;&#x559C;&#x6B22;&#x4E0E;&#x4EBA;&#x5206;&#x4EAB;&#x7684;&#xFF0C;&#x4F60;&#x4E5F;&#x4E0D;&#x8981;&#x62C5;&#x5FC3;&#x5206;&#x4EAB;&#x81EA;&#x5DF1;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x522B;&#x4EBA;&#x5C31;&#x8D85;&#x8D8A;&#x4F60;&#x4E86;&#x3002;&#x80FD;&#x628A;&#x81EA;<br>&#x5DF1;&#x7684;&#x4E1C;&#x897F;&#x8BF4;&#x5F97;&#x8BA9;&#x522B;&#x4EBA;&#x660E;&#x767D;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5BF9;&#x81EA;&#x5DF1;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x63D0;&#x5347;&#x3002;&#x7269;&#x4EE5;&#x7C7B;&#x805A;&#xFF0C;&#x4EBA;&#x4EE5;&#x7FA4;&#x5206;&#x3002;&#x73B0;&#x5728;&#x7F51;&#x7EDC;&#x4E0D;<br>&#x8981;&#x592A;&#x65B9;&#x4FBF;&#xFF0C;&#x627E;&#x4E00;&#x7FA4;&#x5174;&#x8DA3;&#x76F8;&#x6295;&#x7684;&#x4EBA;&#xFF0C;&#x591A;&#x591A;&#x4EA4;&#x6D41;&#xFF0C;&#x5927;&#x5BB6;&#x5171;&#x540C;&#x8FDB;&#x6B65;&#x5C31;&#x4F55;&#x7B49;&#x7684;&#x597D;&#x4E8B;&#x3002;&#x800C;&#x4E14;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x5EFA;<br>&#x7ACB;&#x4EBA;&#x8109;&#xFF0C;&#x8BF4;&#x4E0D;&#x5B9A;&#x54EA;&#x5929;&#x5FD7;&#x540C;&#x9053;&#x5408;&#x7684;&#x4EBA;&#xFF0C;&#x5C31;&#x4E00;&#x8D77;&#x505A;&#x5171;&#x4E8B;&#x6216;&#x521B;&#x4E1A;&#x4E86;&#x3002;</p>
<ul>
<li>5&#x3001;&#x5B58;&#x50A8;&#x601D;&#x8003;</li>
</ul>
<p>&#x3000;&#x5B66;&#x800C;&#x4E0D;&#x601D;&#x5219;&#x7F54;&#xFF0C;&#x601D;&#x800C;&#x4E0D;&#x5B66;&#x5219;&#x8D3B;&#x3002;&#x5F53;&#x5DF2;&#x7ECF;&#x638C;&#x63E1;&#x4E86;&#x4E00;&#x4E9B;&#x5B58;&#x50A8;&#x7406;&#x8BBA;&#x548C;&#x5B9E;&#x8DF5;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x53D1;<br>&#x5C55;&#x7684;&#x74F6;&#x9888;&#xFF0C;&#x9700;&#x8981;&#x9009;&#x62E9;&#x4E00;&#x4E24;&#x4E2A;&#x65B9;&#x5411;&#x8FDB;&#x884C;&#x6DF1;&#x5165;&#x5B66;&#x4E60;&#x548C;&#x7814;&#x7A76;&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x624D;&#x80FD;&#x6709;&#x7CBE;&#x529B;&#x53BB;&#x5206;&#x6790;&#x548C;&#x601D;&#x8003;&#x7406;<br>&#x8BBA;&#x548C;&#x6280;&#x672F;&#x4E0A;&#x4F18;&#x70B9;&#x4E0E;&#x4E0D;&#x8DB3;&#xFF0C;&#x7EE7;&#x800C;&#x4E0D;&#x65AD;&#x5B9E;&#x8DF5;&#x548C;&#x601D;&#x8003;&#x3002;&#x4ECE;&#x800C;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x8FBE;&#x5230;&#x4E00;&#x4E2A;&#x66F4;&#x9AD8;&#x7684;&#x5C42;&#x6B21;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;<br>&#x80FD;&#x4F1A;&#x53D1;&#x73B0;&#x4E00;&#x4E9B;&#x673A;&#x4F1A;&#x3002;</p>
<ul>
<li>6&#x3001;&#x5B58;&#x50A8;&#x7ECF;&#x9A8C;</li>
</ul>
<p>&#x3000;&#x6211;&#x4EEC;&#x5E38;&#x5E38;&#x770B;&#x5230;&#x62DB;&#x8058;&#x4FE1;&#x606F;&#x4E0A;&#x8981;&#x6C42;8&#xFF0D;10&#x5E74;&#x7684;&#x76F8;&#x5173;&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#x3002;&#x4E0D;&#x7BA1;&#x662F;&#x5931;&#x8D25;&#x8FD8;&#x662F;&#x6210;&#x529F;&#x7684;&#x7ECF;&#x9A8C;&#xFF0C;&#x5BF9;<br>&#x672A;&#x6765;&#x7684;&#x5DE5;&#x4F5C;&#x90FD;&#x5F88;&#x6709;&#x610F;&#x4E49;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5931;&#x8D25;&#x7684;&#x7ECF;&#x9A8C;&#xFF0C;&#x5C06;&#x5927;&#x5927;&#x63D0;&#x6210;&#x529F;&#x7684;&#x51E0;&#x7387;&#x3002;&#x5BF9;&#x641E;&#x5B58;&#x50A8;&#x7684;&#x6765;&#x8BF4;&#xFF0C;&#x6700;&#x597D;<br>&#x80FD;&#x627E;&#x673A;&#x4F1A;&#x8FDB;&#x5165;&#x5B58;&#x50A8;&#x884C;&#x4E1A;&#x7684;&#x516C;&#x53F8;&#x6216;&#x7814;&#x7A76;&#x673A;&#x6784;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x5BF9;&#x7ECF;&#x9A8C;&#x7684;&#x63D0;&#x5347;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x3002;&#x56E0;&#x4E3A;&#x8FD9;&#x662F;&#x6B63;&#x89C4;&#x519B;<br>&#xFF0C;&#x662F;&#x9002;&#x5E94;&#x5E02;&#x573A;&#x7528;&#x6237;&#x9700;&#x6C42;&#x7684;&#xFF0C;&#x800C;&#x81EA;&#x5DF1;&#x7684;&#x5B66;&#x4E60;&#x548C;&#x7814;&#x7A76;&#xFF0C;&#x90FD;&#x662F;&#x51FA;&#x81EA;&#x81EA;&#x8EAB;&#x9700;&#x6C42;&#x7684;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5728;&#x516C;&#x53F8;&#x5DE5;&#x4F5C;<br>&#xFF0C;&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x521B;&#x4E1A;&#xFF0C;&#x7528;&#x6237;&#x9700;&#x6C42;&#x662F;&#x505A;&#x4EA7;&#x54C1;&#x7684;&#x6839;&#x672C;&#x51FA;&#x53D1;&#x70B9;&#xFF0C;&#x8FD9;&#x4E2A;&#x610F;&#x8BC6;&#x8981;&#x5C3D;&#x65E9;&#x57F9;&#x517B;&#x3002;</p>
<ul>
<li>7&#x3001;&#x5B58;&#x50A8;&#x8D8B;&#x52BF;</li>
</ul>
<p>&#x3000;&#x719F;&#x6089;&#x5386;&#x53F2;&#xFF0C;&#x628A;&#x63E1;&#x73B0;&#x5728;&#xFF0C;&#x9884;&#x6D4B;&#x672A;&#x6765;&#x3002;&#x4E00;&#x65E6;&#x6211;&#x4EEC;&#x5BF9;&#x5B58;&#x50A8;&#x6280;&#x672F;&#x7684;&#x8FC7;&#x53BB;&#x548C;&#x73B0;&#x5728;&#x90FD;&#x975E;&#x5E38;&#x719F;&#x6089;&#x548C;&#x6DF1;&#x5165;&#x7406;<br>&#x89E3;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x6B63;&#x786E;&#x5730;&#x5BF9;&#x5B58;&#x50A8;&#x7684;&#x672A;&#x6765;&#x8D8B;&#x52BF;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x548C;&#x9884;&#x6D4B;&#xFF0C;&#x638C;&#x63E1;&#x5148;&#x673A;&#x548C;&#x5546;&#x673A;&#x3002;&#x8FD9;&#x79CD;&#x4EBA;<br>&#x662F;&#x5927;&#x725B;&#xFF0C;&#x6216;&#x8BB8;&#x6211;&#x4EEC;&#x5F88;&#x96BE;&#x8FBE;&#x5230;&#x8FD9;&#x4E2A;&#x5C42;&#x6B21;&#xFF0C;&#x4F46;&#x81F3;&#x5C11;&#x5927;&#x725B;&#x63D0;&#x51FA;&#x5F88;&#x591A;&#x65B0;&#x7684;&#x89C2;&#x70B9;&#x548C;&#x6982;&#x5FF5;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x5F88;&#x5FEB;<br>&#x7406;&#x89E3;&#x548C;&#x8BA4;&#x540C;&#x3002;</p>
<ul>
<li>8&#x3001;&#x5B58;&#x50A8;&#x521B;&#x65B0;</li>
</ul>
<p>&#x3000;&#x521B;&#x65B0;&#x662F;&#x9700;&#x8981;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x524D;&#x9762;&#x7684;&#x5B66;&#x4E60;&#x3001;&#x5B9E;&#x8DF5;&#x3001;&#x601D;&#x8003;&#xFF0C;&#x5B58;&#x50A8;&#x521B;&#x65B0;&#x6839;&#x672C;&#x65E0;&#x4ECE;&#x8C08;&#x8D77;&#x3002;&#x521B;<br>&#x65B0;&#x53EF;&#x80FD;&#x662F;&#x7406;&#x8BBA;&#x521B;&#x65B0;&#x548C;&#x6280;&#x672F;&#x521B;&#x65B0;&#xFF0C;&#x4E3B;&#x8981;&#x51FA;&#x53D1;&#x70B9;&#x5C31;&#x662F;&#x8981;&#x89E3;&#x51B3;&#x548C;&#x6539;&#x8FDB;&#x76EE;&#x524D;&#x7406;&#x8BBA;&#x6216;&#x6280;&#x672F;&#x4E0A;&#x5B58;&#x5728;&#x7684;&#x7F3A;&#x9677;<br>&#x4E0E;&#x4E0D;&#x8DB3;&#xFF0C;&#x8FD9;&#x81EA;&#x7136;&#x5C31;&#x8981;&#x6C42;&#x6211;&#x4EEC;&#x5BF9;&#x73B0;&#x6709;&#x7684;&#x4E1C;&#x897F;&#x975E;&#x5E38;&#x719F;&#x6089;&#x3002;&#x8FBE;&#x5230;&#x53EF;&#x4EE5;&#x6DF1;&#x5165;&#x601D;&#x8003;&#x548C;&#x5BFB;&#x6C42;&#x521B;&#x65B0;&#x7684;&#x5C42;&#x6B21;&#xFF0C;<br>&#x6211;&#x60F3;&#x5927;&#x6982;&#x89C4;&#x5F8B;&#x6027;&#x7684;&#x4E1C;&#x897F;&#x5C31;&#x5F88;&#x5C11;&#x4E86;&#x3002;&#x6210;&#x529F;&#x6709;&#x65F6;&#x662F;&#x9700;&#x8981;&#x70B9;&#x8FD0;&#x6C14;&#xFF0C;&#x4F46;&#x524D;&#x671F;&#x7684;&#x529F;&#x8BFE;&#x662F;&#x8981;&#x505A;&#x597D;&#x7684;&#xFF0C;&#x6210;&#x529F;<br>&#x8FD8;&#x662F;&#x7737;&#x987E;&#x6709;&#x5145;&#x5206;&#x51C6;&#x5907;&#x7684;&#x4EBA;&#x7684;&#x3002;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/07/18/storage-technology/" data-id="cinga3ymo00bpdcizsyuiotyl" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/storage/">storage</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ipmi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/09/ipmi/" class="article-date">
  <time datetime="2014-07-08T16:00:00.000Z" itemprop="datePublished">2014-07-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/09/ipmi/">ipmi</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h3><p>The <strong>Intelligent Platform Management Interface (IPMI)</strong> is a standardized computer<br>system interface used by system administrators for out-of-band management of<br>computer systems and monitoring of their operation. It is a way to manage a<br>computer that may be powered off or otherwise unresponsive by using a network<br>connection to the hardware rather than to an operating system or login shell.</p>
<p><img src="http://upload.wikimedia.org/wikipedia/commons/f/f2/IPMI-Block-Diagram.png" alt=""></p>
<h3 id="why-use"><a href="#Why-use" class="headerlink" title="Why use"></a>Why use</h3><p>Use lm-sensor? </p>
<pre><code>[root@localhost ~]# sensors
acpitz-virtual-0
Adapter: Virtual device
temp1:       +27.8&#xB0;C  (crit = +106.0&#xB0;C)                  
temp2:       +29.8&#xB0;C  (crit = +106.0&#xB0;C)                  

coretemp-isa-0000
Adapter: ISA adapter
Physical id 0: +35.0&#xB0;C  (high = +85.0&#xB0;C, crit = +105.0&#xB0;C)  
Core 0:        +32.0&#xB0;C  (high = +85.0&#xB0;C, crit = +105.0&#xB0;C)  
Core 1:        +31.0&#xB0;C  (high = +85.0&#xB0;C, crit = +105.0&#xB0;C)  
</code></pre><p>Use dmidecode?</p>
<h3 id="install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><p>On Centos 6.5</p>
<pre><code>[root@localhost ~]# yum install OpenIPMI -y
[root@localhost ~]# yum install ipmitool -y
[root@localhost ~]# chkconfig ipmi on
[root@localhost ~]# service ipmi start
Starting ipmi drivers:                                     [  OK  ]
[root@localhost ~]# ls -l /dev/ipmi*
crw-rw----. 1 root root 245, 0 Feb  5 14:18 /dev/ipmi0
[root@localhost ~]# lsmod | grep ipmi
ipmi_devintf            7729  0 
[root@localhost ~]# modinfo ipmi_devintf
filename:       /lib/modules/2.6.32-431.el6.x86_64/kernel/drivers/char/ipmi/ipmi_devintf.ko
alias:          platform:ipmi_si
description:    Linux device interface for the IPMI message handler.
author:         Corey Minyard &lt;minyard@mvista.com&gt;
license:        GPL
srcversion:     592518D3E7F47DFC4EBEC9F
depends:        
vermagic:       2.6.32-431.el6.x86_64 SMP mod_unload modversions 
parm:           ipmi_major:Sets the major number of the IPMI device.  By default, or if you set it to zero, it will choose the next available device.  Setting it to -1 will disable the interface.  Other values will set the major device number to that value. (int)
[root@localhost ~]#
</code></pre><h3 id="use"><a href="#Use" class="headerlink" title="Use"></a>Use</h3><ol>
<li><p><strong>To check firmware version</strong></p>
<pre><code>[root@localhost ~]# ipmitool mc info
Device ID                 : 20
Device Revision           : 1
Firmware Revision         : 0.8
IPMI Version              : 2.0
Manufacturer ID           : 9091
Manufacturer Name         : Unknown (0x2383)
Product ID                : 289 (0x0121)
Product Name              : Unknown (0x121)
Device Available          : yes
Provides Device SDRs      : no
Additional Device Support :
    Sensor Device
    SDR Repository Device
    SEL Device
    FRU Inventory Device
    IPMB Event Receiver
    Chassis Device
Aux Firmware Rev Info     : 
    0x00
    0x37
    0x00
    0x00
</code></pre></li>
<li><p><strong>Show sensor output</strong></p>
<pre><code>[root@localhost ~]# ipmitool sdr list
CPU0_TEMP        | 25 degrees C      | ok
VCORE_CPU0       | 0.83 Volts        | ok
+1.5V_DDR3       | 1.52 Volts        | ok
PCH              | 1.04 Volts        | ok
+3.3V            | 3.42 Volts        | ok
+5V              | 5.14 Volts        | ok
+5VSB            | 5.07 Volts        | ok
VBAT             | 3.34 Volts        | ok
+12V_MONITOR     | 12.40 Volts       | ok
THERMAL01        | 35 degrees C      | ok
THERMAL02        | 31 degrees C      | ok
CPU_FAN1         | 5900 RPM          | ok
SYS_FAN1         | 0 RPM             | nr
SYS_FAN2         | 0 RPM             | nr
SYS_FAN3         | 0 RPM             | nr
Watchdog         | Not Readable      | ns
[root@localhost ~]# ipmitool sdr type list
Sensor Types:
    Temperature                 Voltage                  
    Current                     Fan                      
    Physical Security           Platform Security        
    Processor                   Power Supply             
    Power Unit                  Cooling Device           
    Other                       Memory                   
    Drive Slot / Bay            POST Memory Resize       
    System Firmwares            Event Logging Disabled   
    Watchdog                    System Event             
    Critical Interrupt          Button                   
    Module / Board              Microcontroller          
    Add-in Card                 Chassis                  
    Chip Set                    Other FRU                
    Cable / Interconnect        Terminator               
    System Boot Initiated       Boot Error               
    OS Boot                     OS Critical Stop         
    Slot / Connector            System ACPI Power State  
    Watchdog                    Platform Alert           
    Entity Presence             Monitor ASIC             
    LAN                         Management Subsystem Health
    Battery                     Session Audit            
    Version Change              FRU State                
[root@localhost ~]# ipmitool sdr type Fan
CPU_FAN1         | 31h | ok  |  7.1 | 5900 RPM
SYS_FAN1         | 32h | lnr |  7.2 | 0 RPM
SYS_FAN2         | 33h | lnr |  7.5 | 0 RPM
SYS_FAN3         | 34h | lnr |  7.6 | 0 RPM
[root@localhost ~]# ipmitool sdr type Temperature
CPU0_TEMP        | 21h | ok  |  7.1 | 25 degrees C
THERMAL01        | 23h | ok  |  7.1 | 35 degrees C
THERMAL02        | 24h | ok  |  7.1 | 31 degrees C
</code></pre></li>
<li><p><strong>Display/reset password for default root user (userid &#x2018;2&#x2019;)</strong></p>
<pre><code>ipmitool user list 1
ipmitool user set password 2 &lt;new_password&gt;
</code></pre></li>
</ol>
<p><strong>Display/configure lan settings</strong></p>
<pre><code>ipmitool lan print 1
ipmitool lan set 1 ipsrc [ static | dhcp ]
ipmitool lan set 1 ipaddr 192.168.1.101
ipmitool lan set 1 netmask 255.255.255.0
ipmitool lan set 1 defgw ipaddr 192.168.1.254
</code></pre><h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://www.chenshake.com/summary-of-ipmi/" target="_blank" rel="external">IPMI&#x603B;&#x7ED3;</a></li>
<li><a href="http://www.openfusion.net/linux/ipmi_on_centos" target="_blank" rel="external">IPMI on CentOS/RHEL</a></li>
<li><a href="http://blog.csdn.net/goodluckwhh/article/details/9955715" target="_blank" rel="external">open ipmi&#x5185;&#x6838;&#x5B9E;&#x73B0;&#x7B80;&#x4ECB;</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/linux/l-ipmi/index.html" target="_blank" rel="external">&#x4F7F;&#x7528;ipmitool&#x5B9E;&#x73B0;Linux&#x7CFB;&#x7EDF;&#x4E0B;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x7684;ipmi&#x7BA1;&#x7406;</a></li>
<li><a href="http://sourceforge.net/projects/openipmi/" target="_blank" rel="external">openipmi on sourceforge</a></li>
<li><a href="http://blog.csdn.net/huzhenwei/article/details/6300472" target="_blank" rel="external">&#x5728;Linux&#x7CFB;&#x7EDF;&#x4E0A;&#x914D;&#x7F6E;IPMI&#x6765;&#x8FDC;&#x7A0B;&#x63A7;&#x5236;&#x670D;&#x52A1;&#x5668;</a></li>
<li><a href="http://wenku.baidu.com/link?url=Sk-pIPKAOIrUVwg1L00GHmIMPjuFsqj13308opURYRARvyQh-pzOEOUm5_uwk7C-eBqGb91iXhacQ6eTIFG8AQ8YO9ZUjne6J_T0JES5ihy" target="_blank" rel="external">Linux&#x5E73;&#x53F0;&#x4E0B;IPMI&#x9A71;&#x52A8;&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;</a></li>
<li><a href="http://openipmi.sourceforge.net/IPMI.pdf" target="_blank" rel="external">IPMI - Gentle Introduction with OpenIPM</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/07/09/ipmi/" data-id="cinga3yml00bidciz3zdkp317" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tools/">tools</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-gnu-linux-program" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/28/gnu-linux-program/" class="article-date">
  <time datetime="2014-06-27T16:00:00.000Z" itemprop="datePublished">2014-06-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/28/gnu-linux-program/">GNU Linux program</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="part-1-linux-program-tools"><a href="#Part-1-Linux-program-tools" class="headerlink" title="Part 1 Linux program tools"></a>Part 1 Linux program tools</h3><h4 id="gnu-cc"><a href="#GNU-cc" class="headerlink" title="GNU cc"></a>GNU cc</h4><pre><code>gcc myapp.c -L/home/fred/lib -I/home/fred/include -lnew -o myapp

gcc cursesapp.c -lncurse -static -o cursesapp

/*
 * pisqrt.c - Calculate the square of PI 100,000,000
 * times
 */
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;

int main(void)
{
    double pi = M_PI; /* Defined in &lt;math.h&gt; */
    double pisqrt;
    long i;

    for (i=0; i&lt;10000000; ++i) {
        pisqrt = sqrt(pi);
    }

    return 0;
}
</code></pre><h4 id="gnu-make"><a href="#GNU-make" class="headerlink" title="GNU make"></a>GNU make</h4><pre><code>auto variable
$@
$&lt;
$^
$?
$(@D)
$(@F)
</code></pre><h4 id="gnu-autoconf"><a href="#GNU-autoconf" class="headerlink" title="GNU autoconf"></a>GNU autoconf</h4><pre><code>configure.in
AC_INIT(unique_file_in_source_dir)
AC_OUTPUT([file...[,extra_cmds[,init_cmds]]])

AC_INIT
    Test program
    Test function library
    Test header
    Test type defined
    Test structure
    Test compile
    Test library function
    Test system call
AC_OUTPUT

autoscan
ifnames
</code></pre><h4 id="patch"><a href="#patch" class="headerlink" title="patch"></a>patch</h4><pre><code>diff
patch

diff -c sigrot.1 sigrot.2 &gt; sigrot.path
patch -p0 &lt; sigrot.patch
</code></pre><h4 id="gdb"><a href="#GDB" class="headerlink" title="GDB"></a>GDB</h4><h4 id="assert"><a href="#assert" class="headerlink" title="assert"></a>assert</h4><pre><code>#include &lt;assert.h&gt;
void assert (int expression);
</code></pre><h4 id="macro"><a href="#macro" class="headerlink" title="macro"></a>macro</h4><pre><code>__LINE__
__FILE__
__FUNCTION__
</code></pre><h4 id="system-header-and-error"><a href="#system-header-and-error" class="headerlink" title="system header and error"></a>system header and error</h4><pre><code>stdlib.h    void abort(void);
stdlib.h    void exit(int status);
stdlib.h    int atexit(void (*fcn) (void));
stdio.h        void perror(const char *s);
string.h    char *strerror(int errnum);
errno.h        int errno;

void clearerr(FILE *stream);
int feof(FILE *stream);
int ferror(FILE *stream);
</code></pre><h4 id="system-log"><a href="#system-log" class="headerlink" title="system log"></a>system log</h4><pre><code>klogd
syslogd

#include &lt;syslog.h&gt;
void syslog(int priority, char *format, ...);

syslog(LOG_WARNING | LOG_USER, &quot;unable to open file %s *** %m\n&quot;, fname);

for shell:
logger [-s] [-f file] [-p pri] [-t tag] [-u socket] [message ...]
</code></pre><h4 id="dynamic-library"><a href="#dynamic-library" class="headerlink" title="dynamic library"></a>dynamic library</h4><pre><code>nm [options] file
ar {dmpgrtx} [member] archive files ...
ldd [options] file
ldconfig [options] [libs]

gcc -fPIC -g -c liberrr.c -o liberr.o
gcc -g -shared -Wl,-soname,liberr.so -o liberr.so.1.0.0 liberr.o -lc
ln -s liberr.so.1.0.0 liberr.so.1

void *dlopen(const char *filename, int flag);
void *dlsym(void *handle, char *symbol);
const char *dlerror(void);
int dlclose(void *handle);

gcc -g -Wall dltest.c -o dltest -ldl
</code></pre><hr>
<h3 id="part-2-system-program"><a href="#Part-2-System-Program" class="headerlink" title="Part 2 System Program"></a>Part 2 System Program</h3><h4 id="file-io"><a href="#File-I-O" class="headerlink" title="File I/O"></a>File I/O</h4><pre><code>open
create
close
read
write
ftruncate
lseek
fsync
fstat
fchown
fchmod
flock
fcntl
dup
dup2
slect
ioctl

fopen
freopen
fclose

feof
ferror
clearer
fileno

printf
fprintf
sprintf
snprintf

vprintf
vfprintf
vsprintf
vsnprintf

scanf
fscanf
sscanf

vscanf
vsscanf
vfscanf

fseek
ftell
fgetpos
fsetpos
rewind

fflush
setbuf
setbuffer
setlinebuf
setvbuf

remove
rename

tmpfile
tmpnam

mkstemp

getcwd
chdir
fchdir

mkdir
rmdir

opendir
readdir
rewinddir
closedir
</code></pre><h4 id="process-control"><a href="#Process-control" class="headerlink" title="Process control"></a>Process control</h4><pre><code>system
fork
exec
popen
pclose

wait
waitpid

exit
abort
kill

alarm
pause

sigemptyset
sigfillset
sigaddset
sigdelset
sigismember

sigprocmask
sigaction
sgpending

sched_setscheduler
sched_getscheduler
sched_get_priority_max
sched_get_priority_min
getpriority
setpriority
nice
</code></pre><h4 id="thread"><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h4><pre><code>_clone

pthread_create
pthread_exit
pthread_join
pthread_detach
pthread_atfork
pthread_cancel
pthread_setcancelstate
pthread_setcanceltype
pthread_testcancel

pthread_cleanup_push
pthread_cleanup_pop
pthread_cleanup_push_defer_np
pthread_cleanup_pop_restore_np

pthread_cond_signal
pthread_cond_broadcast
pthread_cond_wait
pthread_cond_timewait
pthread_cond_destroy

pthread_equal

pthread_attr_

pthread_mutex_
</code></pre><h4 id="memory-manager"><a href="#memory-manager" class="headerlink" title="memory manager"></a>memory manager</h4><pre><code>malloc
calloc
realloc
free

mmap
mumap
msync
mprotect
mlock
munlock
mlockall
munlockall
</code></pre><hr>
<h4 id="part-3-ipc-and-network-program"><a href="#Part-3-IPC-and-Network-program" class="headerlink" title="Part 3 IPC and Network program"></a>Part 3 IPC and Network program</h4><h4 id="ipc"><a href="#IPC" class="headerlink" title="IPC"></a>IPC</h4><pre><code>pipe
popen
pclose

mkfifo

shmget
shmat
shmdt

msgget
msgsnd
msgrcv
msgctl

semget
semop
semctl

setsid

openlog
closelog
syslog
</code></pre><h4 id="netwrok"><a href="#Netwrok" class="headerlink" title="Netwrok"></a>Netwrok</h4><pre><code>socket
bind
listen
connect
accept
read
write
recv_from
send_to

sendfile
close

netstat 
tcpdump

multicast
</code></pre><hr>
<h3 id="part-4-gui"><a href="#Part-4-GUI" class="headerlink" title="Part 4 GUI"></a>Part 4 GUI</h3><pre><code>terminal

ncurses

x windows

GTK+ GUI

Qt GUI

OpenGL Mesa 3D
</code></pre><hr>
<h3 id="part-5-special-program-technology"><a href="#Part-5-Special-program-technology" class="headerlink" title="Part 5 Special program technology"></a>Part 5 Special program technology</h3><h4 id="gnu-bash"><a href="#GNU-Bash" class="headerlink" title="GNU Bash"></a>GNU Bash</h4><h4 id="device-driver"><a href="#Device-Driver" class="headerlink" title="Device Driver"></a>Device Driver</h4><hr>
<h3 id="part-6"><a href="#Part-6" class="headerlink" title="Part 6"></a>Part 6</h3><h4 id="rpm"><a href="#RPM" class="headerlink" title="RPM"></a>RPM</h4><h4 id="licence"><a href="#Licence" class="headerlink" title="Licence"></a>Licence</h4><ol>
<li>MIT</li>
<li>BSD</li>
<li>GNU</li>
</ol>
<hr>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="">GNU Linux program</a></li>
<li><a href="http://www.advancedlinuxprogramming.com/alp-folder/advanced-linux-programming.pdf" target="_blank" rel="external">Advanced linux program</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/06/28/gnu-linux-program/" data-id="cinga3ymn00bldciz7onxx6nn" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sdn" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/26/sdn/" class="article-date">
  <time datetime="2014-06-25T16:00:00.000Z" itemprop="datePublished">2014-06-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/others/">others</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/26/sdn/">SDN</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="http://upload.wikimedia.org/wikipedia/commons/0/0b/Sdn-3layers.gif" alt="SDN-3Layers"></p>
<p><strong>SDN 3Layers</strong></p>
<hr>
<p><img src="http://upload.wikimedia.org/wikipedia/commons/d/d0/SDN-architecture-overview.png" alt="SDN-architecture-overview"></p>
<p><strong>SDN Architecture Overview</strong></p>
<hr>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://en.wikipedia.org/wiki/Software-defined_networking" target="_blank" rel="external">Software Defined Networking</a></li>
<li><a href="http://www.ithome.com.tw/node/77353" target="_blank" rel="external">&#x65B0;&#x4E00;&#x4EE3;&#x7DB2;&#x8DEF;&#x67B6;&#x69CB;SDN&#x985B;&#x8986;&#x50B3;&#x7D71;&#x7DB2;&#x8DEF;&#x7684;&#x63A7;&#x5236;&#x6A21;&#x5F0F;</a></li>
<li><a href="http://www.ithome.com.tw/node/77354" target="_blank" rel="external">3&#x7A2E;SDN&#x67B6;&#x69CB;&#x7684;&#x7522;&#x54C1;&#x7B56;&#x7565;</a></li>
<li><a href="http://www.h3c.com.cn/Solution/VAN/Home/Project_features/201303/778755_30004_0.htm" target="_blank" rel="external">SDN&#x8F6F;&#x4EF6;&#x5B9A;&#x4E49;&#x7F51;&#x7EDC;</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/06/26/sdn/" data-id="cinga3ymk00bfdcizcwn4rtlq" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/others/">others</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iscsi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/24/iscsi/" class="article-date">
  <time datetime="2014-06-23T16:00:00.000Z" itemprop="datePublished">2014-06-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/storage/">storage</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/24/iscsi/">iSCSI</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="what-is-iscsi"><a href="#What-is-ISCSI" class="headerlink" title="What is ISCSI"></a>What is ISCSI</h3><p>iSCSI&#x662F;&#x7531;IEETF&#x5F00;&#x53D1;&#x7684;&#x7F51;&#x7EDC;&#x5B58;&#x50A8;&#x6807;&#x51C6;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x7528;IP&#x534F;&#x8BAE;&#x5C06;&#x5B58;&#x50A8;&#x8BBE;&#x5907;&#x8FDE;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#x3002;</p>
<h3 id="why-need-iscsi"><a href="#Why-need-iSCSI" class="headerlink" title="Why need iSCSI"></a>Why need iSCSI</h3><ol>
<li>&#x89E3;&#x51B3;&#x4E86;SCSI&#x534F;&#x8BAE;&#x5728;&#x8BBE;&#x5907;&#x6570;&#x76EE;&#x548C;&#x8FDE;&#x63A5;&#x8DDD;&#x79BB;&#x4E0A;&#x7684;&#x9650;&#x5236;;</li>
<li>&#x4E3A;SAN&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x9AD8;&#x6027;&#x4EF7;&#x6BD4;&#x7684;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF1B;</li>
<li>&#x4E0E;&#x5404;&#x79CD;&#x5B58;&#x50A8;&#x7BA1;&#x7406;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#xFF0C;&#x63D0;&#x4F9B;&#x7075;&#x6D3B;&#x7684;&#x5907;&#x4EFD;&#x3001;&#x955C;&#x50CF;&#x3001;&#x707E;&#x96BE;&#x6062;&#x590D;&#x4EE5;&#x53CA;&#x6B21;&#x7EA7;&#x5B58;&#x50A8;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1B;</li>
</ol>
<h3 id="iscsi-&#x7684;&#x5B58;&#x50A8;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;"><a href="#iSCSI-&#x7684;&#x5B58;&#x50A8;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;" class="headerlink" title="iSCSI &#x7684;&#x5B58;&#x50A8;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;"></a>iSCSI &#x7684;&#x5B58;&#x50A8;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;</h3><ol>
<li><p>iSCSI HBA&#x5361;&#x8FDE;&#x63A5;&#x65B9;&#x5F0F;&#xFF08;&#x786C;iSCSI&#xFF09;&#xFF1A;<br>&#x5728;&#x4E3B;&#x673A;&#x4E0A;&#x5B89;&#x88C5;&#x4E13;&#x4E1A;&#x7684;iSCSI HBA&#x9002;&#x914D;&#x5361;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x4E3B;&#x673A;&#x4E0E;&#x4EA4;&#x6362;&#x673A;&#x4E4B;&#x95F4;&#x3001;&#x4E3B;&#x673A;&#x4E0E;&#x5B58;&#x50A8;&#x4E4B;&#x95F4;&#x7684;<br>&#x9AD8;&#x6548;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x3002;&#x4F20;&#x8F93;&#x6027;&#x80FD;&#x597D;&#xFF0C;&#x4EF7;&#x683C;&#x9AD8;&#x3002;</p>
</li>
<li><p>&#x4EE5;&#x592A;&#x7F51;&#x5361;+initiator&#x8F6F;&#x4EF6;&#x65B9;&#x5F0F;&#xFF08;&#x8F6F;iSCSI&#xFF09;&#xFF1A;<br>&#x670D;&#x52A1;&#x5668;&#x3001;&#x5DE5;&#x4F5C;&#x7AD9;&#x7B49;&#x4E3B;&#x673A;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x7684;&#x4EE5;&#x592A;&#x7F51;&#x5361;&#xFF0C;&#x901A;&#x8FC7;&#x4EE5;&#x592A;&#x7F51;&#x7EBF;&#x76F4;&#x63A5;&#x4E0E;&#x4EE5;&#x592A;&#x7F51;&#x4EA4;&#x6362;&#x673A;&#x8FDE;&#x63A5;&#xFF0C;<br>iSCSI&#x5B58;&#x50A8;&#x4E5F;&#x901A;&#x8FC7;&#x4EE5;&#x592A;&#x7F51;&#x7EBF;&#x8FDE;&#x63A5;&#x5230;&#x4EE5;&#x592A;&#x7F51;&#x4EA4;&#x6362;&#x673A;&#x4E0A;&#xFF0C;&#x6216;&#x76F4;&#x63A5;&#x8FDE;&#x63A5;&#x5230;&#x4E3B;&#x673A;&#x7684;&#x4EE5;&#x592A;&#x7F51;&#x5361;&#x4E0A;&#x3002;<br>&#x5728;&#x4E3B;&#x673A;&#x4E0A;&#x5B89;&#x88C5;Initiator&#x8F6F;&#x4EF6;&#xFF0C;Initiator&#x8F6F;&#x4EF6;&#x53EF;&#x4EE5;&#x5C06;&#x4EE5;&#x592A;&#x7F51;&#x5361;&#x865A;&#x62DF;&#x4E3A;iSCSI&#x5361;&#xFF0C;&#x63A5;&#x53D7;&#x548C;&#x53D1;<br>&#x9001;iSCSI&#x6570;&#x636E;&#x62A5;&#x6587;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x4E3B;&#x673A;&#x548C;iSCSI&#x8BBE;&#x5907;&#x4E4B;&#x95F4;&#x7684;iSCSI&#x534F;&#x8BAE;&#x548C;TCP/IP&#x534F;&#x8BAE;&#x4F20;&#x8F93;&#x529F;&#x80FD;&#x3002;</p>
</li>
</ol>
<h3 id="compile-and-install"><a href="#Compile-and-install" class="headerlink" title="Compile and install"></a>Compile and install</h3><p>The iSCSI target consists of a kernel module (iscsi_trgt.ko) , daemon<br>(ietd) and control utility (ietadm).</p>
<ul>
<li>Compile</li>
</ul>
<ol>
<li>build all: <code>make</code></li>
<li>build component: <code>make kernel</code> or <code>make usr</code></li>
</ol>
<ul>
<li>install</li>
</ul>
<ol>
<li>Install all: <code>make [KSRC=&lt;kernel-src&gt;] install</code></li>
<li><p>Install individual components:</p>
<p> make [KSRC=<kernel-src>] install-kernel - for kernel module<br> make [KSRC=<kernel-srv>] install-usr - for daemon and utility<br> make [KSRC=<kernel-srv>] install-init - for init.d script<br> make [KSRC=<kernel-srv>] install-etc - for config files</kernel-srv></kernel-srv></kernel-srv></kernel-src></p>
</li>
</ol>
<p>ietd and ietadm will be install in /usr/sbin<br>iscsi-target was install in /etc/init.d/<br>ietd.conf and initiators.{allow,denny} were install in /etc</p>
<ul>
<li><p>start stop</p>
<p>  /etc/init.d/iscsi-target start<br>  /etc/init.d/iscsi-target stop</p>
</li>
</ul>
<h3 id="iet&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x548C;&#x547D;&#x4EE4;"><a href="#iet&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x548C;&#x547D;&#x4EE4;" class="headerlink" title="iet&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x548C;&#x547D;&#x4EE4;"></a>iet&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x548C;&#x547D;&#x4EE4;</h3><p><strong>iet&#x4E3B;&#x8981;&#x914D;&#x7F6E;</strong></p>
<p>&#x4E3B;&#x8981;&#x5305;&#x62EC;&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<pre><code>/etc/ietd.conf &#xFF1A;iet&#x7684;&#x4E3B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;
/etc/initiators.allow&#xFF1A;&#x63A7;&#x5236;initiator&#x5BF9;target&#x7684;&#x8BBF;&#x95EE;&#x6743;&#x9650;
/etc/initiators.deny&#xFF1A;&#x63A7;&#x5236;initiator&#x5BF9;target&#x7684;&#x8BBF;&#x95EE;&#x6743;&#x9650;
/etc/targets.allow&#xFF1A;&#x63A7;&#x5236;&#x4E0D;&#x540C;target&#x7684;&#x88AB;&#x8BBF;&#x95EE;&#x6743;&#x9650;
</code></pre><p>&#x901A;&#x8FC7;/etc/ietd.conf, iet&#x5B9E;&#x73B0;iSCSI Target&#x7684;&#x57FA;&#x672C;&#x529F;&#x80FD;.</p>
<p>iSCSI Target&#x7684;&#x547D;&#x540D;&#xFF0C;&#x547D;&#x540D;&#x5728;&#x540C;&#x4E00;&#x5B50;&#x7F51;&#x5185;&#x5E94;&#x8BE5;&#x662F;&#x552F;&#x4E00;&#x3002;</p>
<pre><code>Target  target&#x540D;&#x79F0;
&#x5176;&#x4E2D;&#xFF1A;
target &#x540D;&#x79F0;&#xFF1A;&#x662F;iSCSI Target&#x540D;&#x79F0;&#x3002;&#x4E00;&#x822C;iSCSI Target&#x547D;&#x540D;&#x91C7;&#x7528;
    &#x201C;iqn.yyyy-mm.&lt;reversed domain name&gt;: identifier &#x8BC6;&#x522B;&#x4EE3;&#x53F7;&#x201D;&#x7684;&#x683C;&#x5F0F;&#x3002;
</code></pre><p>&#x5C06;&#x5757;&#x8BBE;&#x5907;&#x3001;&#x6587;&#x4EF6;&#x3001;LVM&#x5377;&#x3001;RAID&#x5377;&#x4F5C;&#x4E3A;&#x5757;&#x8BBE;&#x5907;&#x6620;&#x5C04;&#x7ED9;iSCSI initiator&#x4F7F;&#x7528;&#x3002; </p>
<pre><code>Lun  &lt;lunID&gt; Path=&lt;device&gt;,Type=fileio|blockio[,IOMode=(wb|ro)]
&#x5176;&#x4E2D;&#xFF1A;
&lt;lunID&gt;&#xFF1A;&#x662F;Lun&#x7684;&#x7F16;&#x53F7;&#x4ECE;0&#x5F00;&#x59CB;&#xFF0C;&#x6700;&#x5927;2^14-1&#x3002;
Path=&lt;device&gt;&#xFF1A;&#x6307;&#x5B9A;&#x5757;&#x8BBE;&#x5907;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;dd&#x547D;&#x4EE4;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x3002;
Type=fileio|blockio&#xFF1A;&#x6307;&#x5B9A;&#x5757;&#x8BBE;&#x5907;&#x7C7B;&#x578B;&#xFF0C;&#x5206;&#x533A;&#x53CA;dd&#x547D;&#x4EE4;&#x751F;&#x6210;&#x7684;&#x6587;&#x4EF6;&#x4F7F;&#x7528;fileio&#x7C7B;&#x578B;&#xFF1B;
    LVM&#x5377;&#x3001;RAID&#x5377;&#x4F7F;&#x7528;blockio&#x7C7B;&#x578B;&#x3002;
IOMode=(wb|ro)&#xFF1A;&#x6307;&#x5B9A;iSCSI initiator&#x5141;&#x8BB8;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;wb&#x8868;&#x793A;&#x53EF;&#x8BFB;&#x5199;&#xFF1B;ro&#x8868;&#x793A;&#x53EA;&#x8BFB;&#x3002;
</code></pre><p>&#x914D;&#x7F6E;&#x5B8C;&#x540E;&#x91CD;&#x8D77;iscsi-target&#xFF0C;initiator&#x5373;&#x53EF;&#x8FDE;&#x63A5;&#x4F7F;&#x7528;.</p>
<p><strong>iet&#x5176;&#x5B83;&#x914D;&#x7F6E;</strong></p>
<p>&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x7684;iSCSI Target&#x5728;&#x91CD;&#x542F;&#x540E;&#x4F1A;&#x5931;&#x6548;&#x3002;</p>
<pre><code>&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;Target&#x3002;&#x5176;&#x4E2D;[id]&#x4E3A;&#x6570;&#x5B57;&#x5374;&#x5FC5;&#x987B;&#x552F;&#x4E00;&#xFF0C;Name&#x9700;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;&#x4E5F;&#x8981;&#x552F;&#x4E00;&#x3002;
ietadm --op new --tid=[id] --params Name=iqn.zqin.example

&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;lun&#x3002;&#x5176;&#x4E2D;[id]&#x5FC5;&#x987B;&#x662F;&#x4E00;&#x4E2A;&#x5DF2;&#x5B58;&#x5728;&#x7684;tid&#x53F7;&#xFF0C;[lun]&#x4ECE;0&#x5F00;&#x59CB;&#x3002;
ietadm --op new --tid=[id] --lun=[lun] --params Path=/path/exported/file,Type=fileio
</code></pre><p><strong>iet&#x5E38;&#x7528;&#x547D;&#x4EE4;</strong></p>
<pre><code>&#x67E5;&#x770B;&#x5F53;&#x524D;iSCSI Target&#x6E05;&#x5355;&#x3002; 
cat /proc/net/iet/volume

&#x67E5;&#x770B;&#x5F53;&#x524D;&#x670D;&#x52A1;&#x5668;iSCSI Target&#x670D;&#x52A1;&#x4EE5;&#x53CA;&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#x547D;&#x4EE4;
cat /proc/net/iet/sessions

&#x505C;&#x6B62;&#x67D0;&#x4E2A;Target &#x7684;&#x67D0;&#x4E2A; Connection &#x7684;&#x8FDE;&#x63A5;&#x3002;
ietadm --op delete --tid=2 --sid=562950876233792 --cid=1  &amp;&amp; ietadm --op delete --tid=2

&#x505C;&#x6B62;&#x6240;&#x6709;Target &#x7684;&#x8FDE;&#x63A5;&#x3002;
ietadm --op delete

&#x5220;&#x9664;&#x67D0;&#x4E2A;Target &#xFF08;&#x5DF2;&#x7ECF;&#x6CA1;&#x6709; Session &#x8FDE;&#x63A5;&#x7684;&#xFF09;&#x3002;
ietadm --op delete --tid= 1
</code></pre><p><strong>&#x5B8C;&#x6574;&#x64CD;&#x4F5C;&#x5982;&#x4E0B;</strong>:</p>
<pre><code>[root@ ~]# dd if=/dev/zero of=/root/iscsi.disk bs=1M count=1024
1024+0 records in
1024+0 records out
1073741824 bytes (1.1 GB) copied, 9.30143 s, 115 MB/s
[root@ ~]# echo &quot;Target iqn.2014-06.com.matrix:storage.515.disk&quot; &gt;&gt; /etc/ietd.conf
[root@ ~]# echo &quot;Lun 0 Path=/root/iscsi.disk,Type=fileio&quot;&gt;&gt;/etc/ietd.conf
[root@ ~]# echo &quot;Alias lun0&quot;&gt;&gt;/etc/ietd.conf
[root@ ~]# cat /etc/ietd.conf 
Target iqn.2014-06.com.matrix:storage.515.disk
Lun 0 Path=/root/iscsi.disk,Type=fileio
Alias lun0
[root@ ~]# echo &quot;iqn.2014-06.com.matrix:storage.515.disk 172.16.*.*&quot;&gt;&gt; /etc/initiators.allow
[root@ ~]# cat /etc/initiators.allow 
iqn.2014-06.com.matrix:storage.515.disk 172.16.*.*
[root@ ~]# netstat -tulpn | grep 3260 
tcp     0      0 172.16.110.10:3260   0.0.0.0:*  LISTEN  12147/ietd 
[root@ ~]# cat /proc/net/iet/session 
tid:1 name:iqn.2014-06.com.matrix:storage.515.disk
[root@ ~]# cat /proc/net/iet/volume 
tid:1 name:iqn.2014-06.com.matrix:storage.515.disk
    lun:0 state:0 iotype:fileio iomode:wt blocks:2097152 blocksize:512 path:/root/iscsi.disk

[root@ ~]# /etc/init.d/iscsi-target restart
Stopping iSCSI Target:                                     [  OK  ]
Starting iSCSI Target: FATAL: Error inserting crc32c_intel (/lib/modules/2.6
.32-279.el6.x86_64/kernel/arch/x86/crypto/crc32c-intel.ko): No such device
                                                           [  OK  ]
</code></pre><p>&#x4E0A;&#x9762;&#x7684;&#x9519;&#x8BEF;&#x662F;&#x56E0;&#x4E3A;centos 6.3, kernel 2.6.32-279.el6.x86_64, &#x8BE5;&#x7248;&#x672C;&#x5DF2;&#x4E0D;&#x9700;&#x8981;<br>crc32c_intel.ko&#x6A21;&#x5757;&#xFF0C;&#x53EF;&#x4EE5;&#x8FC7;&#x5C4F;&#x853D;&#x811A;&#x672C;<code>/etc/init.d/iscsi-target</code>&#x4E2D;&#x7684;<br><code>modprobe -q crc32</code>&#x6765;&#x89E3;&#x51B3;&#x8BE5;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3002;</p>
<pre><code>[root@ ~]# /etc/init.d/iscsi-target restart
Stopping iSCSI Target:                                     [  OK  ]
Starting iSCSI Target:                                     [  OK  ]
[root@ ~]# service iscsi-target status
iSCSI Target (pid 12147) is running...
</code></pre><h3 id="iscsi-initiator"><a href="#iSCSI-initiator" class="headerlink" title="iSCSI initiator"></a>iSCSI initiator</h3><p>&#x5B89;&#x88C5; <code>yum install iscsi-initiator-utils</code></p>
<p>iscsiadm&#x662F;&#x57FA;&#x4E8E;&#x547D;&#x4EE4;&#x884C;&#x7684;iscsi&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x63D0;&#x4F9B;&#x5BF9;iscsi&#x8282;&#x70B9;&#x3001;&#x4F1A;&#x8BDD;&#x3001;&#x8FDE;&#x63A5;&#x4EE5;&#x53CA;&#x53D1;&#x73B0;&#x8BB0;&#x5F55;&#x7684;&#x64CD;&#x4F5C;&#x3002;<br>&#x6D89;&#x53CA;&#x7684;&#x4E3B;&#x8981;&#x64CD;&#x4F5C;&#x5982;&#x4E0B;:</p>
<ol>
<li>&#x53D1;&#x73B0;iscsi&#x5B58;&#x50A8;: iscsiadm -m discovery -t st -p ISCSI_IP</li>
<li>&#x67E5;&#x770B;iscsi&#x53D1;&#x73B0;&#x8BB0;&#x5F55; iscsiadm -m node</li>
<li>&#x5220;&#x9664;iscsi&#x53D1;&#x73B0;&#x8BB0;&#x5F55; iscsiadm -m node -o delete -T LUN_NAME -p ISCSI_IP</li>
<li>&#x767B;&#x5F55;iscsi&#x5B58;&#x50A8; iscsiadm -m node -T LUN_NAME -p ISCSI_IP -l</li>
<li>&#x767B;&#x51FA;iscsi&#x5B58;&#x50A8; iscsiadm -m node -T LUN_NAME -p ISCSI_IP -u</li>
<li>&#x767B;&#x5F55;&#x5168;&#x90E8;iscsi&#x5B58;&#x50A8; iscsiadm -m node -L all</li>
<li>&#x767B;&#x51FA;&#x5168;&#x90E8;iscsi&#x5B58;&#x50A8; iscsiadm -m node -U all</li>
<li>&#x67E5;&#x770B;session iscsiadm -m session</li>
<li><p>&#x8BBE;&#x7F6E;CHAP, vim /etc/iscsi/iscsid.conf, &#x6216;&#x8FD9;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x8BBE;&#x7F6E;: </p>
<p>   [root@localhost ~]# iscsiadm -m node -T iqn.2007-10.lio.com:dg3.liolv1 -p 172.16.130.100 -o update &#x2013;name node.session.auth.authmethod &#x2013;value=CHAP<br>   [root@localhost ~]# iscsiadm -m node -T iqn.2007-10.lio.com:dg3.liolv1 -p 172.16.130.100 -o update &#x2013;name node.session.auth.username &#x2013;value=alan<br>   [root@localhost ~]# iscsiadm -m node -T iqn.2007-10.lio.com:dg3.liolv1 -p 172.16.130.100 -o update &#x2013;name node.session.auth.password &#x2013;value=123555<br>   [root@localhost ~]# iscsiadm -m node -T iqn.2007-10.lio.com:dg3.liolv1 -p 172.16.130.100 &#x2013;login<br>&#x6CE8;&#x610F;:<br>&#x8981;&#x5148;&#x4F7F;&#x7528;&#x53D1;&#x73B0;discovery&#xFF0C;&#x7136;&#x540E;&#x624D;&#x80FD;&#x767B;&#x9646;login&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x201C;iscsiadm: No records found&#x201D;</p>
</li>
</ol>
<p>&#x4E0B;&#x9762;&#x662F;&#x8BE6;&#x7EC6;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;(<strong>&#x6CE8;&#x610F;:&#x62EC;&#x53F7;&#x5185;&#x5BB9;&#x4E3A;&#x6CE8;&#x91CA;&#x8BF4;&#x660E;</strong>)</p>
<pre><code>[root@localhost dennis]# fdisk -l

Disk /dev/sda: 149 GiB, 160000000000 bytes, 312500000 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x00007f87

Device    Boot     Start       End    Blocks  Id System
/dev/sda1 *         2048   1026047    512000  83 Linux
/dev/sda2        1026048 312498175 155736064  8e Linux LVM

(...&#x6B64;&#x5904;&#x7701;&#x7565;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5185;&#x5BB9;...)
[root@localhost dennis]# iscsiadm -m discovery -t st -p 172.16.110.10
172.16.110.10:3260,1 iqn.2014-06.com.matrix:storage.515.disk
[root@localhost dennis]# iscsiadm -m node -T iqn.2014-06.com.matrix:storage.515.disk -p 172.16.110.10 -l
Logging in to [iface: default, target: iqn.2014-06.com.matrix:storage.515.disk, portal: 172.16.110.10,3260] (multiple)
Login to [iface: default, target: iqn.2014-06.com.matrix:storage.515.disk, portal: 172.16.110.10,3260] successful.
[root@localhost dennis]# fdisk -l

Disk /dev/sda: 149 GiB, 160000000000 bytes, 312500000 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x00007f87

Device    Boot     Start       End    Blocks  Id System
/dev/sda1 *         2048   1026047    512000  83 Linux
/dev/sda2        1026048 312498175 155736064  8e Linux LVM

(...&#x6B64;&#x5904;&#x7701;&#x7565;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5185;&#x5BB9;...)
(&#x6210;&#x529F;&#x8FDE;&#x63A5;&#x540E;,&#x591A;&#x51FA;&#x4E00;&#x5757;&#x78C1;&#x76D8;/dev/sdb&#xFF0C;&#x5927;&#x5C0F;&#x521A;&#x597D;&#x662F;&#x524D;&#x9762;dd&#x521B;&#x5EFA;&#x7684;1G&#x6587;&#x4EF6;)
Disk /dev/sdb: 1 GiB, 1073741824 bytes, 2097152 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes

[root@localhost dennis]# iscsiadm -m node -T iqn.2014-06.com.matrix:storage.515.disk -p 172.16.110.10 -u
Logging out of session [sid: 1, target: iqn.2014-06.com.matrix:storage.515.disk, portal: 172.16.110.10,3260]
Logout of [sid: 1, target: iqn.2014-06.com.matrix:storage.515.disk, portal: 172.16.110.10,3260] successful.
[root@localhost dennis]# 
</code></pre><p>&#x8FDE;&#x63A5;&#x6210;&#x529F;&#x540E;&#xFF0C;iet&#x7AEF;&#x663E;&#x793A;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>[root@ ~]# cat /proc/net/iet/session
tid:1 name:iqn.2014-06.com.matrix:storage.515.disk
    sid:562949990973952 initiator:iqn.1994-05.com.redhat:7d366003913
        cid:0 ip:172.16.50.39 state:active hd:none dd:none    tip:172.16.110.10
</code></pre><p>&#x7B2C;&#x4E00;&#x6B21;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x78C1;&#x76D8;&#x662F;&#x8FD8;&#x6CA1;&#x6709;&#x5206;&#x533A;&#x5316;, &#x78C1;&#x76D8;&#x5206;&#x533A;&#xFF1A;</p>
<pre><code>[root@localhost dennis]# fdisk /dev/sdb

Welcome to fdisk (util-linux 2.24.2).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Device does not contain a recognized partition table.

Created a new DOS disklabel with disk identifier 0xf1eb4d09.

Command (m for help): m

Help:

  DOS (MBR)
   a   toggle a bootable flag
   b   edit nested BSD disklabel
   c   toggle the dos compatibility flag

  Generic
   d   delete a partition
   l   list known partition types
   n   add a new partition
   p   print the partition table
   t   change a partition type
   v   verify the partition table

  Misc
   m   print this menu
   u   change display/entry units
   x   extra functionality (experts only)

  Save &amp; Exit
   w   write table to disk and exit
   q   quit without saving changes

  Create a new label
   g   create a new empty GPT partition table
   G   create a new empty SGI (IRIX) partition table
   o   create a new empty DOS partition table
   s   create a new empty Sun partition table


Command (m for help): g
Created a new GPT disklabel (GUID: 22C002F1-D9F7-4E4C-8F89-9EFEBB971A1D).

Command (m for help): n
Partition number (1-128, default 1): 1
First sector (2048-2097118, default 2048): 
Last sector, +sectors or +size{K,M,G,T,P} (2048-2097118, default 2097118): 

Created a new partition 1 of type &apos;Linux filesystem&apos; and of size 1023 MiB.

Command (m for help): p
Disk /dev/sdb: 1 GiB, 1073741824 bytes, 2097152 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: gpt
Disk identifier: 22C002F1-D9F7-4E4C-8F89-9EFEBB971A1D

Device    Start          End   Size Type
/dev/sdb1  2048      2097118  1023M Linux filesystem

Command (m for help): w

The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.

[root@localhost dennis]# fdisk -l

Disk /dev/sda: 149 GiB, 160000000000 bytes, 312500000 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x00007f87

Device    Boot     Start       End    Blocks  Id System
/dev/sda1 *         2048   1026047    512000  83 Linux
/dev/sda2        1026048 312498175 155736064  8e Linux LVM

(...&#x6B64;&#x5904;&#x7701;&#x7565;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5185;&#x5BB9;...)

Disk /dev/sdb: 1 GiB, 1073741824 bytes, 2097152 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: gpt
Disk identifier: 22C002F1-D9F7-4E4C-8F89-9EFEBB971A1D

Device    Start          End   Size Type
/dev/sdb1  2048      2097118  1023M Linux filesystem
</code></pre><p>&#x5206;&#x533A;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x5BF9;&#x78C1;&#x76D8;&#x8BE5;&#x5206;&#x533A;&#x8FDB;&#x884C;&#x683C;&#x5F0F;&#x5316;&#xFF1A;</p>
<pre><code>[root@localhost dennis]# mkfs.ext3 /dev/sdb1
mke2fs 1.42.8 (20-Jun-2013)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
65536 inodes, 261883 blocks
13094 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=268435456
8 block groups
32768 blocks per group, 32768 fragments per group
8192 inodes per group
Superblock backups stored on blocks: 
    32768, 98304, 163840, 229376

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done
</code></pre><p>&#x683C;&#x5F0F;&#x5316;&#x5B8C;&#x6BD5;&#x540E;,&#x8FDB;&#x884C;&#x6302;&#x8F7D;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x50CF;&#x5BF9;&#x5F85;&#x672C;&#x5730;&#x76EE;&#x5F55;&#x4E00;&#x6837;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x64CD;&#x4F5C;&#x4E86;(&#x62F7;&#x8D1D;&#x3001;&#x5220;&#x9664;&#x7B49;)<br><strong>&#x6CE8;&#xFF1A;&#x4E0B;&#x4E00;&#x6B21;&#x767B;&#x9646;iscsi&#x5377;&#x540E;&#xFF0C;&#x4E0D;&#x7528;&#x8FDB;&#x884C;&#x5206;&#x533A;&#x3001;&#x683C;&#x5F0F;&#x5316;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x6302;&#x8F7D;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E86;</strong></p>
<pre><code>[root@localhost dennis]# mkdir /mnt/iscsi
[root@localhost dennis]# mount /dev/sdb1 /mnt/iscsi
[root@localhost dennis]# ls /mnt/iscsi/
lost+found
[root@localhost dennis]# cp Downloads/VirtualBox-4.3-4.3.12_93733_fedora18-1.x86_64.rpm /mnt/iscsi/
[root@localhost dennis]# ls -lh /mnt/iscsi/
total 74M
drwx------. 2 root root 16K Jun 27 12:10 lost+found
-rw-r--r--. 1 root root 74M Jun 27 12:13 VirtualBox-4.3-4.3.12_93733_fedora18-1.x86_64.rpm
[root@localhost dennis]# 
</code></pre><h3 id="initiator-for-windows"><a href="#Initiator-for-windows" class="headerlink" title="Initiator for windows"></a>Initiator for windows</h3><p>login with batch script </p>
<pre><code>@echo off
for /l %%j in (1,1,2) do (
    for /l %%k in (0,1,49) do (
        iscsicli logintarget iqn.2007-10.cbxa.com:r5%%j.aa%%k T 192.168.166.100 3260 * * * * * * * * * * * * * 0       
    )
)
pause
</code></pre><p>&#x4F7F;&#x7528;&#x7528;&#x6237;&#x540D;(aa0~aa49)&#x548C;&#x5BC6;&#x7801;(123456789012)&#x767B;&#x9646;:</p>
<pre><code>iscsicli logintarget iqn.2007-10.cbxa.com:r5%%j.aa%%k T 192.168.166.100 3260 * * * * * * * * * aa%%k 123456789012  1 * 0
</code></pre><h3 id="protocol"><a href="#Protocol" class="headerlink" title="Protocol"></a>Protocol</h3><p><img src="/assets/image/posts/iscsi/iscsi_010.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_011.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_026.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_027.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_028.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_029.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_030.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_031.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_032.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_033.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_034.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_035.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_036.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_037.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_038.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_039.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_040.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_041.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_042.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_043.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_044.png" alt=""><br><img src="/assets/image/posts/iscsi/iscsi_045.png" alt=""></p>
<h3 id="iscsi-initiator&#x4E0E;iscsi-target"><a href="#iSCSI-initiator&#x4E0E;iSCSI-target&#xFF1A;" class="headerlink" title="iSCSI initiator&#x4E0E;iSCSI target&#xFF1A;"></a>iSCSI initiator&#x4E0E;iSCSI target&#xFF1A;</h3><ol>
<li><a href="http://unh-iscsi.sourceforge.net/" target="_blank" rel="external">UNH iSCSI</a></li>
<li><a href="http://iscsitarget.sourceforge.net/" target="_blank" rel="external">iSCSI Enterprise Target</a></li>
<li><a href="http://sourceforge.net/projects/intel-iscsi/" target="_blank" rel="external">intel iSCSI</a></li>
<li><a href="http://www.microsoft.com/windowsserver2003/technologies/storage/iscsi/default.mspx" target="_blank" rel="external">Microsoft iSCSI Initiator 2.0X</a></li>
<li><a href="http://linux-iscsi.sourceforge.net/" target="_blank" rel="external">linux-iscsi(project</a></li>
<li><a href="http://www.open-iscsi.org/" target="_blank" rel="external">Open iSCSI</a></li>
<li>Microsoft Storage 2003</li>
<li><a href="http://www.starwindsoftware.com/" target="_blank" rel="external">StarWind</a></li>
</ol>
<h3 id="faq"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><ol>
<li><p>&#x9632;&#x706B;&#x5899;&#x94FE;&#x63A5;&#x9650;&#x5236;&#xFF0C;&#x5916;&#x754C;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;Target&#x670D;&#x52A1;&#x5668;3260&#x7AEF;&#x53E3;&#x3002;<br> &#x8BF7;&#x5728;&#x9632;&#x706B;&#x5899;&#x4E0A;&#x624B;&#x52A8;&#x653E;&#x5F00;3260&#x7AEF;&#x53E3;&#xFF0C;&#x6216;&#x8005;&#x6709;&#x6761;&#x4EF6;&#x7684;&#x8BDD;&#x5E72;&#x8106;&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;&#x3002;<br> &#x66F4;&#x6539;&#x9632;&#x706B;&#x5899;&#x914D;&#x7F6E;&#x5E76;&#x91CD;&#x542F;&#x751F;&#x6548;<br> vi /etc/sysconfig/iptables<br> server iptable restart  </p>
<p> service iptables stop<br> setenforce 0  </p>
</li>
<li><p>&#x5171;&#x4EAB;&#x7684;&#x8DEF;&#x5F84;&#x90FD;&#x53EF;&#x4EE5;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;<br> &#x5728;IET&#x7684;&#x6280;&#x672F;&#x6587;&#x6863;&#x4E2D;&#x89C4;&#x5B9A;&#xFF0C;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#x8DEF;&#x5F84;&#x662F;&#x88AB;&#x652F;&#x6301;&#x7684;&#xFF1A;  </p>
<pre><code>1)&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684; block &#x78C1;&#x76D8;&#xFF0C;&#x6BD4;&#x5982;/dev/sdb &#x3002;  
2)&#x4E00;&#x4E2A;RAID&#x8BBE;&#x5907;&#x6216;&#x8005;&#x662F;&#x4E00;&#x4E2A;LVM.  
3)&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x7684;&#x955C;&#x50CF;&#x6587;&#x4EF6;, &#x5982;dd&#x4F7F;&#x7528;&#x521B;&#x5EFA;.  
</code></pre></li>
<li><p>&#x201C;iscsiadm:No portals found&#x201D;.   </p>
<ul>
<li>&#x53EF;&#x80FD;&#x670D;&#x52A1;&#x6CA1;&#x6709;&#x542F;&#x52A8;&#xFF1A;&#x91CD;&#x542F;iscsid&#x670D;&#x52A1;, <code>service iscsi start</code> </li>
<li>&#x53EF;&#x80FD;&#x5B58;&#x50A8;&#x7AEF;&#x6CA1;&#x6709;&#x5141;&#x8BB8;&#x5F53;&#x524D;ip&#x8BBF;&#x95EE;&#xFF1A;</li>
</ul>
</li>
</ol>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://www.cnblogs.com/yunnotes/archive/2013/04/19/3032488.html" target="_blank" rel="external">iSCSI&#x5B66;&#x4E60;&#x603B;&#x7ED3;</a></li>
<li><a href="http://tech.watchstor.com/storage-network-130569.htm" target="_blank" rel="external">&#x2605;&#x2605;&#x2605;&#x5982;&#x4F55;&#x6B63;&#x786E;&#x4F7F;&#x7528;iSCSI Enterprise Target</a></li>
<li><a href="http://www.doc88.com/p-51666752050.html" target="_blank" rel="external">iSCSI&#x534F;&#x8BAE;&#x89E3;&#x6790;&#x2605;&#x2605;&#x2605;</a></li>
<li><a href="http://www.h3c.com.cn/Solution/Multimedia_Communicate/Video_Surveillance_Storage/How_Do_I_Do_It/White_Paper/201008/686814_30004_0.htm" target="_blank" rel="external">iSCSI&#x6280;&#x672F;&#x767D;&#x76AE;&#x4E66;&#x2605;&#x2605;&#x2605;</a></li>
<li><a href="http://www.sansky.net/article/2007-12-03-iscsi-storage.html" target="_blank" rel="external">iSCSI&#x5B58;&#x50A8;&#x6280;&#x672F;&#x5168;&#x653B;&#x7565;</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5c0153620100g7e2.html" target="_blank" rel="external">Linux&#x4E0B;iSCSI&#x5B89;&#x88C5;&#x6B65;&#x9AA4;</a></li>
<li><a href="http://kissthink.com/archive/4379.html" target="_blank" rel="external">ET - iSCSI Enterprise Target</a></li>
<li><a href="http://lynnkong.iteye.com/blog/1806470" target="_blank" rel="external">&#x5B58;&#x50A8;&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x5B66;&#x4E60;&#x7B14;&#x8BB0;</a></li>
<li><a href="http://storage.cnw.com.cn/storage-virtualization/htm2012/20121210_260295.shtml" target="_blank" rel="external">&#x89E3;&#x6790;iSCSI&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x7684;&#x672A;&#x6765;&#x53D1;&#x5C55;</a></li>
<li><a href="http://sunshyfangtian.blog.51cto.com/1405751/560162/" target="_blank" rel="external">CentOS5 iSCSI&#x90E8;&#x7F72;</a></li>
<li><a href="http://www.storage-conference.org/2003/papers/19-Meth-Design.pdf" target="_blank" rel="external">Design of the ISCSI Protocol</a></li>
<li><a href="http://pmghong.blog.163.com/blog/static/2146602802012111505853540/" target="_blank" rel="external">iSCSI &#x4E8C; &#x2013; &#x642D;&#x5EFA;&#x57FA;&#x4E8E;iSCSI&#x7684;IP SAN&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;</a></li>
<li><a href="http://blog.csdn.net/do2jiang/article/details/5144706" target="_blank" rel="external">ISCSI Target&#x7684;&#x5E38;&#x7528;&#x914D;&#x7F6E;&#x548C;&#x5E38;&#x7528;&#x64CD;&#x4F5C;-&#x5907;&#x5FD8;</a></li>
<li><a href="http://blog.csdn.net/vah101/article/details/6300197" target="_blank" rel="external">Linux&#x4E0B;&#x5E94;&#x7528;tgtadm&#x6784;&#x5EFA;iSCSI Target&#x2013;SAN</a></li>
<li><a href="http://www.2cto.com/os/201202/119963.html" target="_blank" rel="external">&#x8BE6;&#x89E3;Linux&#x4E0B;&#x6302;&#x8F7D;&#x548C;&#x683C;&#x5F0F;&#x5316;&#x865A;&#x62DF;&#x78C1;&#x76D8;</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/06/24/iscsi/" data-id="cinga3ymi00b9dcizyucln0y1" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iscsi/">iscsi</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-learn-morse-code" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/24/how-to-learn-morse-code/" class="article-date">
  <time datetime="2014-06-23T16:00:00.000Z" itemprop="datePublished">2014-06-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/others/">others</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/24/how-to-learn-morse-code/">How to Learn Morse Code</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/assets/image/posts/Morse-code-tree.svg" alt="Morse code tree"></p>
<p><strong>From</strong> <a href="http://www.wikihow.com/Learn-Morse-Code" target="_blank" rel="external">http://www.wikihow.com/Learn-Morse-Code</a></p>
<p>The Morse Code was developed by Samuel F.B. Morse in 1844. Even after more than<br>160 years, it is still used today, especially by amateur radio operators. The<br>code can be sent quickly over the telegraph, and is also useful for emergency<br>signaling (SOS) with a radio, mirror, or flashlight, and even for people with<br>severe disabilities to communicate. In order to master Morse code, however, you<br>need to approach it like a new language.</p>
<h3 id="step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h3><p>Listen carefully to slow morse code recordings. What you&#x2019;re listening for is a<br>combination of dots and dashes (also referred to as dits and dahs). A dit is a<br>short beep, while a dah is a longer beep (three times longer). Every letter is<br>separated by a short pause, and every word is separated by a longer pause (three<br>times longer).</p>
<ul>
<li>You can search or shop for practice recordings, or use a shortwave receiver to<br>listen to the real thing. Free and inexpensive Morse training software is<br>available and usually better than the recordings, it can be set to change the<br>text randomly so it never gets &#x201C;stale&#x201D; and you can choose whatever learning<br>method works best for you. Never count dots and dashes, learn the sound of the<br>letter. If you are using Farnsworth, you set the spacing between letters slower<br>than the letter speed. Choose a letter speed a bit above your target code speed<br>and never lower the letter speed, only the letter spacing. This is the way to<br>learn Morse as a language, 15-25 words per minute or more. The following methods<br>are best used when you have no intention of using Morse above 5 words per minute,<br>they will require you to un learn the bad habits and start over.</li>
</ul>
<h3 id="step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h3><p>Refer to a copy of the Morse Code alphabet (as seen at the bottom of the page).<br>You can use a basic chart such as the one shown at right (click to enlarge), or<br>you can use a more advanced chart which includes punctuation, abbreviated phrases,<br>prosigns and Q Codes.<a href="http://morsecode.scphillips.com/morse2.html" target="_blank" rel="external">1</a> Match up what you heard to the letters in the alphabet.<br>What does it say? Were you correct?</p>
<p>Some people find it easier to learn by writing down the letter with dots/periods<br>and dashes, and comparing it to a chart such as the one shown; others say this<br>creates an additional step that will only slow you down in learning Morse code.<br>Do whatever feels more comfortable for you. If you choose to avoid interpreting<br>written dots and dashes, you can use a pronunciation chart which lists the sounds<br>of the Morse Code signals, as if you were hearing them, rather than the dash and<br>dot symbols.<a href="http://morsecode.scphillips.com/morse.html" target="_blank" rel="external">2</a></p>
<h3 id="step-3"><a href="#Step-3" class="headerlink" title="Step 3"></a>Step 3</h3><p>Sound it out. Practice translating basic words and sentences into Morse code. In<br>the beginning, you can write it down, then sound it out, but eventually you&#x2019;ll<br>need to go straight to sounding it out. For example, the word &#x201C;cat&#x201D;. Write it down:</p>
<pre><code>-.-.   .-   -
</code></pre><p>then transmit the word (you can use the buttons on a mobile phone, or beep<br>vocally &#x2013; the latter will probably help your mind pick up the code faster). To<br>pronounce morse code, dit is pronounced di with a short i sound and a silent t.<br>Dah is pronounced with a short a sound. So cat is pronounced dah-di-dah-di di-dah<br>dah. Once you feel comfortable with that, pick up a children&#x2019;s book and try to<br>transmit the content in Morse code without writing anything down. Record yourself<br>and play it back later to see if you were correct.</p>
<ul>
<li>Be conscious of your spacing. Each letter needs to be separated by a space<br>that&#x2019;s the same duration as a dah (three times the duration of a dit). Each word<br>needs to be separated by a space that lasts about seven times the duration of a<br>dit. The better your spacing, the easier your code will be to understand.</li>
</ul>
<h3 id="step-4"><a href="#Step-4" class="headerlink" title="Step 4"></a>Step 4</h3><p>Memorize the easiest letters first.<a href="http://www.learnmorsecode.com/" target="_blank" rel="external">3</a> A single dah is a &#x201C;T&#x201D; and a single dit is<br>an &#x201C;E&#x201D;. Next, a dah-dah is an &#x201C;M&#x201D; and a dit-dit is an &#x201C;I&#x201D;. Memorize the letters<br>for 3 and 4 dits and dahs in a row. Once you&#x2019;ve got those down, start memorizing<br>the combinations: dit-dah, dit-dah-dah, dit-dah-dah-dah, and so on. Leave the more<br>complex combinations for last. Fortunately, this includes some less commonly used<br>letters (like Q, Y, X, and V) so when you get to this point, focus on the more<br>commonly used letters first. Notice how E and T have the shortest symbols, and<br>how K, Z, Q, and X have long symbols. </p>
<h3 id="step-5"><a href="#Step-5" class="headerlink" title="Step 5"></a>Step 5</h3><p>Make associations. For every letter, think of a memorable &#x201C;sound alike&#x201D;. Here&#x2019;s<br>an example: The letter &#x201C;C&#x201D; is dah-dit-dah-dit (long short long short). Can you<br>think of a word that starts with that letter, and sounds like the Morse<br>pronunciation? How about catastrophic, which has an emphasis on the first and<br>third syllable, and begins with a &#x201C;c&#x201D;? Or how about dah-dit, which is Morse code<br>for &#x201C;N&#x201D;? How about nanny? This will be harder for words that end in several &#x201C;dahs&#x201D;<br>in a row, since many words in the English language alternate emphasis between<br>syllables, and usually do not end with an emphasis, but you could use sentences,<br>too. There are also existing Morse code mnemonics that have been around for many<br>years; you might be able to find them online, or purchase them.<a href="http://www.cq2k.com" target="_blank" rel="external">4</a></p>
<ul>
<li>If you&#x2019;re a music lover, you can try associating Morse code pronunciations with<br>tunes or melodies that are familiar with you. For example, the distinctive<br>beginning of Beethoven&#x2019;s Symphony No. 5 is short-short-short-long, or dit-dit-dit-dah,<br>which is the letter &#x201C;V&#x201D;, the roman numeral for &#x201C;5&#x201D; (as in Beethoven&#x2019;s 5th Symphony),<br>and is rather appropriate for such a &#x201C;victorious&#x201D; tune, don&#x2019;t you think? During<br>WW2, BBC broadcasters used this four-note melody to start off its radio broadcasts<br>because of its association with the word &#x201C;victory&#x201D;! <a href="http://en.wikipedia.org/wiki/Symphony_No._5_(Beethoven)" target="_blank" rel="external">5</a></li>
</ul>
<h3 id="step-6"><a href="#Step-6" class="headerlink" title="Step 6"></a>Step 6</h3><p>Have fun with it. Want to get your friends into it? Learn how to blink code. That<br>way, you can give an SOS blink when your friend just introduced you to a rather<br>unpleasant blind date, for instance. Use written Morse code to write secret notes,<br>or keep a diary in Morse, or tell dirty jokes without anyone knowing. Give someone<br>a Morse code greeting card. Say &#x201C;I love you&#x201D; in Morse code (how romantic!).<br>Whatever floats your boat, find a way to do it in Morse code, and you&#x2019;ll learn<br>it much faster. </p>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://morsecode.scphillips.com/morse2.html" target="_blank" rel="external">1</a></li>
<li><a href="http://morsecode.scphillips.com/morse.html" target="_blank" rel="external">2</a></li>
<li><a href="http://www.learnmorsecode.com/" target="_blank" rel="external">3</a></li>
<li><a href="http://www.cq2k.com" target="_blank" rel="external">4</a></li>
<li><a href="http://en.wikipedia.org/wiki/Symphony_No._5_(Beethoven)" target="_blank" rel="external">5</a></li>
</ul>
<h3 id="other"><a href="#Other" class="headerlink" title="Other"></a>Other</h3><ul>
<li><a href="http://www.onlineconversion.com/morse_code.htm" target="_blank" rel="external">online translate</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/06/24/how-to-learn-morse-code/" data-id="cinga3ymj00bcdciz36fylyyl" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/others/">others</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iscsi-enterprise-target" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/06/23/iscsi-enterprise-target/" class="article-date">
  <time datetime="2014-06-22T16:00:00.000Z" itemprop="datePublished">2014-06-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/storage/">storage</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/06/23/iscsi-enterprise-target/">iSCSI Enterprise Target</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="iscsi-enterprise-target"><a href="#iSCSI-Enterprise-Target" class="headerlink" title="iSCSI Enterprise Target"></a>iSCSI Enterprise Target</h2><h3 id="introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h3><pre><code>SCSI     : small computer system interface
iSCSI    : Internet SCSI
Initiator:
Target   :
</code></pre><h3 id="component-of-protocol"><a href="#component-of-protocol" class="headerlink" title="component of protocol"></a>component of protocol</h3><ol>
<li><p>Communication</p>
<ul>
<li>connect </li>
<li>session<ul>
<li>login</li>
<li>full feature</li>
</ul>
</li>
<li>pdu</li>
</ul>
</li>
<li><p>Naming and addressing</p>
<ul>
<li>iqn.iSCSI </li>
<li>eui.IEEEEUI264</li>
</ul>
</li>
<li><p>Error Handle</p>
<ul>
<li>misclassification</li>
<li>Recovery mechanism</li>
</ul>
</li>
<li><p>Security</p>
<ul>
<li>Authentication<ul>
<li>CHAP</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="code-flow"><a href="#Code-flow" class="headerlink" title="Code flow"></a>Code flow</h3><ol>
<li>Login phase</li>
<li>Data execute of text phase</li>
<li>logout pahse<ul>
<li>Report LUNS(0xa0)-&gt; </li>
<li>Inquiry(0x12) -&gt; </li>
<li>Read Capacity(10) (0x25) -&gt; </li>
<li>Read(10)(0x28) -&gt; </li>
<li>Mode Sense(6)(0x1a)</li>
</ul>
</li>
</ol>
<h3 id="source-code"><a href="#Source-code" class="headerlink" title="Source code"></a>Source code</h3><ul>
<li><p>source:</p>
</li>
<li><p>build:</p>
</li>
<li><p>patch</p>
<pre><code>tar xvf iscsitarget-1.4.20.tar.gz
cd iscsitarget-1.4.20
patch -p1 &lt; ../iscsitarget-1.4.20_patch/compat-2.6.32.patch
patch -p1 &lt; ../iscsitarget-1.4.20_patch/iscsitarget-xxx-1.4.20_for_centos_6_2.patch
patch -p1 &lt; ../iscsitarget-1.4.20_patch/iscsi_conn_close_raid_failed.patch
patch -p1 &lt; ../iscsitarget-1.4.20_patch/iscsi_load_balance_bug_fix.patch
patch -p1 &lt; ../iscsitarget-1.4.20_patch/iscsi_flow_control.patch
patch -p1 &lt; ../iscsitarget-1.4.20_patch/iscsi_disable_sync_cache.patch
</code></pre></li>
</ul>
<h3 id="analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h3><h4 id="kernel-module"><a href="#Kernel-module" class="headerlink" title="Kernel module"></a>Kernel module</h4><p>iscsi_trgt.ko</p>
<p>most of the work were done in kernel, such as data send and recv,<br>and the user mode do session create, author and login.</p>
<p>sub-module list as below:</p>
<ul>
<li>Files<ul>
<li>iotype.c</li>
<li>nthread.c<ul>
<li>listen iSCSI request from iSCSI Initiator</li>
<li>receive iSCSI request</li>
<li>initialize iSCSI Command structure and LUN parameters</li>
<li>allocate data cache (struct tio)</li>
<li>handle r2t data</li>
</ul>
</li>
<li>wthread.c<ul>
<li>communicate with nthread</li>
<li>handle iSCSI command from nthread</li>
<li>command can be divided into two types: related , not related </li>
<li>execute callback function</li>
</ul>
</li>
<li>response<ul>
<li>dispatch by wthread</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="user-module"><a href="#User-module" class="headerlink" title="User module"></a>User module</h4><p>ietd daemon, manager tool for IET, function description:</p>
<ul>
<li>configuration, such as port, uid, gid and so on.</li>
<li>read config info from /etc/ietd.conf, and send to kernel module </li>
</ul>
<h4 id="iscsi-mod"><a href="#iSCSI-mod" class="headerlink" title="iSCSI mod"></a>iSCSI mod</h4><ul>
<li>blockio<br>translate network data to struct tio, then handle by<br>blockio_make_request from block_io.c, submit_bio to<br>common layer after generate bio </li>
<li>fileio<br>still use VFS, and do system call read/write to operate data.</li>
<li>functional description  </li>
</ul>
<h3 id="how-iet-add-lun"><a href="#How-IET-add-lun" class="headerlink" title="How IET add lun?"></a>How IET add lun?</h3><p>&#x52A0;&#x5165;volume&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;:</p>
<ol>
<li>&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6587;&#x4EF6;ietd.conf</li>
<li>&#x901A;&#x8FC7;ietdadm&#x547D;&#x4EE4;&#xFF0C;&#x4F7F;&#x7528;<code>--op new --tid=[id] --lun=[lun] --params Path=[path]</code>&#x53C2;&#x6570;</li>
</ol>
<p>&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x6D41;&#x7A0B;&#x5982;&#x4E0B;: (&#x7528;&#x6237;&#x6001;)<br><code>plain_init() -&gt; __plain_lunit_create -&gt; ki-&gt;lunit_create -&gt; iscsi_lunit_create -&gt; ioctl(ctrl_fd, ADD_VOLUME, &amp;info)</code></p>
<p>&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x6D41;&#x7A0B;&#x5982;&#x4E0B;: (&#x7528;&#x6237;&#x6001;)<br><code>ietadm_request_exec -&gt; cops-&gt;lunit_add() -&gt; plain_lunit_create() -&gt; __plain_lunit_create</code>  &#x540E;&#x9762;&#x540C;&#x4E0A;</p>
<p>&#x6838;&#x6001;&#x90E8;&#x5206;&#x76F8;&#x540C;:  </p>
<ul>
<li><code>config.c:add_volume -&gt; volume.c:volume_add -&gt; volume.c:parse_volume_params</code> </li>
<li><code>volume.c:parse_volume_params</code> &#x51FD;&#x6570;&#x68C0;&#x67E5;&#x53D1;&#x73B0;&#x662F;opt_iomode&#x7C7B;&#x578B;&#xFF0C;  </li>
</ul>
<h3 id="type-iomode-and-sector-setting"><a href="#Type-IOMode-and-Sector-Setting" class="headerlink" title="Type, IOMode and Sector Setting"></a>Type, IOMode and Sector Setting</h3><p>Run by the ietadm command as below:  </p>
<ul>
<li><code>ietadm --op new --tid=%d --lun=%d --params Path=/dev/%s/%s,IOMode=%s,Sector=%s,Type=%s</code><ul>
<li><strong>IOMode</strong>: wb or wt or ro</li>
<li><strong>Sector</strong>: 512 or 4096</li>
<li><strong>Type</strong>: fileio or blockio</li>
</ul>
</li>
</ul>
<p>Function calling:</p>
<ul>
<li><code>ietadm.c: main() -&gt; lunit_handle() -&gt; ietd_request() -&gt; ietd_connect(),ietd_request_send(),ietd_response_recv()</code><ul>
<li><code>ietd_connect() -&gt; socket(AF_LOCAL, SOCK_STREAM, 0), connect()</code></li>
<li><code>ietd_request_send() -&gt; write(fd, req, sizeof(*req))</code></li>
<li><code>ietd_request_recv() -&gt; readv(), read()</code></li>
</ul>
</li>
<li><code>ietd.c: main() -&gt; message.c: ietadm_request_listen() -&gt;</code><ul>
<li><code>ietadm_request_listen() -&gt; socket(AF_LOCAL, SOCK_STREAM, 0), bind(), listen()</code></li>
</ul>
</li>
</ul>
<p>Code analysis:  </p>
<ul>
<li><code>ietadm --op new --tid= --lun= --params</code><ul>
<li>&#x8C03;&#x7528; ietadm.c:lunit_handle&#x51FD;&#x6570; -&gt;ietd_request&#x51FD;&#x6570; -&gt;ietd_request_send&#x51FD;&#x6570;</li>
<li>ietd.c&#x7684;event_loop&#x51FD;&#x6570;&#x76D1;&#x542C;&#x5230;&#x6709;&#x6D88;&#x606F;&#xFF0C;&#x6267;&#x884C;message.c:ietadm_request_handle&#x51FD;&#x6570; </li>
<li>message.c:ietadm_request_handle&#x51FD;&#x6570; -&gt; ietadm_request_exec&#x51FD;&#x6570;<br>&#x7C7B;&#x578B;&#x4E3A;C_LUNIT_NEW, &#x6267;&#x884C;cops-&gt;lunit_add  </li>
<li><code>plain.c:plain_lunit_create -&gt;__plain_lunit_create -&gt; ki-&gt;lunit_create</code> </li>
<li><code>ctldev.c:iscsi_lunit_create -&gt; ioctl(ctrl_fd, ADD_VOLUME, &amp;info)</code> </li>
<li><code>config.c:add_volume -&gt; volume.c:volume_add -&gt; volume.c:parse_volume_params</code> </li>
<li><code>volume.c:parse_volume_params</code> &#x51FD;&#x6570;&#x68C0;&#x67E5;&#x53D1;&#x73B0;&#x662F;opt_iomode&#x7C7B;&#x578B;&#xFF0C;<br>&#x5982;&#x679C;&#x662F;ro&#x7C7B;&#x578B;&#x6267;&#x884C;SetLUReadonly(volume);<br>&#x5982;&#x679C;&#x662F;wb&#x7C7B;&#x578B;&#x6267;&#x884C;SetLUWCache(volume);<br>&#x5982;&#x679C;&#x662F;wt&#x7C7B;&#x578B;&#x5219;&#x7C7B;&#x578B;&#x4E0D;&#x53EF;&#x7528;  </li>
<li>SetLUReadonly&#x548C;SetLUWCache&#x90FD;&#x5728;iscsi.h&#x4E2D;&#x5B9A;&#x4E49;&#xFF0C;&#x90FD;&#x53EA;&#x662F;&#x4FEE;&#x6539;struct iet_volume&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x7684;flags&#x7684;&#x503C;&#x3002;</li>
<li>&#x53E6;&#x5916;&#x5757;&#x5927;&#x5C0F;blocksize&#x4FDD;&#x5B58;&#x5728;&#x7ED3;&#x6784;&#x4F53;struct iet_volume&#x7684;blk_shift&#x4E2D;,&#x4E14;&#x5757;&#x5927;&#x5C0F;&#x5FC5;&#x987B;&#x662F;<br>2&#x7684;&#x5E42;&#x6B21;&#x65B9;&#xFF0C;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;512&#xFF0C;&#x5C0F;&#x4E8E;4096. &#x6CE8;&#x610F;&#x4FDD;&#x5B58;&#x7684;&#x662F;2&#x7684;&#x5E42;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x5373;&#x5982;&#x679C;&#x662F;1024&#xFF0C;&#x5219;blk_shift&#x662F;10</li>
<li>&#x5982;&#x679C;fileio,&#x8FDB;&#x5165;file-io.c:fileio_attach&#x51FD;&#x6570;, &#x8C03;&#x7528;parse_fileio_params, &#x8FD9;&#x91CC;&#x4F1A;&#x5FFD;&#x7565;&#x597D;&#x4E9B;&#x53C2;&#x6570;&#x7684;&#x503C;.<br>&#x4E4B;&#x7528;path&#x53C2;&#x6570;&#x4F1A;&#x6709;&#x5904;&#x7406;&#x3002;  </li>
<li>&#x5982;&#x679C;blockio,&#x8FDB;&#x5165;block-io.c:blockio_attach&#x51FD;&#x6570;, &#x8C03;&#x7528;parse_blockio_params, &#x8FD9;&#x91CC;&#x4F1A;&#x5FFD;&#x7565;&#x597D;&#x4E9B;&#x53C2;&#x6570;&#x7684;&#x503C;.<br>&#x4E4B;&#x7528;path&#x53C2;&#x6570;&#x4F1A;&#x6709;&#x5904;&#x7406;&#x3002;  </li>
<li>file-io.c &#x548C; block-io.c&#x8981;&#x597D;&#x597D;&#x770B;&#x770B;&#xFF0C;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x5377;&#x5230;&#x5E95;&#x600E;&#x4E48;&#x521B;&#x5EFA;&#x7684;.</li>
</ul>
</li>
</ul>
<p>Summary:</p>
<ul>
<li><strong>&#x603B;&#x7ED3;:</strong><ul>
<li>Type: <strong>&#x5982;&#x679C;&#x662F;fileio&#x90A3;&#x4E48;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x901A;&#x8FC7;vfs&#x8BF7;&#x6C42;&#x5B8C;&#x6210;&#xFF0C;&#x5982;&#x679C;&#x662F;blockio&#x5219;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x76F4;&#x63A5;&#x6784;&#x9020;bio&#x8BF7;&#x6C42;</strong></li>
<li>IOMode: <strong>&#x5982;&#x679C;&#x662F;wb,    </strong></li>
<li>Sector</li>
</ul>
</li>
</ul>
<h3 id="other-iscsi-implement"><a href="#Other-iSCSI-implement" class="headerlink" title="Other iSCSI implement"></a>Other iSCSI implement</h3><ul>
<li>open-iscsi, <a href="http://open-iscsi.org" target="_blank" rel="external">homepage</a>,<br><a href="https://github.com/mikechristie/open-iscsi" target="_blank" rel="external">source</a>,<br><a href="http://blog.chinaunix.net/uid-14518381-id-3237994.html" target="_blank" rel="external">code analysis</a></li>
</ul>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://en.wikipedia.org/wiki/ISCSI" target="_blank" rel="external">ISCSI Wikipedia</a></li>
<li><a href="http://iscsitarget.sourceforge.net" target="_blank" rel="external">iSCSITarget</a></li>
<li><a href="http://sourceforge.net/projects/iscsitarget/files/iscsitarget/" target="_blank" rel="external">iSCSITarget download</a></li>
<li><a href="http://blog.csdn.net/kidd_3/article/details/7670415" target="_blank" rel="external">iSCSI Enterprise Target&#x7684;&#x67B6;&#x6784;&#x5206;&#x6790;</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/06/23/iscsi-enterprise-target/" data-id="cinga3ymf00b3dcizpkmz9u9e" class="article-share-link">Delen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iscsi/">iscsi</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/6/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/8/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorieën</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/english/">english</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/">kernel</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/language/">language</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/math/">math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/person/">person</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/program/">program</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/source/">source</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/storage/">storage</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/FAQ/" style="font-size: 10px;">FAQ</a> <a href="/tags/IRC/" style="font-size: 10px;">IRC</a> <a href="/tags/Translation/" style="font-size: 13px;">Translation</a> <a href="/tags/android/" style="font-size: 10px;">android</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/assembly/" style="font-size: 10px;">assembly</a> <a href="/tags/awk/" style="font-size: 11px;">awk</a> <a href="/tags/batch/" style="font-size: 14px;">batch</a> <a href="/tags/blog/" style="font-size: 10px;">blog</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/c/" style="font-size: 15px;">c</a> <a href="/tags/c/" style="font-size: 19px;">c++</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/crash/" style="font-size: 10px;">crash</a> <a href="/tags/database/" style="font-size: 17px;">database</a> <a href="/tags/debug/" style="font-size: 12px;">debug</a> <a href="/tags/dot/" style="font-size: 10px;">dot</a> <a href="/tags/driver/" style="font-size: 10px;">driver</a> <a href="/tags/emacs/" style="font-size: 11px;">emacs</a> <a href="/tags/exploit/" style="font-size: 10px;">exploit</a> <a href="/tags/file-system/" style="font-size: 10px;">file system</a> <a href="/tags/filesystem/" style="font-size: 12px;">filesystem</a> <a href="/tags/flowchart/" style="font-size: 10px;">flowchart</a> <a href="/tags/gcc/" style="font-size: 10px;">gcc</a> <a href="/tags/git/" style="font-size: 12px;">git</a> <a href="/tags/google/" style="font-size: 11px;">google</a> <a href="/tags/graphviz/" style="font-size: 11px;">graphviz</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/hosts/" style="font-size: 10px;">hosts</a> <a href="/tags/iscsi/" style="font-size: 14px;">iscsi</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/job/" style="font-size: 10px;">job</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/kernel/" style="font-size: 14px;">kernel</a> <a href="/tags/linux/" style="font-size: 14px;">linux</a> <a href="/tags/lisp/" style="font-size: 10px;">lisp</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/makefile/" style="font-size: 10px;">makefile</a> <a href="/tags/malloc/" style="font-size: 10px;">malloc</a> <a href="/tags/math/" style="font-size: 11px;">math</a> <a href="/tags/maxima/" style="font-size: 10px;">maxima</a> <a href="/tags/memory/" style="font-size: 11px;">memory</a> <a href="/tags/memory-overflow/" style="font-size: 10px;">memory overflow</a> <a href="/tags/mtrace/" style="font-size: 10px;">mtrace</a> <a href="/tags/netdisk/" style="font-size: 10px;">netdisk</a> <a href="/tags/network/" style="font-size: 20px;">network</a> <a href="/tags/others/" style="font-size: 18px;">others</a> <a href="/tags/pandoc/" style="font-size: 10px;">pandoc</a> <a href="/tags/performance/" style="font-size: 16px;">performance</a> <a href="/tags/person/" style="font-size: 11px;">person</a> <a href="/tags/protobuf/" style="font-size: 11px;">protobuf</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/sed/" style="font-size: 11px;">sed</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/skype/" style="font-size: 11px;">skype</a> <a href="/tags/sms/" style="font-size: 10px;">sms</a> <a href="/tags/source/" style="font-size: 11px;">source</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/stack/" style="font-size: 10px;">stack</a> <a href="/tags/storage/" style="font-size: 15px;">storage</a> <a href="/tags/study/" style="font-size: 10px;">study</a> <a href="/tags/svn/" style="font-size: 11px;">svn</a> <a href="/tags/sync/" style="font-size: 10px;">sync</a> <a href="/tags/test/" style="font-size: 11px;">test</a> <a href="/tags/time/" style="font-size: 10px;">time</a> <a href="/tags/tools/" style="font-size: 15px;">tools</a> <a href="/tags/valgrind/" style="font-size: 10px;">valgrind</a> <a href="/tags/vi/" style="font-size: 10px;">vi</a> <a href="/tags/vim/" style="font-size: 14px;">vim</a> <a href="/tags/virtual/" style="font-size: 11px;">virtual</a> <a href="/tags/wget/" style="font-size: 10px;">wget</a> <a href="/tags/windows/" style="font-size: 11px;">windows</a> <a href="/tags/wireshark/" style="font-size: 10px;">wireshark</a> <a href="/tags/write/" style="font-size: 13px;">write</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">September 2012</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/24/understand-gcc-assembly-output/">understand gcc assembly output</a>
          </li>
        
          <li>
            <a href="/2016/04/24/speed-up-cplusplus-compilation/">speed up c++ compilation</a>
          </li>
        
          <li>
            <a href="/2016/04/18/hexo/">Hexo</a>
          </li>
        
          <li>
            <a href="/2016/04/13/malloc/">malloc</a>
          </li>
        
          <li>
            <a href="/2016/03/12/performance-optimization-of-cplusplus/">performance optimization of C++</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Matrix207<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>