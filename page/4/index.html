<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2015-07-12-schema-data-mode" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2015-07-12-schema-data-mode/" class="article-date">
  <time datetime="2016-04-17T10:13:48.619Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2015-07-12-schema-data-mode/">schema data mode</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###Data model</p>
<p>###Why need it</p>
<p>###Schema Node</p>
<ul>
<li>Define<ul>
<li>R : root node (record node)</li>
<li>S : single node (child node, subschema)</li>
<li>A : array node (child node, subschema)</li>
</ul>
</li>
<li>Example<ul>
<li>R, only root node</li>
<li>R -&gt; S1, only a singal node under root</li>
<li>R -&gt; A1, only an array node under root</li>
<li>R -&gt; A1 -&gt; A2</li>
<li>R -&gt; A1 -&gt; S1</li>
<li>R -&gt; S1 -&gt; A1</li>
<li>R -&gt; S1 -&gt; S2</li>
<li>R -&gt; S1 -&gt; A1 -&gt; S2</li>
<li>R -&gt; A1 -&gt; S1 -&gt; A2</li>
</ul>
</li>
<li>How to find the last node info by index of node?<ul>
<li>step 0, set root node as parent node</li>
<li>step 1, use parent node to find array index</li>
<li>step 2, found array node, set this node to new parent node, go to step 1</li>
<li>step 3, use the parent node to find the last node</li>
<li>step 4, do some operations for the node<ul>
<li>set value to fields and insert. (Using for add a new object)</li>
</ul>
</li>
<li>Notices<ul>
<li>only root node</li>
</ul>
</li>
</ul>
</li>
<li>How to create a key</li>
<li>How to write object</li>
<li>How to read object</li>
<li>How to update object</li>
<li>What is difference between full and delta object</li>
<li>Since there are read and write interfaces, why not insert and delete</li>
</ul>
<p>###Reference</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2015-07-12-schema-data-mode/" data-id="cin4f0h570074l8izhcz310pv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-07-12-key-technology-for-database" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2015-07-12-key-technology-for-database/" class="article-date">
  <time datetime="2016-04-17T10:13:48.618Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2015-07-12-key-technology-for-database/">key technology for database</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###Introduce</p>
<p>###Hash</p>
<p>###BTree</p>
<p>###B+Tree</p>
<p>###Reference</p>
<ul>
<li>Add wikipedia of Hash key</li>
<li>Add wikipedia of BTree key</li>
<li>Add wikipedia of B+Tree key</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2015-07-12-key-technology-for-database/" data-id="cin4f0h560073l8izuqyd3ela" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-07-06-what-learn-from-distributed-database" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2015-07-06-what-learn-from-distributed-database/" class="article-date">
  <time datetime="2016-04-17T10:13:48.617Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2015-07-06-what-learn-from-distributed-database/">What learn from distributed database</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###What are the distributed database<br>A distributed database include features:  </p>
<ul>
<li>Data model</li>
<li>SQL Engine</li>
<li>RPC</li>
<li>Backup and restore</li>
<li>Transaction</li>
<li>Common <ul>
<li>log</li>
<li>error</li>
</ul>
</li>
</ul>
<p>###Reference</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2015-07-06-what-learn-from-distributed-database/" data-id="cin4f0h550072l8izrdbl3lse" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-07-05-how-source-code-turn-to-be-an-executable-program" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2015-07-05-how-source-code-turn-to-be-an-executable-program/" class="article-date">
  <time datetime="2016-04-17T10:13:48.617Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2015-07-05-how-source-code-turn-to-be-an-executable-program/">How source code turn to be an executable program</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="What-is-an-executable-program"><a href="#What-is-an-executable-program" class="headerlink" title="What is an executable program"></a>What is an executable program</h3><ul>
<li>On linux, the format of executable program is ELF (<code>Executable and Linking Format</code>)</li>
<li>members of executable program<ul>
<li>text segment</li>
<li>data segment</li>
<li>bss segment</li>
</ul>
</li>
</ul>
<h3 id="How-source-code-be-compiled"><a href="#How-source-code-be-compiled" class="headerlink" title="How source code be compiled"></a>How source code be compiled</h3><h3 id="Relation-of-source-code-object-file-library-file-bin-file"><a href="#Relation-of-source-code-object-file-library-file-bin-file" class="headerlink" title="Relation of source code, object file, library file, bin file"></a>Relation of source code, object file, library file, bin file</h3><h3 id="How-bin-file-to-load-library"><a href="#How-bin-file-to-load-library" class="headerlink" title="How bin file to load library"></a>How bin file to load library</h3><ul>
<li>dynamic library</li>
<li>static library</li>
</ul>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><ul>
<li><p>Hello world, a.c</p>
<pre><code>#include &lt;stdio.h&gt;
int main()
{
    printf (&quot;Hello world\n&quot;);
}
</code></pre></li>
<li><p>compile</p>
<pre><code>[dennis@localhost ~]$ gcc a.c
[dennis@localhost ~]$ objdump -f a.out 

a.out:     file format elf64-x86-64
architecture: i386:x86-64, flags 0x00000112:
EXEC_P, HAS_SYMS, D_PAGED
start address 0x0000000000400440
[dennis@localhost ~]$ file a.out
a.out: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=7396e4d6e7100d1536548d05ba91a67255bf9592, not stripped
[dennis@localhost ~]$ size a.out
   text       data        bss        dec        hex    filename
   1226        548          4       1778        6f2    a.out
[dennis@localhost ~]$ readelf -h a.out
ELF Header:
  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              2&apos;s complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x400440
  Start of program headers:          64 (bytes into file)
  Start of section headers:          4504 (bytes into file)
  Flags:                             0x0
  Size of this header:               64 (bytes)
  Size of program headers:           56 (bytes)
  Number of program headers:         9
  Size of section headers:           64 (bytes)
  Number of section headers:         30
  Section header string table index: 27
[dennis@localhost ~]$ readelf -S a.out
</code></pre></li>
</ul>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://bbs.pediy.com/showthread.php?t=81284.html" target="_blank" rel="external">linux可执行文件格式</a></li>
<li><a href="http://blog.csdn.net/topasstem8/article/details/38730971" target="_blank" rel="external">Linux下可执行文件格式详解</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2015-07-05-how-source-code-turn-to-be-an-executable-program/" data-id="cin4f0h550071l8izboa017et" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-06-06-ramcloud" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2015-06-06-ramcloud/" class="article-date">
  <time datetime="2016-04-17T10:13:48.616Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2015-06-06-ramcloud/">ramcloud</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="what-is-ramcloud"><a href="#what-is-ramcloud" class="headerlink" title="what is ramcloud"></a>what is ramcloud</h4><ul>
<li>ramcloud<ul>
<li><a href="https://ramcloud.atlassian.net/wiki/display/RAM/RAMCloud;jsessionid=D118195965ABC5BF8B90B34EC242B5CE" target="_blank" rel="external">ramcloud</a></li>
<li><a href="http://blog.csdn.net/anzhsoft/article/details/21830991" target="_blank" rel="external">RAMCloud：内存云存储的内存分配机制</a></li>
</ul>
</li>
</ul>
<h4 id="compile-source-code"><a href="#compile-source-code" class="headerlink" title="compile source code"></a>compile source code</h4><ul>
<li><p>install dependency library</p>
<ul>
<li>yum install boost-devel protobuf-devel pcre-devel gtest-devel zookeeper-devel</li>
</ul>
</li>
<li><p>install dependency library</p>
<ul>
<li><p>2015-11-08 </p>
<ul>
<li>update: pull the latest code and do <code>yum install openssl-devel</code></li>
<li><p>6f18e4dfb36ae370f21b39e7f4a4b346c224f469</p>
<p>  [dennis@localhost RAMCloud-master]$ pwd<br>  /home/dennis/work/RAMCloud-master<br>  [dennis@localhost RAMCloud-master]$ make</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>####source code</p>
<ul>
<li>Client, CRamCloud.{h,cc}</li>
<li><p>getTableId test from RamCloudTest.cc</p>
<pre><code>TEST_F(RamCloudTest, getTableId) {
    string message(&quot;no exception&quot;);
    try {
        ramcloud-&gt;getTableId(&quot;bogusTable&quot;);
    }
    catch (ClientException&amp; e) {
        message = e.toSymbol();
    }
    EXPECT_EQ(&quot;STATUS_TABLE_DOESNT_EXIST&quot;, message);
    uint64_t id = ramcloud-&gt;getTableId(&quot;table2&quot;);
    EXPECT_EQ(2UL, id);
}

using `ramcloud-&gt;getTableId(&quot;bogusTable&quot;);` to get an id from a not exist table,  
and expect return &quot;STATUS_TABLE_DOESNT_EXIST&quot;

from code `tableId2 = ramcloud-&gt;createTable(&quot;table2&quot;);`, expect id of table2 is 2UL
</code></pre></li>
<li><p>code of table operation: create, drop, getTableId, relax files: TableManager.cc</p>
</li>
<li><p>object serialization and deserialization</p>
<pre><code>+---------------+--------+---------------------------+----------+----------+
| Object Header | # keys | Cumulative Key Lengths .. | Keys ... | Data ... |
+---------------+--------+---------------------------+----------+----------+
               &lt;--------------------- keysAndValue -----------------------&gt;

- `Object Header` include checksum, timestamp, version, tableID
- `keys` is keycount, the number of keys in an object 
- `CumulativeKeyLength` is KeyLength
</code></pre></li>
</ul>
<h4 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h4><ul>
<li><a href="https://ramcloud.atlassian.net/wiki/display/RAM/General+Information+for+Developers" target="_blank" rel="external">General Information for Developers</a></li>
<li><a href="http://fumin.hustbackup.cn/?p=1104&amp;utm_source=tuicool" target="_blank" rel="external">RAMCloud 小结</a></li>
<li><a href="http://blog.csdn.net/anzhsoft/article/details/21830991" target="_blank" rel="external">RAMCloud：内存云存储的内存分配机制</a></li>
<li><a href="http://www.csdn.net/article/2011-08-01/302490" target="_blank" rel="external">大规模存储的未来——内存云</a></li>
<li><a href="http://web.stanford.edu/~ouster/cgi-bin/papers/ramcloud.pdf" target="_blank" rel="external">The Case for RAMClouds: Scalable High-Performance Storage Entirely in DRAM</a></li>
<li><a href="http://web.stanford.edu/~ouster/cgi-bin/papers/RumblePhd.pdf" target="_blank" rel="external">MEMORY AND OBJECT MANAGEMENT IN RAMCLOUD</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2015-06-06-ramcloud/" data-id="cin4f0h540070l8izq3cozpqc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-03-25-nfs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2015-03-25-nfs/" class="article-date">
  <time datetime="2016-04-17T10:13:48.615Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2015-03-25-nfs/">nfs</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###About NFS</p>
<p>NFS is “Network File System”.</p>
<ul>
<li>linux find NFS version, using command <code>nfsstat -m</code> on client machine, 找到字符串”vers=4.0”<ul>
<li><a href="http://network.51cto.com/art/201008/216664.htm" target="_blank" rel="external">对比分析各个NFS版本的特点</a></li>
</ul>
</li>
</ul>
<p>###How to use</p>
<ul>
<li><p>On server:</p>
<ul>
<li>service nfs start|stop</li>
<li>set ACL (Access Control Lists) of files and directories.<ul>
<li>setfacl -m other::— PATH</li>
<li>setfacl -m g:GROUP_NAME:rwx PATH</li>
<li>setfacl -m g:GROUP_NAME:— PATH</li>
</ul>
</li>
</ul>
</li>
<li><p>On clinet: mount nfs share disk</p>
<ul>
<li>showmount -e 172.16.130.143</li>
<li>mkdir /mnt/nfs</li>
<li>mount 172.16.130.143:/share/vdshare001 /mnt/nfs</li>
<li>ls /mnt/nfs</li>
<li>umount /mnt/nfs</li>
</ul>
</li>
<li><p>command operation:  </p>
<p>  [root@Ustor ~]# service nfs start<br>  Starting RPC svcgssd:                                      [  OK  ]<br>  Starting NFS services:                                     [  OK  ]<br>  Starting NFS quotas:                                       [  OK  ]<br>  Starting NFS mountd:                                       [  OK  ]<br>  Stopping RPC idmapd:                                       [  OK  ]<br>  Starting RPC idmapd:                                       [  OK  ]<br>  Starting NFS daemon:                                       [  OK  ]<br>  [root@Ustor ~]# service nfs status<br>  rpc.svcgssd (pid 11647) is running…<br>  rpc.mountd (pid 11657) is running…<br>  nfsd (pid 11722 11721 11720 11719 11718 11717 11716 11715) is running…<br>  rpc.rquotad (pid 11653) is running..<br>  [root@Ustor ~]# ps aux |grep nfs<br>  root   11713  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd4]<br>  root   11714  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd4_callbacks]<br>  root   11715  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd]<br>  root   11716  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd]<br>  root   11717  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd]<br>  root   11718  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd]<br>  root   11719  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd]<br>  root   11720  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd]<br>  root   11721  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd]<br>  root   11722  0.0  0.0      0     0 ?      S    23:34   0:00 [nfsd]<br>  root   11904  0.0  0.0 103240   844 pts/1  S+   23:35   0:00 grep nfs<br>  [root@Ustor ~]# netstat -apn |grep 2049<br>  tcp     0      0 0.0.0.0:2049         0.0.0.0:<em>            LISTEN      -<br>  tcp     0      0 :::2049              :::</em>                 LISTEN      -<br>  udp     0      0 0.0.0.0:2049         0.0.0.0:<em>                        -<br>  udp     0      0 :::2049              :::</em>                             -<br>  [root@Ustor ~]# service nfs stop<br>  Shutting down NFS daemon:                                  [  OK  ]<br>  Shutting down NFS mountd:                                  [  OK  ]<br>  Shutting down NFS quotas:                                  [  OK  ]<br>  Shutting down RPC svcgssd:                                 [  OK  ]</p>
</li>
<li><p>check status from /proc/fs/nfs and /proc/fs/nfsd/</p>
</li>
</ul>
<p>###Optimal</p>
<ul>
<li><p>★★★ <strong><a href="http://blog.csdn.net/yangzhongxuan/article/details/7918884" target="_blank" rel="external">nfs的传输速度优化</a></strong></p>
<ul>
<li>设置块大小 <ul>
<li>time dd if=/dev/zero of=/testfs/testfile bs=8k count=1024 测试nfs写</li>
<li>time dd if=/testfs/testfile of=/dev/null bs=8k 测试nfs读</li>
</ul>
</li>
<li>网络传输包的大小<ul>
<li>ping -s 2048 -f hostname, try different package size</li>
<li>nfsstat －o net</li>
<li>tracepath node1/端口号</li>
<li>ifconfig eth0</li>
<li>ifconfig eth0 mtu 16436, modify MTU value</li>
<li>/proc/sys/net/ipv4/ipfrag_high_thresh和/proc/sys/net/ipv4/ipfrag_low_thresh</li>
</ul>
</li>
<li>nfs挂载的优化<ul>
<li>timeo:如果超时，客户端等待的时间，以十分之一秒计算。</li>
<li>retrans：超时尝试的次数。</li>
<li>bg：后台挂载，很有用</li>
<li>hard：如果server端没有响应，那么客户端一直尝试挂载。</li>
<li>wsize：写块大小</li>
<li>rsize：读块大小</li>
<li>intr：可以中断不成功的挂载</li>
<li>noatime：不更新文件的inode访问时间，可以提高速度。</li>
<li>async：异步读写。</li>
</ul>
</li>
<li>nfsd的个数<ul>
<li>ps -efl |grep nfsd</li>
<li>vi /etc/init.d/nfs, modify RPCNFSDCOUNT </li>
<li>service nfs restart</li>
</ul>
</li>
<li>nfsd的队列长度<ul>
<li>/proc/sys/net/core/rmem_default</li>
<li>/proc/sys/net/core/rmem_max</li>
<li>/proc/sys/net/core/wmem_default</li>
<li>/proc/sys/net/core/wmem_max</li>
<li>vi /etc/sysctl.conf</li>
</ul>
</li>
<li>mount 192.168.1.220:/mnt/nfs /mnt/nfs_t -o nolock, rsize=1024,wsize=1024,timeo=15</li>
</ul>
</li>
<li><p><strong>Linux NFS服务性能优化</strong></p>
<ul>
<li>nfsstat -rc</li>
<li><a href="http://blog.chinaunix.net/uid-24404943-id-3389539.html" target="_blank" rel="external">http://blog.chinaunix.net/uid-24404943-id-3389539.html</a></li>
<li>NFS的队列大小, modify server and client machine: (262144 = 256KB)<br>#echo 262144 &gt; /proc/sys/net/core/rmem_default<br>#echo 262144 &gt; /proc/sys/net/core/rmem_max<br>#echo 262144 &gt; /proc/sys/net/core/wmmen_default<br>#echo 262144 &gt; /proc/sys/net/core/wmmen_max  </li>
<li>[root@localhost iperf-2.0.5]# dd if=/dev/zero of=/tmp/test01.dat bs=1M count=10240<br>10240+0 records in<br>10240+0 records out<br>10737418240 bytes (11 GB) copied, 28.2585 s, 380 MB/s  </li>
<li>ping -s 2048 -f 192.16.110.80</li>
<li><a href="http://www.cnblogs.com/derekchen/archive/2013/01/17/2865207.html" target="_blank" rel="external">http://www.cnblogs.com/derekchen/archive/2013/01/17/2865207.html</a></li>
<li><a href="http://www.lichaozheng.info/2011/10/13/nfs性能优化/" target="_blank" rel="external">http://www.lichaozheng.info/2011/10/13/nfs性能优化/</a></li>
<li><a href="http://blog.csdn.net/anghlq/article/details/8532312" target="_blank" rel="external">http://blog.csdn.net/anghlq/article/details/8532312</a></li>
<li>tracepath 192.16.110.80</li>
<li>[root@localhost iperf-2.0.5]# echo “4096” &gt;/sys/class/net/enp10s0f0/mtu</li>
<li>[root@localhost iperf-2.0.5]# dd if=/dev/zero of=/tmp/test04.dat bs=1M count=10240<br>10737418240 bytes (11 GB) copied, 28.0778 s, 382 MB/s  </li>
</ul>
</li>
</ul>
<ul>
<li><p>NFS共享在使用前需要挂载（mount）。挂载时使用的参数很大程度上影响了读写的性能</p>
<ul>
<li><ol>
<li>TCP or UDP</li>
</ol>
</li>
<li><ol>
<li>rsize和wsize，每次读写的最大值</li>
</ol>
</li>
<li><ol>
<li>sync和async. sync参数会强制wsize变成4KB，这会大大降低写性能。 </li>
</ol>
</li>
</ul>
</li>
<li><p><strong>关于SAMBA和NFS是否支持断点续传</strong></p>
<ul>
<li>经过测试，得出如下结论：<ul>
<li>1.samba 不支持</li>
<li>2.nfs     支持</li>
</ul>
</li>
<li>测试环境和步骤如下：</li>
<li>服务端：<ul>
<li>1.172.16.130.200， Centos7.0</li>
</ul>
</li>
<li>Windows 客户端:<ul>
<li>1.yujl本地机器</li>
<li>2.开始-&gt;运行-&gt;\172.16.130.200</li>
<li>3.拷贝一个大的iso文件到xuni文件夹</li>
<li>4.去机房拔掉172.16.130.200机器的网线</li>
<li>5.发现本地的拷贝窗口停止传送数据</li>
<li>6.接上网线，拷贝窗口仍然没有继续传送的迹象</li>
</ul>
</li>
<li>Linux 客户端:<ul>
<li>1.我本地机器</li>
<li>2.挂载172.16.130.200的/share/sambatest目录到本地的/mnt/nfs</li>
<li>3.cp ~/Downloads/iso/CentOS-6.5-x86_64-bin-DVD1.iso /mnt/nfs/</li>
<li>4.去机房拔掉172.16.130.200机器的网线</li>
<li>5.确认本地无法连接172.16.130.200</li>
<li>6.接上网线，使用ls -l /mnt/nfs/发现iso文件的大小还继续增加</li>
<li>7.待cp完成后，md5sume计算两个iso文件，发现md5值一</li>
</ul>
</li>
<li>不支持，<a href="http://bbs.chinaunix.net/thread-4057603-1-1.html" target="_blank" rel="external">http://bbs.chinaunix.net/thread-4057603-1-1.html</a></li>
<li><a href="http://bbs.chinaunix.net/thread-4057603-1-1.html" target="_blank" rel="external">http://bbs.chinaunix.net/thread-4057603-1-1.html</a></li>
</ul>
</li>
</ul>
<p>###Code analysed(kernel version: linux-2.6.32-279.el6)</p>
<ul>
<li><p>NFS 文件系统主要分为三个部分：The Protocol（网络协议），Client Side（NFS 客户端）和 Server Side（NFS 服务器）</p>
<ul>
<li>NFS 客户端提供了接口，保证用户或者应用程序能像访问本地文件系统一样访问NFS 文件系统，</li>
<li>NFS 服务器作为数据源，为 NFS 客户端提供真实的文件系统服务</li>
<li>NFS 网络协议则使得 NFS 客户端和 NFS 服务器能够高效和可靠地进行通信</li>
<li>NFS 网络协议使用的是 RPC（Remote Procedure Call，远程过程调用）/XDR（External Data Representation，外部数据表示）机制</li>
</ul>
</li>
<li><p>code file list: </p>
<p>  [dennis@localhost fs]$ pwd<br>  /home/dennis/work/kernel/linux-2.6.32-279.el6/fs<br>  [dennis@localhost fs]$ ls nfs<br>  cache_lib.c      file.c           nfs2xdr.c            nfsroot.c<br>  cache_lib.h      fscache.c        nfs3acl.c            pagelist.c<br>  callback.c       fscache.h        nfs3proc.c           pnfs.c<br>  callback.h       fscache-index.c  nfs3xdr.c            pnfs_dev.c<br>  callback_proc.c  getroot.c        nfs4filelayout.c     pnfs.h<br>  callback_xdr.c   idmap.c          nfs4filelayoutdev.c  proc.c<br>  client.c         inode.c          nfs4filelayout.h     read.c<br>  delegation.c     internal.h       nfs4_fs.h            super.c<br>  delegation.h     iostat.h         nfs4namespace.c      symlink.c<br>  dir.c            Kconfig          nfs4proc.c           sysctl.c<br>  direct.c         Makefile         nfs4renewd.c         unlink.c<br>  dns_resolve.c    mount_clnt.c     nfs4state.c          write.c<br>  dns_resolve.h    namespace.c      nfs4xdr.c<br>  [dennis@localhost fs]$ ls nfsd<br>  auth.c    Makefile    nfs4callback.c  nfscache.c  nfssvc.c  xdr3.h<br>  auth.h    nfs2acl.c   nfs4idmap.c     nfsctl.c    nfsxdr.c  xdr4.h<br>  cache.h   nfs3acl.c   nfs4proc.c      nfsd.h      state.h   xdr.h<br>  export.c  nfs3proc.c  nfs4recover.c   nfsfh.c     stats.c<br>  Kconfig   nfs3xdr.c   nfs4state.c     nfsfh.h     vfs.c<br>  lockd.c   nfs4acl.c   nfs4xdr.c       nfsproc.c   vfs.h<br>  [dennis@localhost fs]$ ls nfs_common<br>  Makefile  nfsacl.c<br>  [dennis@localhost fs]$ cd ../include/linux/<br>  [dennis@localhost linux]$ ls nfs*<br>  nfs2.h      nfs4.h        nfsd_idmap.h  nfs_fs_sb.h  nfs_iostat.h  nfs_xdr.h<br>  nfs3.h      nfs4_mount.h  nfs_fs.h      nfs.h        nfs_mount.h<br>  nfs4_acl.h  nfsacl.h      nfs_fs_i.h    nfs_idmap.h  nfs_page.h</p>
<p>  nfsd:<br>  const.h  debug.h  export.h  Kbuild  nfsfh.h  stats.h  syscall.h</p>
</li>
<li><p>Client Side 源代码  </p>
<p>Client Side 的头文件在 include/linux/ 下面，C 文件在 fs/nfs 下面。</p>
<p>  dir.c/file.c/inode.c/symlink.c/unlink.c：与文件操作相关的系统调用<br>  read.c/write.c/flushd.c：文件读写<br>  mount_clnt.c/nfs_root.c：将 NFS 文件系统作为 root 目录的相关实现<br>  proc.c/nfs2xdr.c/nfs3proc.c/nfs3xdr.c：网络数据交换 </p>
</li>
</ul>
<p>与文件操作相关的系统调用都在 struct file_operations，struct inode_operations<br>这两个数据结构里面定义。文件的读操作 nfs_file_read 和写操作 nfs_file_write 被单<br>独提出来，因为文件读写性能将直接关系到文件系统的成败</p>
<ul>
<li>Server Side 源代码</li>
</ul>
<p>Server Side 的头文件在 include/linux/nfsd 下面，C 文件在 fs/nfsd 下面。</p>
<pre><code>auth.c/lockd.c/export.c/nfsctl.c/nfscache.c/nfsfh.c/stats.c：导出目录的访问管理
nfssvc.c：NFS 服务 deamon 的实现
vfs.c：将 NFS 文件系统的操作转换成具体文件系统的操作
nfsproc.c/nfsxdr.c/nfs3proc.c/nfs3xdr.c：网络数据交换
</code></pre><p>导出目录的访问管理主要解决网络文件系统实现面临的几个重要问题，包括目录导出服务，<br>外部访问的权限控制，多客户端以及客户端与服务器的文件并发操作等。 </p>
<ul>
<li><p>process number of nfsd:  </p>
</li>
<li><p>rename call stack:  </p>
<p>  client: nfs_rename -&gt;<br>  server: nfsd4_rename -&gt; nfsd_rename </p>
</li>
<li><p><strong>To be continue…</strong></p>
</li>
</ul>
<p>###Reference</p>
<ul>
<li><strong><a href="http://www.ibm.com/developerworks/cn/linux/l-cn-nfs/" target="_blank" rel="external">NFS文件系统源代码剖析</a></strong></li>
<li><a href="http://zohead.com/archives/nfs-rwsize/" target="_blank" rel="external">NFS读写块大小问题分析</a></li>
<li><a href="http://www.lichaozheng.info/2011/10/13/nfs性能优化/" target="_blank" rel="external">NFS性能优化手册</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2015-03-25-nfs/" data-id="cin4f0h53006zl8iz81fi78y6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-03-12-how-to-detect-the-internal-network-topology-of-company" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2015-03-12-how-to-detect-the-internal-network-topology-of-company/" class="article-date">
  <time datetime="2016-04-17T10:13:48.614Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2015-03-12-how-to-detect-the-internal-network-topology-of-company/">how to detect the internal network topology of company</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###What I want<br>How can know how many route/hub/switch are in my LAN network?</p>
<p>###What I know</p>
<ul>
<li>Host LAN IP is : 172.16.50.39</li>
<li>gateway is : 172.16.50.1</li>
<li>WLan IP: 219.134.89.155</li>
</ul>
<p>###Operations</p>
<pre><code>[dennis@localhost ~]$ ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: enp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 00:23:ae:96:d6:9a brd ff:ff:ff:ff:ff:ff
    inet 172.16.50.39/24 brd 172.16.50.255 scope global enp2s0
       valid_lft forever preferred_lft forever
    inet6 fe80::223:aeff:fe96:d69a/64 scope link 
       valid_lft forever preferred_lft forever
[dennis@localhost ~]$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
^C
[dennis@localhost ~]$ route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         172.16.50.1     0.0.0.0         UG    1024   0        0 enp2s0
172.16.50.0     0.0.0.0         255.255.255.0   U     0      0        0 enp2s0
[dennis@localhost ~]$ curl ifconfig.me
219.134.89.155
[dennis@localhost ~]$ ping www.baidu.com
PING www.a.shifen.com (180.97.33.108) 56(84) bytes of data.
64 bytes from 180.97.33.108: icmp_seq=1 ttl=51 time=36.6 ms
64 bytes from 180.97.33.108: icmp_seq=2 ttl=51 time=42.0 ms
...
^C
--- www.a.shifen.com ping statistics ---
120 packets transmitted, 120 received, 0% packet loss, time 138219ms
rtt min/avg/max/mdev = 28.061/41.513/82.900/10.308 ms
[dennis@localhost ~]$ traceroute www.baidu.com
traceroute to www.baidu.com (180.97.33.107), 30 hops max, 60 byte packets
 1  172.16.50.1 (172.16.50.1)  3.386 ms  3.431 ms  3.463 ms
 2  219.134.89.153 (219.134.89.153)  6.355 ms  7.169 ms  7.155 ms
 3  10.1.100.37 (10.1.100.37)  5.989 ms  6.274 ms  6.318 ms
 4  121.15.130.18 (121.15.130.18)  7.180 ms  7.167 ms  7.153 ms
 5  61.104.38.59.broad.fs.gd.dynamic.163data.com.cn (59.38.104.61)  6.227 ms  6.219 ms 57.104.38.59.broad.fs.gd.dynamic.163data.com.cn (59.38.104.57)  6.924 ms
 6  183.56.65.30 (183.56.65.30)  31.614 ms 183.56.66.2 (183.56.66.2)  13.175 ms 183.56.65.38 (183.56.65.38)  12.152 ms
 7  202.97.64.73 (202.97.64.73)  37.557 ms  37.543 ms  38.302 ms
 8  202.102.69.114 (202.102.69.114)  42.036 ms  43.259 ms  43.246 ms
 9  * * *
10  180.97.32.2 (180.97.32.2)  37.346 ms 180.97.32.6 (180.97.32.6)  38.140 ms 180.97.32.22 (180.97.32.22)  36.722 ms
11  * * *
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * *
[dennis@localhost ~]$ traceroute 219.134.89.155
traceroute to 219.134.89.155 (219.134.89.155), 30 hops max, 60 byte packets
 1  172.16.50.1 (172.16.50.1)  3.835 ms  3.856 ms  3.885 ms
 2  * * *
 3  * * *
 4  * * *
 5  * * *
 6  * * *
 7  * * *
 8  * * *
 9  * * *
10  * * *
11  * * *
12  * * *
13  * * *
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * *
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2015-03-12-how-to-detect-the-internal-network-topology-of-company/" data-id="cin4f0h52006yl8izuxwqv6yh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-03-11-understand-linux-route" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2015-03-11-understand-linux-route/" class="article-date">
  <time datetime="2016-04-17T10:13:48.613Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2015-03-11-understand-linux-route/">understand linux route</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="路由规则理解"><a href="#路由规则理解" class="headerlink" title="路由规则理解"></a>路由规则理解</h3><p>主机的网络封包需要会根据路由规则来判断如何将封包发送出去</p>
<p>路由是雙向的，你必須要瞭解出去的路由與回來時的規則</p>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><ul>
<li><code>route</code><br><code>route -n</code><br><code>route add default gw 172.16.130.1 eth2</code><br><code>route del default gw 172.16.130.1 eth2</code><br><code>route add -host 192.168.168.110 dev eth0</code><br><code>route del -host 192.168.168.110 dev eth0</code><br><code>route add -net 172.16.130.0/24 gw 172.16.130.1 eth2</code><br><code>route del -net 172.16.0.0 netmask 255.255.0.0 dev eth0</code><br><code>ip route flush cache</code>  </li>
<li><code>sysctl -a |grep forward</code></li>
<li><code>sysctl -a |grep ignore</code></li>
<li><code>echo 2 &gt; /proc/sys/net/ipv4/conf/default/rp_filter</code></li>
<li><code>echo 2 &gt; /proc/sys/net/ipv4/conf/all/rp_filter</code></li>
<li><code>sysctl -p</code></li>
<li><code>vim /etc/sysctl.conf</code></li>
<li><code>traceroute www.baidu.com</code></li>
</ul>
<h3 id="相关配置文件"><a href="#相关配置文件" class="headerlink" title="相关配置文件"></a>相关配置文件</h3><pre><code>[root@localhost ~]# cat /etc/iproute2/rt_tables
#
# reserved values
#
255    local
254    main
253    default
0    unspec
#
# local
#
#1    inr.ruhep
[root@localhost ~]# sysctl -a |grep ignore
net.ipv4.conf.all.arp_ignore = 0
net.ipv4.conf.default.arp_ignore = 0
net.ipv4.conf.lo.arp_ignore = 0
net.ipv4.conf.eth0.arp_ignore = 0
net.ipv4.conf.eth1.arp_ignore = 0
net.ipv4.icmp_echo_ignore_all = 0
net.ipv4.icmp_echo_ignore_broadcasts = 1
net.ipv4.icmp_ignore_bogus_error_responses = 1
[root@localhost ~]# cat /etc/sysctl.conf 
</code></pre><h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>如果是双网卡且设定的是同一网段IP:   </p>
<ul>
<li>eth0 : 192.168.0.100</li>
<li>eth1 : 192.168.0.200</li>
</ul>
<p>那么一般会生成这样的路由规则:  </p>
<pre><code>[root@www ~]# route -n
Kernel IP routing table
Destination     Gateway   Genmask         Flags Metric Ref   Use Iface
192.168.0.0     0.0.0.0   255.255.255.0   U     0      0       0 eth1
192.168.0.0     0.0.0.0   255.255.255.0   U     0      0       0 eth0
</code></pre><p>也就是說:  </p>
<ul>
<li>當要主動發送封包到192.168.0.0/24的網域時，都只會透過第一條規則，也就是透過eth1來傳出去!</li>
<li>在回應封包方面，不管是由eth0還是由eth1進來的網路封包，都會透過 eth1 來回傳!</li>
</ul>
<p>来自: <a href="http://linux.vbird.org/linux_server/0230router.php" target="_blank" rel="external">http://linux.vbird.org/linux_server/0230router.php</a>, [8.1.3 重複路由的問題] </p>
<h3 id="只设置一个网口IP"><a href="#只设置一个网口IP" class="headerlink" title="只设置一个网口IP"></a>只设置一个网口IP</h3><pre><code>[dennis@localhost ~]$ ssh root@172.16.60.53
root@172.16.60.53&apos;s password: 
Last login: Wed Mar 11 17:54:12 2015 from 172.16.50.39
[root@localhost ~]# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
172.16.60.0     *               255.255.255.0   U     0      0        0 eth2
default         172.16.60.1     0.0.0.0         UG    0      0        0 eth2
[root@localhost ~]# ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN qlen 1000
    link/ether a0:36:9f:32:b0:d0 brd ff:ff:ff:ff:ff:ff
3: eth1: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN qlen 1000
    link/ether a0:36:9f:32:b0:d1 brd ff:ff:ff:ff:ff:ff
4: eth2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP qlen 1000
    link/ether 00:25:90:f4:6b:60 brd ff:ff:ff:ff:ff:ff
    inet 172.16.60.53/24 brd 172.16.60.255 scope global eth2
    inet6 fe80::225:90ff:fef4:6b60/64 scope link 
       valid_lft forever preferred_lft forever
5: eth3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP qlen 1000
    link/ether 00:25:90:f4:6b:61 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::225:90ff:fef4:6b61/64 scope link 
       valid_lft forever preferred_lft forever
</code></pre><h3 id="没有问题的设定"><a href="#没有问题的设定" class="headerlink" title="没有问题的设定"></a>没有问题的设定</h3><pre><code>[dennis@localhost ~]$ ssh root@172.16.130.105
root@172.16.130.105&apos;s password: 
Permission denied, please try again.
root@172.16.130.105&apos;s password: 
Last login: Wed Mar 11 16:34:38 2015 from 172.16.50.39
[root@localhost ~]# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
172.16.130.0    *               255.255.255.0   U     0      0        0 eth0
172.16.130.0    *               255.255.255.0   U     0      0        0 eth1
default         172.16.130.1    0.0.0.0         UG    0      0        0 eth1
default         172.16.130.1    0.0.0.0         UG    0      0        0 eth0
[root@localhost ~]# ping 172.16.50.39 -I eth1
PING 172.16.50.39 (172.16.50.39) from 172.16.130.106 eth1: 56(84) bytes of data.
64 bytes from 172.16.50.39: icmp_seq=1 ttl=63 time=11.7 ms
64 bytes from 172.16.50.39: icmp_seq=2 ttl=63 time=0.265 ms
^C
--- 172.16.50.39 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1568ms
rtt min/avg/max/mdev = 0.265/6.030/11.795/5.765 ms
[root@localhost ~]# ping 172.16.50.39 -I eth0
PING 172.16.50.39 (172.16.50.39) from 172.16.130.105 eth0: 56(84) bytes of data.
64 bytes from 172.16.50.39: icmp_seq=1 ttl=63 time=0.244 ms
64 bytes from 172.16.50.39: icmp_seq=2 ttl=63 time=6.12 ms
64 bytes from 172.16.50.39: icmp_seq=3 ttl=63 time=6.50 ms
^C
--- 172.16.50.39 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2414ms
rtt min/avg/max/mdev = 0.244/4.290/6.504/2.866 ms
[root@localhost ~]# ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 00:25:90:de:fc:13 brd ff:ff:ff:ff:ff:ff
    inet 172.16.130.106/24 scope global eth1
    inet6 fe80::225:90ff:fede:fc13/64 scope link 
       valid_lft forever preferred_lft forever
3: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 00:25:90:de:fc:12 brd ff:ff:ff:ff:ff:ff
    inet 172.16.130.105/24 scope global eth0
    inet6 fe80::225:90ff:fede:fc12/64 scope link 
       valid_lft forever preferred_lft forever
[root@localhost ~]# ip route show
172.16.130.0/24 dev eth0  proto kernel  scope link  src 172.16.130.105 
172.16.130.0/24 dev eth1  proto kernel  scope link  src 172.16.130.106 
default via 172.16.130.1 dev eth1 
default via 172.16.130.1 dev eth0 
</code></pre><h3 id="一台奇怪问题的机器"><a href="#一台奇怪问题的机器" class="headerlink" title="一台奇怪问题的机器"></a>一台奇怪问题的机器</h3><p>问题机器: 双网卡，IP信息 eth0:172.16.60.150 eth1:172.16.60.151 网关172.16.60.1  </p>
<p>本地主机: IP 172.16.50.39, 网关:172.16.50.1</p>
<p>本地(50.39)可以正常ssh登陆60.150  </p>
<p>但ping 172.16.60.151没有回应:</p>
<pre><code>[root@localhost ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth0
DEVICE=eth0
HWADDR=00:1e:67:c9:9a:f4
TYPE=Ethernet
UUID=5adb47dc-d361-43b7-a23a-f17c2ade1e2d
ONBOOT=yes
NM_CONTROLLED=yes
BOOTPROTO=none
IPADDR=172.16.60.150
NETMASK=255.255.255.0
GATEWAY=172.16.60.1
IPV6INIT=no
USERCTL=no
[root@localhost ~]# cat /etc/sysconfig/network-scripts/ifcfg-eth1
DEVICE=eth1
HWADDR=00:1e:67:c9:9a:f5
TYPE=Ethernet
UUID=2af28c1e-abe2-4805-8c78-880ffbfc567e
ONBOOT=yes
NM_CONTROLLED=yes
BOOTPROTO=none
IPV6INIT=no
USERCTL=no
IPADDR=172.16.60.151
NETMASK=255.255.255.0
GATEWAY=172.16.60.1
[root@localhost ~]# ip addr  
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN   
  link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00  
  inet 127.0.0.1/8 scope host lo  
  inet6 ::1/128 scope host   
     valid_lft forever preferred_lft forever  
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP qlen 1000  
  link/ether 00:1e:67:c9:9a:f4 brd ff:ff:ff:ff:ff:ff  
  inet 172.16.60.150/24 brd 172.16.60.255 scope global eth0  
  inet6 fe80::21e:67ff:fec9:9af4/64 scope link   
     valid_lft forever preferred_lft forever  
3: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP qlen 1000  
  link/ether 00:1e:67:c9:9a:f5 brd ff:ff:ff:ff:ff:ff  
  inet 172.16.60.151/24 brd 172.16.60.255 scope global eth1  
  inet6 fe80::21e:67ff:fec9:9af5/64 scope link   
     valid_lft forever preferred_lft forever  
[root@localhost ~]# route  
Kernel IP routing table  
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface  
172.16.60.0     *               255.255.255.0   U     0      0        0 eth0  
172.16.60.0     *               255.255.255.0   U     0      0        0 eth1  
link-local      *               255.255.0.0     U     1002   0        0 eth0  
link-local      *               255.255.0.0     U     1003   0        0 eth1  
default         172.16.60.1     0.0.0.0         UG    0      0        0 eth0  
</code></pre><p>通过同一网段的机器(172.16.60.53)，ping 151得到的是Destination Host Unreachable  </p>
<pre><code>[dennis@localhost ~]$ ssh root@172.16.60.53
The authenticity of host &apos;172.16.60.53 (172.16.60.53)&apos; can&apos;t be established.
RSA key fingerprint is e6:b0:c1:60:53:cd:77:7c:32:e4:27:4f:01:43:5a:8a.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &apos;172.16.60.53&apos; (RSA) to the list of known hosts.
root@172.16.60.53&apos;s password: 
Last login: Fri Dec  6 04:46:04 2013
[root@localhost ~]# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
172.16.60.0     *               255.255.255.0   U     0      0        0 eth2
default         172.16.60.1     0.0.0.0         UG    0      0        0 eth2
[root@localhost ~]# ping 172.16.60.151
PING 172.16.60.151 (172.16.60.151) 56(84) bytes of data.
From 172.16.60.53 icmp_seq=2 Destination Host Unreachable
From 172.16.60.53 icmp_seq=3 Destination Host Unreachable
From 172.16.60.53 icmp_seq=4 Destination Host Unreachable
^C
--- 172.16.60.151 ping statistics ---
5 packets transmitted, 0 received, +3 errors, 100% packet loss, time 4988ms
pipe 3
[root@localhost ~]# ping 172.16.60.150
PING 172.16.60.150 (172.16.60.150) 56(84) bytes of data.
64 bytes from 172.16.60.150: icmp_seq=1 ttl=64 time=0.933 ms
64 bytes from 172.16.60.150: icmp_seq=2 ttl=64 time=0.235 ms
64 bytes from 172.16.60.150: icmp_seq=3 ttl=64 time=0.223 ms
^C
--- 172.16.60.150 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2045ms
rtt min/avg/max/mdev = 0.223/0.463/0.933/0.332 ms
[root@localhost ~]# 
</code></pre><p>且从eth1(60.151)ping不通网关(172.16.60.1), ping同网段另外一台机器(60.53)开始会停顿:   </p>
<pre><code>[root@localhost ~]# arp
Address                  HWtype  HWaddress           Flags Mask            Iface
172.16.60.1              ether   00:0f:e2:b1:c7:5d   C                     eth0
[root@localhost ~]# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
172.16.60.0     *               255.255.255.0   U     0      0        0 eth0
172.16.60.0     *               255.255.255.0   U     0      0        0 eth1
link-local      *               255.255.0.0     U     1002   0        0 eth0
default         172.16.60.1     0.0.0.0         UG    0      0        0 eth0
[root@localhost ~]# ping 172.16.60.53 -I eth1
PING 172.16.60.53 (172.16.60.53) from 172.16.60.151 eth1: 56(84) bytes of data.
64 bytes from 172.16.60.53: icmp_seq=10 ttl=64 time=1.08 ms
64 bytes from 172.16.60.53: icmp_seq=11 ttl=64 time=0.228 ms
64 bytes from 172.16.60.53: icmp_seq=12 ttl=64 time=0.230 ms
64 bytes from 172.16.60.53: icmp_seq=13 ttl=64 time=0.226 ms
64 bytes from 172.16.60.53: icmp_seq=14 ttl=64 time=0.238 ms
64 bytes from 172.16.60.53: icmp_seq=15 ttl=64 time=0.225 ms
64 bytes from 172.16.60.53: icmp_seq=16 ttl=64 time=0.227 ms
^C
--- 172.16.60.53 ping statistics ---
16 packets transmitted, 7 received, 56% packet loss, time 15646ms
rtt min/avg/max/mdev = 0.225/0.351/1.085/0.299 ms
[root@localhost ~]# ping 172.16.50.39 -I eth1
PING 172.16.50.39 (172.16.50.39) from 172.16.60.151 eth1: 56(84) bytes of data.
From 172.16.60.151 icmp_seq=2 Destination Host Unreachable
From 172.16.60.151 icmp_seq=3 Destination Host Unreachable
From 172.16.60.151 icmp_seq=4 Destination Host Unreachable
From 172.16.60.151 icmp_seq=6 Destination Host Unreachable
From 172.16.60.151 icmp_seq=7 Destination Host Unreachable
From 172.16.60.151 icmp_seq=8 Destination Host Unreachable
^C
--- 172.16.50.39 ping statistics ---
8 packets transmitted, 0 received, +6 errors, 100% packet loss, time 7646ms
pipe 3
[root@localhost ~]# ping 172.16.60.1 -I eth1
PING 172.16.60.1 (172.16.60.1) from 172.16.60.151 eth1: 56(84) bytes of data.
</code></pre><p>执行<code>route add default gw 172.16.60.1 eth1</code>后，可以ping 172.16.60.151,但是150有问题了.  </p>
<p>使用ssh root@172.16.60.151登陆看到的路由信息</p>
<pre><code>[root@localhost ~]# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
172.16.60.0     *               255.255.255.0   U     0      0        0 eth0
172.16.60.0     *               255.255.255.0   U     0      0        0 eth1
link-local      *               255.255.0.0     U     1002   0        0 eth0
default         172.16.60.1     0.0.0.0         UG    0      0        0 eth1
default         172.16.60.1     0.0.0.0         UG    0      0        0 eth0
[root@localhost ~]# ping 172.16.60.1 -I eth0
PING 172.16.60.1 (172.16.60.1) from 172.16.60.150 eth0: 56(84) bytes of data.
64 bytes from 172.16.60.1: icmp_seq=1 ttl=255 time=8.88 ms
64 bytes from 172.16.60.1: icmp_seq=2 ttl=255 time=6.85 ms
64 bytes from 172.16.60.1: icmp_seq=3 ttl=255 time=1.74 ms
^C
--- 172.16.60.1 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2142ms
rtt min/avg/max/mdev = 1.747/5.830/8.885/3.003 ms
[root@localhost ~]# ping 172.16.60.1 -I eth1
PING 172.16.60.1 (172.16.60.1) from 172.16.60.151 eth1: 56(84) bytes of data.
^C
--- 172.16.60.1 ping statistics ---
17 packets transmitted, 0 received, 100% packet loss, time 16976ms

[root@localhost ~]# ping 172.16.50.39 -I eth0
PING 172.16.50.39 (172.16.50.39) from 172.16.60.150 eth0: 56(84) bytes of data.
^C
--- 172.16.50.39 ping statistics ---
13 packets transmitted, 0 received, 100% packet loss, time 12830ms

[root@localhost ~]# ping 172.16.50.39 -I eth1
PING 172.16.50.39 (172.16.50.39) from 172.16.60.151 eth1: 56(84) bytes of data.
64 bytes from 172.16.50.39: icmp_seq=1 ttl=63 time=0.245 ms
64 bytes from 172.16.50.39: icmp_seq=2 ttl=63 time=0.296 ms
^C
--- 172.16.50.39 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1391ms
rtt min/avg/max/mdev = 0.245/0.270/0.296/0.030 ms
[root@localhost ~]# ping 172.16.60.53 -I eth0
PING 172.16.60.53 (172.16.60.53) from 172.16.60.150 eth0: 56(84) bytes of data.
64 bytes from 172.16.60.53: icmp_seq=1 ttl=64 time=0.252 ms
64 bytes from 172.16.60.53: icmp_seq=2 ttl=64 time=0.196 ms
^C
--- 172.16.60.53 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1342ms
rtt min/avg/max/mdev = 0.196/0.224/0.252/0.028 ms
[root@localhost ~]# ping 172.16.60.53 -I eth1
PING 172.16.60.53 (172.16.60.53) from 172.16.60.151 eth1: 56(84) bytes of data.
64 bytes from 172.16.60.53: icmp_seq=1 ttl=64 time=0.236 ms
64 bytes from 172.16.60.53: icmp_seq=2 ttl=64 time=0.232 ms
64 bytes from 172.16.60.53: icmp_seq=3 ttl=64 time=0.240 ms
^C
--- 172.16.60.53 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2431ms
rtt min/avg/max/mdev = 0.232/0.236/0.240/0.003 ms
</code></pre><p><strong>这时候应该怎么设置route呢?</strong></p>
<p>可是没有看出哪里有问题，发往172.16.60.XX ip段的都从eth0走，其他IP段的从eth0发送给默认网关172.16.60.1</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="http://linux.vbird.org/linux_server/0150detect_network.php" target="_blank" rel="external">Linux 網路偵錯</a></li>
<li><a href="http://my.oschina.net/jing31/blog/6611" target="_blank" rel="external">Linux双网卡设置IP属于同一网段的问题</a></li>
<li><a href="http://os.51cto.com/art/201205/339800.htm" target="_blank" rel="external">Linux系统IP路由的工作原理</a></li>
<li><a href="http://linux.vbird.org/linux_server/0230router.php" target="_blank" rel="external">路由觀念與路由器設定</a></li>
<li><a href="http://my.oschina.net/guol/blog/156607" target="_blank" rel="external">Linux策略路由</a></li>
<li><a href="http://yuangeqingtian.blog.51cto.com/6994701/1218946" target="_blank" rel="external">linux下路由表详解</a></li>
<li><a href="http://www.centoscn.com/CentOS/Intermediate/2013/0915/1633.html" target="_blank" rel="external">CentOS双网卡策略路由测试</a></li>
<li><a href="http://my.oschina.net/7shell/blog/308887" target="_blank" rel="external">Linux双网卡(内外网)同时使用路由设置</a></li>
<li><a href="http://forum.ubuntu.org.cn/viewtopic.php?f=54&amp;t=327616" target="_blank" rel="external">linux双网卡实现局域网跨网段访问</a></li>
<li><a href="http://blog.csdn.net/zhuying_linux/article/details/6770730" target="_blank" rel="external">ping工作原理</a></li>
<li><a href="http://stackoverflow.com/questions/18536796/icmp-request-received-but-doesnt-reply" target="_blank" rel="external">icmp request received, but doesn’t reply</a></li>
<li><a href="https://access.redhat.com/solutions/53031" target="_blank" rel="external">https://access.redhat.com/solutions/53031</a></li>
<li><a href="http://fengyun.blog.51cto.com/532912/608713" target="_blank" rel="external">杂谈icmp</a></li>
<li><a href="http://leo0216.blog.51cto.com/188904/84863" target="_blank" rel="external">LINUX ROUTE配置小记</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2015-03-11-understand-linux-route/" data-id="cin4f0h51006xl8izzhij3f82" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2015-02-09-message-queue-middleware" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2015-02-09-message-queue-middleware/" class="article-date">
  <time datetime="2016-04-17T10:13:48.612Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2015-02-09-message-queue-middleware/">Message Queue Middleware</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###Introduce</p>
<ul>
<li>MOM: Message Oriented Middleware</li>
<li>Message Queue ( MQ ) is a middleware between applications and networks.</li>
</ul>
<p>There are a number of open source choices of messaging middleware systems, including   </p>
<ul>
<li>JBoss Messaging </li>
<li>JORAM </li>
<li><a href="http://en.wikipedia.org/wiki/Apache_ActiveMQ" target="_blank" rel="external">Apache ActiveMQ</a></li>
<li>Sun Open Message Queue </li>
<li>Apache Qpid</li>
<li><a href="http://en.wikipedia.org/wiki/RabbitMQ" target="_blank" rel="external">RabbitMQ</a></li>
<li>Beanstalkd </li>
<li>Tarantool </li>
<li>HTTPSQS</li>
<li><a href="http://en.wikipedia.org/wiki/Microsoft_Message_Queuing" target="_blank" rel="external">MSMQ</a></li>
</ul>
<p>###Compare</p>
<ul>
<li>Application A &lt;–&gt; Network &lt;–&gt; Application B</li>
<li>Application A &lt;–&gt; MOM &lt;—&gt; Application B</li>
</ul>
<p>###Standard and protocol</p>
<ul>
<li>AMQP</li>
</ul>
<p>###Using ActiveMQ</p>
<p><strong>1.Download and run activemq</strong>:  </p>
<ul>
<li>Download the latest activemq from <a href="http://activemq.apache.org/download.html" target="_blank" rel="external">http://activemq.apache.org/download.html</a></li>
<li>tar xvf apache-activemq-5.11.0-bin.tar.gz </li>
<li>cd apache-activemq-5.11.0</li>
<li>./bin/activemq start </li>
<li><a href="http://localhost:8161" target="_blank" rel="external">http://localhost:8161</a>. The default username and password is admin/admin</li>
<li>check running: <ul>
<li>netstat -apn |grep 61616</li>
<li>ps aux |grep activemq</li>
</ul>
</li>
<li>./bin/activemq stop</li>
<li>for more information, read docs/user-guide.html </li>
</ul>
<p><strong>2.Build openwire-cpp example</strong>:  </p>
<ul>
<li>yum install activemq-cpp-devel</li>
<li>cd /home/dennis/Downloads/apache-activemq-5.11.0/examples/openwire/cpp </li>
<li>gcc Listener.cpp -o listener -I/usr/include/activemq-cpp-3.8.3 -I/usr/include/apr-1 -lactivemq-cpp -lstdc++</li>
<li>gcc Publisher.cpp -o publisher -I/usr/include/activemq-cpp-3.8.3 -I/usr/include/apr-1 -lactivemq-cpp -lstdc++</li>
</ul>
<p><strong>3.Running example</strong>:  </p>
<ul>
<li><p>3.1 Run service as root </p>
<p>  [dennis@localhost apache-activemq-5.11.0]$ su<br>  Password:<br>  [root@localhost apache-activemq-5.11.0]# ./bin/activemq start<br>  INFO: Loading ‘/home/dennis/Downloads/apache-activemq-5.11.0/bin/env’<br>  INFO: Using java ‘/usr/bin/java’<br>  INFO: Process with pid ‘3510’ is already running</p>
</li>
<li><p>3.2 Run listener  </p>
<h1 id="dennis-localhost-cpp-listener"><a href="#dennis-localhost-cpp-listener" class="headerlink" title="  [dennis@localhost cpp]$ ./listener "></a>  [dennis@localhost cpp]$ ./listener </h1><h2 id="Starting-the-Listener-example"><a href="#Starting-the-Listener-example" class="headerlink" title="  Starting the Listener example:"></a>  Starting the Listener example:</h2><p>  Waiting for messages…<br>  Received 1000 messages.<br>  Received 2000 messages.<br>  Received 3000 messages.<br>  Received 4000 messages.<br>  Received 5000 messages.<br>  Received 6000 messages.<br>  Received 7000 messages.<br>  Received 8000 messages.<br>  Received 9000 messages.<br>  Received 10000 messages.</p>
<h2 id="Received-10000-in-1-606-seconds"><a href="#Received-10000-in-1-606-seconds" class="headerlink" title="  Received 10000 in 1.606 seconds"></a>  Received 10000 in 1.606 seconds</h2><h1 id="Finished-with-the-example"><a href="#Finished-with-the-example" class="headerlink" title="  Finished with the example."></a>  Finished with the example.</h1></li>
<li><p>3.3 Run publisher  </p>
<h1 id="dennis-localhost-cpp-publisher"><a href="#dennis-localhost-cpp-publisher" class="headerlink" title="  [dennis@localhost cpp]$ ./publisher "></a>  [dennis@localhost cpp]$ ./publisher </h1><h2 id="Starting-the-Publisher-example"><a href="#Starting-the-Publisher-example" class="headerlink" title="  Starting the Publisher example:"></a>  Starting the Publisher example:</h2><p>  Sent 1000 messages<br>  Sent 2000 messages<br>  Sent 3000 messages<br>  Sent 4000 messages<br>  Sent 5000 messages<br>  Sent 6000 messages<br>  Sent 7000 messages<br>  Sent 8000 messages<br>  Sent 9000 messages</p>
<h2 id="Sent-10000-messages"><a href="#Sent-10000-messages" class="headerlink" title="  Sent 10000 messages"></a>  Sent 10000 messages</h2><h1 id="Finished-with-the-example-1"><a href="#Finished-with-the-example-1" class="headerlink" title="  Finished with the example."></a>  Finished with the example.</h1></li>
</ul>
<p>###Reference</p>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Message_queue" target="_blank" rel="external">Message Queue</a></li>
<li><a href="http://en.wikipedia.org/wiki/Message-oriented_middleware" target="_blank" rel="external">Message-oriented middleware</a></li>
<li><a href="http://blog.fity.cn/post/377/" target="_blank" rel="external">消息队列中间件的技术选型分析</a></li>
<li><a href="http://www.infoq.com/cn/articles/apache-kafka" target="_blank" rel="external">Apache Kafka：下一代分布式消息系统</a></li>
<li>★★★<a href="http://alibaba.github.io/RocketMQ-docs/document/openuser/mqvsmq.pdf" target="_blank" rel="external">消息队列中间件调研文档</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/websphere/library/techarticles/loulijun/MQnewer/MQnewer.html" target="_blank" rel="external">消息中间件及WebSphere MQ入门</a></li>
<li><a href="https://github.com/zeromq" target="_blank" rel="external">The ZeroMQ project</a></li>
<li><a href="http://api.zeromq.org/" target="_blank" rel="external">api of zeroMQ</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2015-02-09-message-queue-middleware/" data-id="cin4f0h50006wl8izxeshvatt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2014-12-31-checking-speed-of-network" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/17/2014-12-31-checking-speed-of-network/" class="article-date">
  <time datetime="2016-04-17T10:13:48.611Z" itemprop="datePublished">2016-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/17/2014-12-31-checking-speed-of-network/">checking network speed</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="一次网络性能检查记录"><a href="#一次网络性能检查记录" class="headerlink" title="一次网络性能检查记录"></a>一次网络性能检查记录</h4><ul>
<li><p>开始检查各种信息(网络、cpu,memory,io等)</p>
<pre><code>[root@Ustor ~]# ifconfig
eth0      Link encap:Ethernet  HWaddr 40:16:7E:35:C7:C2  
          inet addr:172.16.130.158  Bcast:0.0.0.0  Mask:255.255.255.0
          inet6 addr: fe80::4216:7eff:fe35:c7c2/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:37825154 errors:0 dropped:0 overruns:0 frame:0
          TX packets:214565 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:2321429968 (2.1 GiB)  TX bytes:226462903 (215.9 MiB)
          Interrupt:16 Memory:dc400000-dc420000 

eth1      Link encap:Ethernet  HWaddr 40:16:7E:35:C7:C3  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)
          Interrupt:17 Memory:dc300000-dc320000 

eth2      Link encap:Ethernet  HWaddr 00:90:FA:6C:E4:0A  
          inet addr:192.16.110.50  Bcast:0.0.0.0  Mask:255.255.255.0
          inet6 addr: fe80::290:faff:fe6c:e40a/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:775026147 errors:0 dropped:1576 overruns:0 frame:0
          TX packets:1032091357 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:892065492548 (830.8 GiB)  TX bytes:1034532529750 (963.4 GiB)

eth3      Link encap:Ethernet  HWaddr 00:90:FA:6C:E4:0E  
          inet6 addr: fe80::290:faff:fe6c:e40e/64 Scope:Link
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:6593 errors:0 dropped:0 overruns:0 frame:0
          TX packets:5748 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:2011976 (1.9 MiB)  TX bytes:345000 (336.9 KiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:21995 errors:0 dropped:0 overruns:0 frame:0
          TX packets:21995 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:1234012 (1.1 MiB)  TX bytes:1234012 (1.1 MiB)

[root@Ustor ~]# ping 192.16.110.60
PING 192.16.110.60 (192.16.110.60) 56(84) bytes of data.
64 bytes from 192.16.110.60: icmp_seq=1 ttl=128 time=0.147 ms
64 bytes from 192.16.110.60: icmp_seq=2 ttl=128 time=0.197 ms
64 bytes from 192.16.110.60: icmp_seq=3 ttl=128 time=0.195 ms
64 bytes from 192.16.110.60: icmp_seq=4 ttl=128 time=0.173 ms
64 bytes from 192.16.110.60: icmp_seq=5 ttl=128 time=0.197 ms
^C
--- 192.16.110.60 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4079ms
rtt min/avg/max/mdev = 0.147/0.181/0.197/0.026 ms

[root@Ustor ~]# route 
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
172.16.130.0    *               255.255.255.0   U     0      0        0 eth0
192.16.110.0    *               255.255.255.0   U     0      0        0 eth2
default         192.16.110.1    0.0.0.0         UG    0      0        0 eth2
default         172.16.130.1    0.0.0.0         UG    0      0        0 eth0
[root@Ustor ~]# ethtool -i eth2
driver: be2net
version: 4.1.307r
firmware-version: 10.0.803.19
bus-info: 0000:02:00.0
[root@Ustor ~]# ethtool eth2
Settings for eth2:
    Supported ports: [ FIBRE ]
    Supported link modes:   10000baseT/Full 
    Supports auto-negotiation: No
    Advertised link modes:  Not reported
    Advertised pause frame use: No
    Advertised auto-negotiation: No
    Speed: 10000Mb/s
    Duplex: Full
    Port: FIBRE
    PHYAD: 0
    Transceiver: external
    Auto-negotiation: off
    Supports Wake-on: g
    Wake-on: d
    Link detected: yes
[root@Ustor ~]# iostat 
Linux 2.6.32-279.el6.x86_64 (Ustor)     12/31/2014     _x86_64_    (2 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.36    0.00    1.23    1.08    0.00   97.33

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
sda               3.56        45.00        24.38   19491848   10557699
sdb              28.76      1274.39      2100.99  551950065  909958848
dm-0            224.75       639.32      1158.70  276896736  501843480
dm-1            197.05       634.96       941.44  275005928  407746632
dm-2              0.01         0.02         0.85      10001     368272

[root@Ustor ~]# fdisk -l

Disk /dev/sda: 8012 MB, 8012390400 bytes
255 heads, 63 sectors/track, 974 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x53c628b9

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          26      204800   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2              26         287     2097152   82  Linux swap / Solaris
Partition 2 does not end on cylinder boundary.
/dev/sda3             287         300      102400   83  Linux
Partition 3 does not end on cylinder boundary.
/dev/sda4             300         975     5419224    5  Extended
Partition 4 does not end on cylinder boundary.
/dev/sda5             300         313      102400   83  Linux
/dev/sda6             313         975     5314560   83  Linux

Disk /dev/sdb: 36002.0 GB, 36002026487808 bytes
255 heads, 63 sectors/track, 4376997 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disk identifier: 0x00000000
</code></pre></li>
</ul>
<pre><code>Disk /dev/mapper/r55-i01: 2097.2 GB, 2097152000000 bytes
255 heads, 63 sectors/track, 254964 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disk identifier: 0x2c0893c9


Disk /dev/mapper/r55-i02: 2097.2 GB, 2097152000000 bytes
255 heads, 63 sectors/track, 254964 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disk identifier: 0xcbbcf789


Disk /dev/mapper/r55-ee: 349.5 GB, 349526032384 bytes
255 heads, 63 sectors/track, 42494 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disk identifier: 0x00000000


#### Hard Raid Card ####
[root@Ustor ~]# lspci  
00:00.0 Host bridge: Intel Corporation 2nd Generation Core Processor Family DRAM Controller (rev 09)
00:01.0 PCI bridge: Intel Corporation Xeon E3-1200/2nd Generation Core Processor Family PCI Express Root Port (rev 09)
00:1a.0 USB controller: Intel Corporation 6 Series/C200 Series Chipset Family USB Enhanced Host Controller #2 (rev 05)
00:1c.0 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset Family PCI Express Root Port 1 (rev b5)
00:1c.4 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset Family PCI Express Root Port 5 (rev b5)
00:1c.5 PCI bridge: Intel Corporation 6 Series/C200 Series Chipset Family PCI Express Root Port 6 (rev b5)
00:1d.0 USB controller: Intel Corporation 6 Series/C200 Series Chipset Family USB Enhanced Host Controller #1 (rev 05)
00:1e.0 PCI bridge: Intel Corporation 82801 PCI Bridge (rev a5)
00:1f.0 ISA bridge: Intel Corporation C202 Chipset Family LPC Controller (rev 05)
00:1f.2 SATA controller: Intel Corporation 6 Series/C200 Series Chipset Family SATA AHCI Controller (rev 05)
00:1f.3 SMBus: Intel Corporation 6 Series/C200 Series Chipset Family SMBus Controller (rev 05)
01:00.0 RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2108 [Liberator] (rev 05)
02:00.0 Ethernet controller: Emulex Corporation OneConnect 10Gb NIC (be3) (rev 01)
02:00.1 Ethernet controller: Emulex Corporation OneConnect 10Gb NIC (be3) (rev 01)
03:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection
04:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection
05:05.0 VGA compatible controller: ASPEED Technology, Inc. ASPEED Graphics Family (rev 10)

[root@Ustor ~]# MegaCli -LdPdInfo -aAll

Adapter #0

Number of Virtual Disks: 1
Virtual Drive: 0 (Target Id: 0)
Name                :r55
RAID Level          : Primary-5, Secondary-0, RAID Level Qualifier-3
Size                : 32.743 TB
Parity Size         : 3.637 TB
State               : Optimal
Strip Size          : 64 KB
Number Of Drives    : 10
Span Depth          : 1
Default Cache Policy: WriteBack, ReadAdaptive, Cached, Write Cache OK if Bad BBU
Current Cache Policy: WriteBack, ReadAdaptive, Cached, Write Cache OK if Bad BBU
Default Access Policy: Read/Write
Current Access Policy: Read/Write
Disk Cache Policy   : Enabled
Encryption Type     : None
Bad Blocks Exist: No
Is VD Cached: No
Number of Spans: 1
Span: 0 - Number of PDs: 10

[root@Ustor ~]# MegaCli -LdPdInfo -aAll |grep -i &apos;raw size&apos;
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]
Raw Size: 3.638 TB [0x1d1c0beb0 Sectors]

#### /dev/sdb的大小是36002GB, 即 36002/1024=35.158TB ####
#### 可是整个raid的大小应该时3.637TB * 9 = 32.733TB才对, 为什么下面/dev/sdb是35.158TB呢 ####
[root@Ustor ~]# fdisk -l /dev/sdb

Disk /dev/sdb: 36002.0 GB, 36002026487808 bytes
255 heads, 63 sectors/track, 4376997 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disk identifier: 0x00000000

[root@Ustor ~]# iostat 1
Linux 2.6.32-279.el6.x86_64 (Ustor)     12/31/2014     _x86_64_    (2 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.37    0.00    1.25    1.08    0.00   97.30

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
sda               3.57        46.38        24.39   20146336   10593379
sdb              28.77      1270.72      2136.50  551950697  928014000
dm-0            229.04       637.48      1194.85  276896840  518997016
dm-1            196.74       633.13       940.80  275006032  408647752
dm-2              0.01         0.02         0.85      10169     368768

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.00    0.00   18.59    0.00    0.00   81.41

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
sda               0.00         0.00         0.00          0          0
sdb              72.00         0.00     24584.00          0      24584
dm-0              0.00         0.00         0.00          0          0
dm-1           3072.00         0.00     24576.00          0      24576
dm-2              1.00         0.00         8.00          0          8

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           0.00    0.00   11.50    0.00    0.00   88.50

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
sda               0.00         0.00         0.00          0          0
sdb              37.00         0.00     16400.00          0      16400
dm-0              0.00         0.00         0.00          0          0
dm-1           2048.00         0.00     16384.00          0      16384
dm-2              2.00         0.00        16.00          0         16

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           5.05    0.00   18.69    0.00    0.00   76.26

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
sda               0.00         0.00         0.00          0          0
sdb              72.00         0.00     32768.00          0      32768
dm-0              0.00         0.00         0.00          0          0
dm-1           4096.00         0.00     32768.00          0      32768
dm-2              0.00         0.00         0.00          0          0

#### dd的速度达到1GB/s，说明瓶颈不在磁盘 ####
[root@Ustor ~]# dd if=/dev/zero of=/dev/sdb bs=1M count=102400
28309+0 records in
28309+0 records out
29684137984 bytes (30 GB) copied, 28.4613 s, 1.0 GB/s
33270+0 records in
33270+0 records out
34886123520 bytes (35 GB) copied, 33.4982 s, 1.0 GB/s
38234+0 records in
38234+0 records out
40091254784 bytes (40 GB) copied, 38.5252 s, 1.0 GB/s
^C42879+0 records in
42879+0 records out
44961890304 bytes (45 GB) copied, 43.2484 s, 1.0 GB/s

[root@Ustor ~]# ls /dev/r55/
ee  i01  i02
[root@Ustor ~]# ls /dev/r55/ee -l
lrwxrwxrwx 1 root root 7 Dec 30 16:42 /dev/r55/ee -&gt; ../dm-2
[root@Ustor ~]# dd if=/dev/zero of=/dev/r55/ee bs=1M count=1024000
2552+0 records in
2552+0 records out
2675965952 bytes (2.7 GB) copied, 2.31478 s, 1.2 GB/s
7516+0 records in
7516+0 records out
7881097216 bytes (7.9 GB) copied, 7.34263 s, 1.1 GB/s

[root@Ustor ~]# dd if=/dev/zero of=/dev/r55/i01 bs=1M count=1024000
2869+0 records in
2869+0 records out
3008364544 bytes (3.0 GB) copied, 2.73699 s, 1.1 GB/s
7841+0 records in
7841+0 records out
8221884416 bytes (8.2 GB) copied, 7.76994 s, 1.1 GB/s

[root@Ustor ~]# dd if=/dev/zero of=/dev/r55/i02 bs=1M count=1024000
^[OH2751+0 records in
2751+0 records out
2884632576 bytes (2.9 GB) copied, 2.53248 s, 1.1 GB/s
7704+1 records in
7704+0 records out
8078229504 bytes (8.1 GB) copied, 7.56027 s, 1.1 GB/s

[root@Ustor ~]# blockdev --report /dev/sdb
RO    RA   SSZ   BSZ   StartSec            Size   Device
rw   256   512  4096          0  36002026487808   /dev/sdb
[root@Ustor ~]# blockdev --report /dev/r55/ee 
RO    RA   SSZ   BSZ   StartSec            Size   Device
rw 16384   512  4096          0    349526032384   /dev/r55/ee
[root@Ustor ~]# blockdev --report /dev/r55/i01
RO    RA   SSZ   BSZ   StartSec            Size   Device
rw   256   512  4096          0   2097152000000   /dev/r55/i01
[root@Ustor ~]# blockdev --report /dev/r55/i02
RO    RA   SSZ   BSZ   StartSec            Size   Device
rw   256   512  4096          0   2097152000000   /dev/r55/i0

[root@Ustor ~]# sysctl -a |grep ipv4.tcp
net.ipv4.tcp_timestamps = 1
net.ipv4.tcp_window_scaling = 1
net.ipv4.tcp_sack = 1
net.ipv4.tcp_retrans_collapse = 1
net.ipv4.tcp_syn_retries = 5
net.ipv4.tcp_synack_retries = 5
net.ipv4.tcp_max_orphans = 131072
net.ipv4.tcp_max_tw_buckets = 131072
net.ipv4.tcp_keepalive_time = 7200
net.ipv4.tcp_keepalive_probes = 9
net.ipv4.tcp_keepalive_intvl = 75
net.ipv4.tcp_retries1 = 3
net.ipv4.tcp_retries2 = 15
net.ipv4.tcp_fin_timeout = 60
net.ipv4.tcp_syncookies = 1
net.ipv4.tcp_tw_recycle = 0
net.ipv4.tcp_abort_on_overflow = 0
net.ipv4.tcp_stdurg = 0
net.ipv4.tcp_rfc1337 = 0
net.ipv4.tcp_max_syn_backlog = 1024
net.ipv4.tcp_orphan_retries = 0
net.ipv4.tcp_fack = 1
net.ipv4.tcp_reordering = 3
net.ipv4.tcp_ecn = 2
net.ipv4.tcp_dsack = 1
net.ipv4.tcp_mem = 173856    231808    347712
net.ipv4.tcp_wmem = 4096    16384    4194304
net.ipv4.tcp_rmem = 4096    87380    4194304
net.ipv4.tcp_app_win = 31
net.ipv4.tcp_adv_win_scale = 2
net.ipv4.tcp_tw_reuse = 0
net.ipv4.tcp_frto = 2
net.ipv4.tcp_frto_response = 0
net.ipv4.tcp_low_latency = 0
net.ipv4.tcp_no_metrics_save = 0
net.ipv4.tcp_moderate_rcvbuf = 1
net.ipv4.tcp_tso_win_divisor = 3
net.ipv4.tcp_congestion_control = cubic
net.ipv4.tcp_abc = 0
net.ipv4.tcp_mtu_probing = 0
net.ipv4.tcp_base_mss = 512
net.ipv4.tcp_workaround_signed_windows = 0
net.ipv4.tcp_dma_copybreak = 4096
net.ipv4.tcp_slow_start_after_idle = 1
net.ipv4.tcp_available_congestion_control = cubic reno
net.ipv4.tcp_allowed_congestion_control = cubic reno
net.ipv4.tcp_max_ssthresh = 0
net.ipv4.tcp_thin_linear_timeouts = 0
net.ipv4.tcp_thin_dupack = 0

[root@Ustor ~]# ethtool -k eth2
Offload parameters for eth2:
rx-checksumming: on
tx-checksumming: on
scatter-gather: on
tcp-segmentation-offload: on
udp-fragmentation-offload: off
generic-segmentation-offload: on
generic-receive-offload: off
large-receive-offload: off

[root@Ustor ~]# tcpdump -i eth2 -w /tmp/tcpdump01.pcap
tcpdump: listening on eth2, link-type EN10MB (Ethernet), capture size 65535 bytes
^C154277 packets captured
979189 packets received by filter
824910 packets dropped by kernel
[root@Ustor ~]# ls /tmp/tcpdump01.pcap -lh
-rw-r--r-- 1 root root 187M Dec 31 10:47 /tmp/tcpdump01.pcap
</code></pre><ul>
<li><p>tshark 分析</p>
<pre><code>#### scp下载包到本地，使用tshark分析 ####
[dennis@localhost ~]$ scp root@172.16.130.158:/tmp/tcpdump01.pcap ./
root@172.16.130.158&apos;s password: 
tcpdump01.pcap                         100%  186MB  11.0MB/s   00:17 
[dennis@localhost ~]$ capinfos tcpdump01.pcap 
File name:           tcpdump01.pcap
File type:           Wireshark/tcpdump/... - pcap
File encapsulation:  Ethernet
Packet size limit:   file hdr: 65535 bytes
Number of packets:   154 k
File size:           195 MB
Data size:           192 MB
Capture duration:    40 seconds
Start time:          Wed Dec 31 10:47:13 2014
End time:            Wed Dec 31 10:47:53 2014
Data byte rate:      4,816 kBps
Data bit rate:       38 Mbps
Average packet size: 1249.82 bytes
Average packet rate: 3,853 packets/sec
SHA1:                b08cff272eb5b0d9aa64fb31343314603df44309
RIPEMD160:           70123da08082954af0d91dde9d9766a61c0a93db
MD5:                 0571ac4f35410047a13cdfbd3bf3bfe9
Strict time order:   False

#### 重传好像影响不大? ####
[dennis@localhost ~]$ tshark -n -q -r tcpdump01.pcap  -z &quot;io,stat,0,tcp.analysis.retransmission&quot;

=======================================================
| IO Statistics                                       |
|                                                     |
| Interval size: 40.0 secs (dur)                      |
| Col 1: Frames and bytes                             |
|     2: tcp.analysis.retransmission                  |
|-----------------------------------------------------|
|              |1                   |2                |
| Interval     | Frames |   Bytes   | Frames |  Bytes |
|-----------------------------------------------------|
|  0.0 &lt;&gt; 40.0 | 154277 | 192818724 |    141 | 191110 |
=======================================================
[dennis@localhost ~]$ tshark -n -q -r tcpdump01.pcap  -z &quot;io,stat,0,tcp.analysis.out_of_order&quot;

=======================================================
| IO Statistics                                       |
|                                                     |
| Interval size: 40.0 secs (dur)                      |
| Col 1: Frames and bytes                             |
|     2: tcp.analysis.out_of_order                    |
|-----------------------------------------------------|
|              |1                   |2                |
| Interval     | Frames |   Bytes   | Frames |  Bytes |
|-----------------------------------------------------|
|  0.0 &lt;&gt; 40.0 | 154277 | 192818724 |    620 | 898920 |
=======================================================
[dennis@localhost ~]$ tshark -n -q -r tcpdump01.pcap  -z &quot;io,stat,5,tcp.analysis.out_of_order&quot;

==================================================
| IO Statistics                                  |
|                                                |
| Interval size: 5 secs                          |
| Col 1: Frames and bytes                        |
|     2: tcp.analysis.out_of_order               |
|------------------------------------------------|
|          |1                  |2                |
| Interval | Frames |   Bytes  | Frames |  Bytes |
|------------------------------------------------|
|  0 &lt;&gt;  5 |  10837 | 14246599 |      1 |   1514 |
|  5 &lt;&gt; 10 |  49803 | 61236860 |    184 | 264780 |
| 10 &lt;&gt; 15 |  48890 | 61739426 |    186 | 271384 |
| 15 &lt;&gt; 20 |  42976 | 55481613 |    249 | 361242 |
| 20 &lt;&gt; 25 |    397 |    24870 |      0 |      0 |
| 25 &lt;&gt; 30 |    461 |    29156 |      0 |      0 |
| 30 &lt;&gt; 35 |    488 |    31931 |      0 |      0 |
| 35 &lt;&gt; 40 |    421 |    28029 |      0 |      0 |
| 40 &lt;&gt; 40 |      4 |      240 |      0 |      0 |
==================================================
[dennis@localhost ~]$ tshark -n -q -r tcpdump01.pcap  -z &quot;io,stat,5,tcp.analysis.retransmission&quot;

=================================================
| IO Statistics                                 |
|                                               |
| Interval size: 5 secs                         |
| Col 1: Frames and bytes                       |
|     2: tcp.analysis.retransmission            |
|-----------------------------------------------|
|          |1                  |2               |
| Interval | Frames |   Bytes  | Frames | Bytes |
|-----------------------------------------------|
|  0 &lt;&gt;  5 |  10837 | 14246599 |      3 |  4542 |
|  5 &lt;&gt; 10 |  49803 | 61236860 |     62 | 85484 |
| 10 &lt;&gt; 15 |  48890 | 61739426 |     41 | 53682 |
| 15 &lt;&gt; 20 |  42976 | 55481613 |     35 | 47402 |
| 20 &lt;&gt; 25 |    397 |    24870 |      0 |     0 |
| 25 &lt;&gt; 30 |    461 |    29156 |      0 |     0 |
| 30 &lt;&gt; 35 |    488 |    31931 |      0 |     0 |
| 35 &lt;&gt; 40 |    421 |    28029 |      0 |     0 |
| 40 &lt;&gt; 40 |      4 |      240 |      0 |     0 |
=================================================
[dennis@localhost ~]$ 
</code></pre></li>
</ul>
<ul>
<li><p>会不会网卡驱动有问题?据说这个Emulex卡直接装就可以用，不用单独安装驱动</p>
<pre><code>[root@Ustor ~]# modinfo be2net
filename:       /lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/net/benet/be2net.ko
license:        GPL
author:         ServerEngines Corporation
description:    ServerEngines BladeEngine 10Gbps NIC Driver 4.1.307r
version:        4.1.307r
srcversion:     7076CA6C80C3CD968BAFFFC
alias:          pci:v000010DFd00000720sv*sd*bc*sc*i*
alias:          pci:v000010DFd0000E228sv*sd*bc*sc*i*
alias:          pci:v000010DFd0000E220sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000710sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000700sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000221sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000211sv*sd*bc*sc*i*
depends:        
vermagic:       2.6.32-279.el6.x86_64 SMP mod_unload modversions 
parm:           num_vfs:Number of PCI VFs to initialize (uint)
parm:           multi_rxq:Obsolete and used only for compatibility (bool)
parm:           rx_frag_size:Size of a fragment that holds rcvd data. (ushort)
[root@Ustor ~]# lspci -nn |grep Emulex
02:00.0 Ethernet controller [0200]: Emulex Corporation OneConnect 10Gb NIC (be3) [19a2:0710] (rev 01)
02:00.1 Ethernet controller [0200]: Emulex Corporation OneConnect 10Gb NIC (be3) [19a2:0710] (rev 01)
型号是19a2:0710
[root@Ustor ~]# grep -irn &apos;19a2.*0710&apos; /lib/modules/2.6.32-279.el6.x86_64/modules.alias
3732:alias pci:v000019A2d00000710sv*sd*bc*sc*i* be2net
</code></pre></li>
<li><p>修改磁盘预读大小，性能没什么提升，依然再100MB/s左右，查看windows下的网络曲线，不够平整</p>
<pre><code>[root@Ustor SOURCES]# blockdev --report
RO    RA   SSZ   BSZ   StartSec            Size   Device
rw 16384   512  4096          0      8012390400   /dev/sda
rw 16384   512  1024       2048       209715200   /dev/sda1
rw 16384   512  4096     411648      2147483648   /dev/sda2
rw 16384   512  1024    4605952       104857600   /dev/sda3
rw 16384   512  1024    4810752            1024   /dev/sda4
rw 16384   512  1024    4812800       104857600   /dev/sda5
rw 16384   512  4096    5019648      5442109440   /dev/sda6
rw   256   512  4096          0  36002026487808   /dev/sdb
rw   256   512  4096          0   2097152000000   /dev/dm-0
rw   256   512  4096          0   2097152000000   /dev/dm-1
rw 16384   512  4096          0    349526032384   /dev/dm-2
[root@Ustor SOURCES]# blockdev --setra 16384 /dev/dm-1
[root@Ustor SOURCES]# blockdev --setra 16384 /dev/dm-0
[root@Ustor SOURCES]# blockdev --setra 16384 /dev/sdb
[root@Ustor SOURCES]# blockdev --report
RO    RA   SSZ   BSZ   StartSec            Size   Device
rw 16384   512  4096          0      8012390400   /dev/sda
rw 16384   512  1024       2048       209715200   /dev/sda1
rw 16384   512  4096     411648      2147483648   /dev/sda2
rw 16384   512  1024    4605952       104857600   /dev/sda3
rw 16384   512  1024    4810752            1024   /dev/sda4
rw 16384   512  1024    4812800       104857600   /dev/sda5
rw 16384   512  4096    5019648      5442109440   /dev/sda6
rw 16384   512  4096          0  36002026487808   /dev/sdb
rw 16384   512  4096          0   2097152000000   /dev/dm-0
rw 16384   512  4096          0   2097152000000   /dev/dm-1
rw 16384   512  4096          0    349526032384   /dev/dm-2
</code></pre></li>
</ul>
<p>发现4k;0% read;0% random的速度比1M;0%read;0%random的快，<br>通常都是1M的快。。。<br>4k有10G的25%左右速度，速度曲线相对平整；而1M只有8%左右，而且速度曲线极其不平整；</p>
<ul>
<li><p>使用rmp source编译驱动</p>
<pre><code>rpm -ivh be2net-10.2.470.14-1.src.rpm
cd rpmbuild/SOURCES
tar xvf be2net-10.2.470.14.tar.gz 
cd be2net-10.2.470.14 
make
cp /lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/net/benet/be2net.ko{,.bak}
cp ./be2net.ko /lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/net/benet/be2net.ko
modinfo be2net
reboot
ethtool -i be2net

[root@Ustor be2net-10.2.470.14]# modinfo ./be2net.ko
filename:       ./be2net.ko
supported:      external
license:        GPL
author:         Emulex Corporation
description:    Emulex OneConnect NIC Driver 10.2.470.14
version:        10.2.470.14
srcversion:     DE6CC9D92A3CE9C042DA005
alias:          pci:v000010DFd00000728sv*sd*bc*sc*i*
alias:          pci:v000010DFd00000730sv*sd*bc*sc*i*
alias:          pci:v000010DFd00000720sv*sd*bc*sc*i*
alias:          pci:v000010DFd0000E228sv*sd*bc*sc*i*
alias:          pci:v000010DFd0000E220sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000710sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000700sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000221sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000211sv*sd*bc*sc*i*
depends:        
vermagic:       2.6.32-279.el6.x86_64 SMP mod_unload modversions 
parm:           rss_on_mc:Enable RSS in multi-channel functions with the capability. Disabled by default. (ushort)
parm:           tx_prio:Create priority based TX queues. Disabled by default (uint)
parm:           num_vfs:Number of PCI VFs to initialize (uint)
parm:           rx_frag_size:Size of receive fragment buffer - 2048 (default), 4096 or 8192 (ushort)
parm:           gro:Enable or Disable GRO. Enabled by default (uint)
parm:           emi_canceller:Enable or Disable EMI Canceller. Disabled by default (uint)
</code></pre></li>
<li><p>更新驱动，重启机器</p>
<pre><code>[root@Ustor be2net-10.2.470.14]# cp be2net.ko /lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/net/benet/
[root@Ustor be2net-10.2.470.14]# ls /lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/net/benet/
be2net.ko  be2net.ko.bak
[root@Ustor be2net-10.2.470.14]# modinfo be2net
filename:       /lib/modules/2.6.32-279.el6.x86_64/kernel/drivers/net/benet/be2net.ko
supported:      external
license:        GPL
author:         Emulex Corporation
description:    Emulex OneConnect NIC Driver 10.2.470.14
version:        10.2.470.14
srcversion:     DE6CC9D92A3CE9C042DA005
alias:          pci:v000010DFd00000728sv*sd*bc*sc*i*
alias:          pci:v000010DFd00000730sv*sd*bc*sc*i*
alias:          pci:v000010DFd00000720sv*sd*bc*sc*i*
alias:          pci:v000010DFd0000E228sv*sd*bc*sc*i*
alias:          pci:v000010DFd0000E220sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000710sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000700sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000221sv*sd*bc*sc*i*
alias:          pci:v000019A2d00000211sv*sd*bc*sc*i*
depends:        
vermagic:       2.6.32-279.el6.x86_64 SMP mod_unload modversions 
parm:           rss_on_mc:Enable RSS in multi-channel functions with the capability. Disabled by default. (ushort)
parm:           tx_prio:Create priority based TX queues. Disabled by default (uint)
parm:           num_vfs:Number of PCI VFs to initialize (uint)
parm:           rx_frag_size:Size of receive fragment buffer - 2048 (default), 4096 or 8192 (ushort)
parm:           gro:Enable or Disable GRO. Enabled by default (uint)
parm:           emi_canceller:Enable or Disable EMI Canceller. Disabled by default (uint)
[root@Ustor be2net-10.2.470.14]# modprobe be2net
[root@Ustor be2net-10.2.470.14]# ethtool eth2
Settings for eth2:
    Supported ports: [ FIBRE ]
    Supported link modes:   10000baseT/Full 
    Supports auto-negotiation: No
    Advertised link modes:  Not reported
    Advertised pause frame use: No
    Advertised auto-negotiation: No
    Speed: 10000Mb/s
    Duplex: Full
    Port: FIBRE
    PHYAD: 0
    Transceiver: external
    Auto-negotiation: off
    Supports Wake-on: g
    Wake-on: d
    Link detected: yes
[root@Ustor be2net-10.2.470.14]# ethtool -i eth2
driver: be2net
version: 4.1.307r
firmware-version: 10.0.803.19
bus-info: 0000:02:00.0
[root@Ustor be2net-10.2.470.14]# reboot

Broadcast message from root@Ustor
    (/dev/pts/1) at 15:50 ...
[dennis@localhost ~]$ ssh root@172.16.130.158
root@172.16.130.158&apos;s password: 
Last login: Wed Dec 31 09:32:07 2014 from 172.16.50.39
[root@Ustor ~]# 
[root@Ustor ~]# ethtool -i eth2
driver: be2net
version: 10.2.470.14
firmware-version: 10.0.803.19
bus-info: 0000:02:00.0
[root@Ustor ~]# 
</code></pre></li>
</ul>
<p>重新使用iometer测试看看，是否换了驱动性能有所提升<br>10G网络使用率为65%，速度达到780MB/s左右, 网络速度曲线还算平整  </p>
<p>把驱动还原为旧的版本，在测试一下，如果速度又是100MB/s左右，说明确实是驱动问题。  </p>
<p>经过测试，速度确实又回到100MB/s左右了，看来是驱动问题了。  </p>
<h4 id="关于Emulex万兆网卡测试，性能比较低-只有约100MB-s"><a href="#关于Emulex万兆网卡测试，性能比较低-只有约100MB-s" class="headerlink" title="关于Emulex万兆网卡测试，性能比较低(只有约100MB/s)"></a>关于Emulex万兆网卡测试，性能比较低(只有约100MB/s)</h4><ol>
<li>硬RAID，10块磁盘建raid5，建iscsi卷</li>
<li>windows使用iometer，1M;0%Read;0%Random</li>
<li>网卡驱动be2net从4.1.307r升级到10.2.470.14</li>
</ol>
<p>经检查测试，更新存储机器(172.16.130.158)的驱动版本(网卡驱动be2net从 4.1.307r升级到10.2.470.14) 后</p>
<p>使用iometer(1M;0%Read;0%Random)测试，速度从100MB/s左右提升到780MB/s左右</p>
<p>看起来原系统的Emulex万兆网卡驱动有问题，升级就好了.</p>
<p>驱动下载地址:</p>
<ul>
<li><p><a href="http://www.emulex.cn/downloads/emulex/drivers/linux/rhel-6-centos-6/drivers/" target="_blank" rel="external">http://www.emulex.cn/downloads/emulex/drivers/linux/rhel-6-centos-6/drivers/</a></p>
</li>
<li><p><code>wget http://www-dl.emulex.com/support/elx/rt10.2.9/ga/Linux/driver-source/be2net-10.2.470.14-1.src.rpm</code></p>
</li>
</ul>
<p>####总结: 很多时候，复杂问题的背后隐藏的是简单的解决方法</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/17/2014-12-31-checking-speed-of-network/" data-id="cin4f0h4z006ul8izqx7eggpb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/5/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/debug/">debug</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/">kernel</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/math/">math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARP/">ARP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Auto-Compile/">Auto Compile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Batch-File/">Batch File</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Emacs/">Emacs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FAQ/">FAQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ICMP/">ICMP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IRC/">IRC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NetworkStack/">NetworkStack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Notepad/">Notepad++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Translation/">Translation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WinIO/">WinIO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arp/">arp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/auto-compile/">auto compile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/batch/">batch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blat/">blat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dot/">dot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/exploit/">exploit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flowchart/">flowchart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gedit/">gedit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/graphviz/">graphviz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hardware-monitor/">hardware monitor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jekyll/">jekyll</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kvm/">kvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lisp/">lisp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mail/">mail</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mathematician/">mathematician</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maxima/">maxima</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mtrace/">mtrace</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net-snmp/">net-snmp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/netbios/">netbios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/network/">network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/novels/">novels</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opennebula/">opennebula</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/org-mode/">org mode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pandoc/">pandoc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plugin/">plugin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raid/">raid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rsync/">rsync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sed/">sed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/skype/">skype</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/source-analyze/">source analyze</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlite/">sqlite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/study/">study</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tunnel/">tunnel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/valgrind/">valgrind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vi/">vi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wget/">wget</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wifi/">wifi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wireless-tools/">wireless-tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wpa-supplicant/">wpa_supplicant</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">xml</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARP/" style="font-size: 10px;">ARP</a> <a href="/tags/Auto-Compile/" style="font-size: 10px;">Auto Compile</a> <a href="/tags/Batch-File/" style="font-size: 10px;">Batch File</a> <a href="/tags/C/" style="font-size: 10px;">C</a> <a href="/tags/Emacs/" style="font-size: 10px;">Emacs</a> <a href="/tags/FAQ/" style="font-size: 10px;">FAQ</a> <a href="/tags/ICMP/" style="font-size: 10px;">ICMP</a> <a href="/tags/IRC/" style="font-size: 10px;">IRC</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/NetworkStack/" style="font-size: 12.5px;">NetworkStack</a> <a href="/tags/Notepad/" style="font-size: 10px;">Notepad++</a> <a href="/tags/Translation/" style="font-size: 17.5px;">Translation</a> <a href="/tags/WinIO/" style="font-size: 10px;">WinIO</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/arp/" style="font-size: 10px;">arp</a> <a href="/tags/auto-compile/" style="font-size: 10px;">auto compile</a> <a href="/tags/awk/" style="font-size: 12.5px;">awk</a> <a href="/tags/batch/" style="font-size: 20px;">batch</a> <a href="/tags/blat/" style="font-size: 12.5px;">blat</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/dot/" style="font-size: 10px;">dot</a> <a href="/tags/exploit/" style="font-size: 10px;">exploit</a> <a href="/tags/flowchart/" style="font-size: 10px;">flowchart</a> <a href="/tags/gedit/" style="font-size: 10px;">gedit</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/github/" style="font-size: 12.5px;">github</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/graphviz/" style="font-size: 10px;">graphviz</a> <a href="/tags/hardware-monitor/" style="font-size: 10px;">hardware monitor</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/jekyll/" style="font-size: 10px;">jekyll</a> <a href="/tags/kernel/" style="font-size: 10px;">kernel</a> <a href="/tags/kvm/" style="font-size: 12.5px;">kvm</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/lisp/" style="font-size: 10px;">lisp</a> <a href="/tags/mac/" style="font-size: 10px;">mac</a> <a href="/tags/mail/" style="font-size: 10px;">mail</a> <a href="/tags/mathematician/" style="font-size: 10px;">mathematician</a> <a href="/tags/maxima/" style="font-size: 10px;">maxima</a> <a href="/tags/mtrace/" style="font-size: 10px;">mtrace</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/net-snmp/" style="font-size: 10px;">net-snmp</a> <a href="/tags/netbios/" style="font-size: 10px;">netbios</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/novels/" style="font-size: 10px;">novels</a> <a href="/tags/opennebula/" style="font-size: 10px;">opennebula</a> <a href="/tags/org-mode/" style="font-size: 10px;">org mode</a> <a href="/tags/pandoc/" style="font-size: 10px;">pandoc</a> <a href="/tags/plugin/" style="font-size: 10px;">plugin</a> <a href="/tags/raid/" style="font-size: 10px;">raid</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/sed/" style="font-size: 12.5px;">sed</a> <a href="/tags/shell/" style="font-size: 17.5px;">shell</a> <a href="/tags/skype/" style="font-size: 12.5px;">skype</a> <a href="/tags/source-analyze/" style="font-size: 10px;">source analyze</a> <a href="/tags/sqlite/" style="font-size: 10px;">sqlite</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/study/" style="font-size: 10px;">study</a> <a href="/tags/svn/" style="font-size: 17.5px;">svn</a> <a href="/tags/tunnel/" style="font-size: 10px;">tunnel</a> <a href="/tags/valgrind/" style="font-size: 12.5px;">valgrind</a> <a href="/tags/vi/" style="font-size: 10px;">vi</a> <a href="/tags/vim/" style="font-size: 17.5px;">vim</a> <a href="/tags/wget/" style="font-size: 10px;">wget</a> <a href="/tags/wifi/" style="font-size: 10px;">wifi</a> <a href="/tags/wireless-tools/" style="font-size: 10px;">wireless-tools</a> <a href="/tags/wpa-supplicant/" style="font-size: 10px;">wpa_supplicant</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/17/2016-04-13-malloc/">malloc</a>
          </li>
        
          <li>
            <a href="/2016/04/17/2016-03-12-performance-optimization-of-cplusplus/">performance optimization of C++</a>
          </li>
        
          <li>
            <a href="/2016/04/17/2016-03-09-stack-trace-when-program-crash/">stack trace when program crash</a>
          </li>
        
          <li>
            <a href="/2016/04/17/2016-03-09-database-knowledges/">Database knowledges</a>
          </li>
        
          <li>
            <a href="/2016/04/17/2016-03-09-check-pow-overflow/">check pow overflow</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>