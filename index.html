<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Matrix207&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Matrix207's Blog">
<meta property="og:url" content="http://matrix207.github.com/index.html">
<meta property="og:site_name" content="Matrix207's Blog">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Matrix207's Blog">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Matrix207&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Matrix207&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://matrix207.github.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-include-what-you-use" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/27/include-what-you-use/" class="article-date">
  <time datetime="2016-04-26T16:14:26.000Z" itemprop="datePublished">2016-04-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/27/include-what-you-use/">使用IWYU整理头文件引用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x01-&#x4ECB;&#x7ECD;"><a href="#0x01-&#x4ECB;&#x7ECD;" class="headerlink" title="0x01 &#x4ECB;&#x7ECD;"></a>0x01 &#x4ECB;&#x7ECD;</h3><p>IWYU &#x662F;include what you use&#x7684;&#x9996;&#x5B57;&#x6BCD;&#x7F29;&#x5199;<br>IWYU &#x4F7F;&#x7528;clang&#x5206;&#x6790;&#x7B26;&#x53F7;&#x7684;&#x5F15;&#x7528;&#x3002;&#x662F;google&#x7684;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x7ED9;&#x51FA;&#x5E94;&#x8BE5;&#x5F15;&#x7528;&#x548C;&#x79FB;&#x9664;<br>&#x7684;&#x5934;&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1; 100% &#x662F;&#x6B63;&#x786E;&#x7684;&#xFF08;&#x5F53;&#x7136;&#x90FD;&#x662F;&#x8BED;&#x8A00;&#x7279;&#x6027;&#x7684;&#x539F;&#x56E0;&#xFF09;&#x3002;</p>
<h3 id="0x02-&#x7F16;&#x8BD1;&#x6E90;&#x7801;&#x5305;"><a href="#0x02-&#x7F16;&#x8BD1;&#x6E90;&#x7801;&#x5305;" class="headerlink" title="0x02 &#x7F16;&#x8BD1;&#x6E90;&#x7801;&#x5305;"></a>0x02 &#x7F16;&#x8BD1;&#x6E90;&#x7801;&#x5305;</h3><ul>
<li>&#x5B89;&#x88C5;clang</li>
<li><p>&#x68C0;&#x67E5;clang&#x7684;&#x7248;&#x672C;&#x5E76;&#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;&#x7248;&#x672C;&#x7684;IWYU&#x6E90;&#x7801;</p>
<ul>
<li><p><a href="https://github.com/include-what-you-use/include-what-you-use/releases" target="_blank" rel="external">https://github.com/include-what-you-use/include-what-you-use/releases</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dennis@dennis:~/Downloads/build$ clang --version</span><br><span class="line">Ubuntu clang version 3.4-1ubuntu3 (tags/RELEASE_34/final) (based on LLVM 3.4)</span><br><span class="line">Target: x86_64-pc-linux-gnu</span><br><span class="line">Thread model: posix</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x5F53;&#x524D;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#x7684;clang&#x7248;&#x672C;&#x662F;3.4</p>
</li>
</ul>
</li>
<li>&#x7F16;&#x8BD1;<ul>
<li><code>tar xvf include-what-you-use-clang_3.4.tar.gz</code></li>
<li><code>mkdir build &amp;&amp; cd build</code></li>
<li><code>cmake -G &quot;Unix Makefiles&quot; -DLLVM_PATH=/usr/lib/llvm-3.4 ../include-what-you-use-clang_3.4</code></li>
<li><code>make</code></li>
</ul>
</li>
</ul>
<h3 id="0x03-&#x4E3E;&#x4F8B;"><a href="#0x03-&#x4E3E;&#x4F8B;" class="headerlink" title="0x03 &#x4E3E;&#x4F8B;"></a>0x03 &#x4E3E;&#x4F8B;</h3><ul>
<li><p>c++ &#x6E90;&#x7801; mem.cc</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;fcntl.h&gt;</span><br><span class="line">#include &lt;signal.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">//#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;stdint.h&gt;</span><br><span class="line">#include &lt;sys/mman.h&gt;</span><br><span class="line">#include &lt;sys/stat.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;sys/user.h&gt;</span><br><span class="line">#include &lt;execinfo.h&gt;</span><br><span class="line"></span><br><span class="line">#include &lt;thread&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">void g()</span><br><span class="line">{</span><br><span class="line">	usleep(2000);</span><br><span class="line">	printf(&quot;thread one\n&quot;);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">void f()</span><br><span class="line">{</span><br><span class="line">	printf(&quot;thread two\n&quot;);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">{</span><br><span class="line">	std::thread t1(f);</span><br><span class="line">	std::thread t2(g);</span><br><span class="line">	t1.join();</span><br><span class="line">	t2.join();</span><br><span class="line">	return 0;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x68C0;&#x67E5;, &#x6CE8;&#x610F;,&#x8981;&#x4F7F;&#x7528;<code>-std=c++11</code>, &#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;c11&#x7684;&#x7EBF;&#x7A0B;&#x5E93;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">dennis@dennis:~/Downloads/build$ ./include-what-you-use -std=c++11 mem.cc </span><br><span class="line"></span><br><span class="line">mem.cc should add these lines:</span><br><span class="line"></span><br><span class="line">mem.cc should remove these lines:</span><br><span class="line">- #include &lt;execinfo.h&gt;  // lines 11-11</span><br><span class="line">- #include &lt;fcntl.h&gt;  // lines 1-1</span><br><span class="line">- #include &lt;signal.h&gt;  // lines 2-2</span><br><span class="line">- #include &lt;stdint.h&gt;  // lines 6-6</span><br><span class="line">- #include &lt;string.h&gt;  // lines 5-5</span><br><span class="line">- #include &lt;sys/mman.h&gt;  // lines 7-7</span><br><span class="line">- #include &lt;sys/stat.h&gt;  // lines 8-8</span><br><span class="line">- #include &lt;sys/user.h&gt;  // lines 10-10</span><br><span class="line"></span><br><span class="line">The full include-list for mem.cc:</span><br><span class="line">#include &lt;stdio.h&gt;                      // for printf</span><br><span class="line">#include &lt;unistd.h&gt;                     // for usleep</span><br><span class="line">#include &lt;thread&gt;                       // for thread</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x4FEE;&#x6539;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//#include &lt;fcntl.h&gt;</span><br><span class="line">//#include &lt;signal.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">//#include &lt;stdlib.h&gt;</span><br><span class="line">//#include &lt;string.h&gt;</span><br><span class="line">//#include &lt;stdint.h&gt;</span><br><span class="line">//#include &lt;sys/mman.h&gt;</span><br><span class="line">//#include &lt;sys/stat.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">//#include &lt;sys/user.h&gt;</span><br><span class="line">//#include &lt;execinfo.h&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>&#x518D;&#x6B21;&#x68C0;&#x67E5;,&#x663E;&#x793A;&#x5DF2;&#x6B63;&#x786E;&#x5F15;&#x7528;&#x6216;&#x524D;&#x5411;&#x58F0;&#x660E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dennis@dennis:~/Downloads/build$ ./include-what-you-use -std=c++11 mem.cc </span><br><span class="line"></span><br><span class="line">(mem.cc has correct #includes/fwd-decls)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="0x04-&#x53C2;&#x8003;"><a href="#0x04-&#x53C2;&#x8003;" class="headerlink" title="0x04 &#x53C2;&#x8003;"></a>0x04 &#x53C2;&#x8003;</h3><ul>
<li><a href="http://xinsuiyuer.github.io/blog/2013/10/30/include-what-you-use/" target="_blank" rel="external">&#x4F7F;&#x7528; I.W.Y.U &#x6574;&#x7406;&#x5934;&#x6587;&#x4EF6;&#x5F15;&#x7528;</a></li>
<li><a href="https://github.com/include-what-you-use/include-what-you-use" target="_blank" rel="external">include-what-you-use</a><br>&#x7684;&#x5934;&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1; 100% &#x662F;&#x6B63;&#x786E;&#x7684;&#xFF0C;&#x6B64; wiki Why Include What You Use Is Difficult &#x63CF;&#x8FF0;&#x4E86;&#x5176;&#x4E2D;&#x7684;&#x96BE;&#x70B9;&#xFF08;&#x5F53;&#x7136;&#x90FD;&#x662F;&#x8BED;&#x8A00;&#x7279;&#x6027;&#x7684;&#x539F;&#x56E0;&#xFF09;&#x3002;</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/04/27/include-what-you-use/" data-id="cinn9brtg00i2kfizlnmibah2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-understand-gcc-assembly-output" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/24/understand-gcc-assembly-output/" class="article-date">
  <time datetime="2016-04-24T11:02:22.000Z" itemprop="datePublished">2016-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/language/">language</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/24/understand-gcc-assembly-output/">understand gcc assembly output</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="0x00-generate-assembly-code-when-compile"><a href="#0x00-generate-assembly-code-when-compile" class="headerlink" title="0x00 generate assembly code when compile"></a>0x00 generate assembly code when compile</h3><p><code>gcc -S -o test.s test.c</code></p>
<p>sample code</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">int main(int argc, char* argv[])</span><br><span class="line">{</span><br><span class="line">	int i = 0;</span><br><span class="line">	for (i=0; i&lt;10; i++) {</span><br><span class="line">		printf(&quot;hello123&quot;);</span><br><span class="line">	}</span><br><span class="line">	return 0;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>assembly code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">	.file	&quot;test.c&quot;</span><br><span class="line">	.section	.rodata</span><br><span class="line">.LC0:</span><br><span class="line">	.string	&quot;hello123&quot;</span><br><span class="line">	.text</span><br><span class="line">	.globl	main</span><br><span class="line">	.type	main, @function</span><br><span class="line">main:</span><br><span class="line">.LFB0:</span><br><span class="line">	.cfi_startproc</span><br><span class="line">	pushq	%rbp</span><br><span class="line">	.cfi_def_cfa_offset 16</span><br><span class="line">	.cfi_offset 6, -16</span><br><span class="line">	movq	%rsp, %rbp</span><br><span class="line">	.cfi_def_cfa_register 6</span><br><span class="line">	subq	$32, %rsp</span><br><span class="line">	movl	%edi, -20(%rbp)</span><br><span class="line">	movq	%rsi, -32(%rbp)</span><br><span class="line">	movl	$0, -4(%rbp)</span><br><span class="line">	movl	$0, -4(%rbp)</span><br><span class="line">	jmp	.L2</span><br><span class="line">.L3:</span><br><span class="line">	movl	$.LC0, %edi</span><br><span class="line">	movl	$0, %eax</span><br><span class="line">	call	printf</span><br><span class="line">	addl	$1, -4(%rbp)</span><br><span class="line">.L2:</span><br><span class="line">	cmpl	$9, -4(%rbp)</span><br><span class="line">	jle	.L3</span><br><span class="line">	movl	$0, %eax</span><br><span class="line">	leave</span><br><span class="line">	.cfi_def_cfa 7, 8</span><br><span class="line">	ret</span><br><span class="line">	.cfi_endproc</span><br><span class="line">.LFE0:</span><br><span class="line">	.size	main, .-main</span><br><span class="line">	.ident	&quot;GCC: (Ubuntu 4.8.4-2ubuntu1~14.04.1) 4.8.4&quot;</span><br><span class="line">	.section	.note.GNU-stack,&quot;&quot;,@progbits</span><br></pre></td></tr></table></figure>
<h3 id="0x01-basic-acknowledge-of-assembly-att"><a href="#0x01-basic-acknowledge-of-assembly-AT-amp-T" class="headerlink" title="0x01 basic acknowledge of assembly [AT&amp;T]"></a>0x01 basic acknowledge of assembly [AT&amp;T]</h3><ul>
<li>Register</li>
<li>Move</li>
</ul>
<h3 id="0x02-reference"><a href="#0x02-Reference" class="headerlink" title="0x02 Reference"></a>0x02 Reference</h3><ul>
<li><a href="https://www.recurse.com/blog/7-understanding-c-by-learning-assembly" target="_blank" rel="external">understanding C by learning assembly</a></li>
<li><a href="http://blog.csdn.net/yayong/article/details/170842" target="_blank" rel="external">X86&#x6C47;&#x7F16;&#x8BED;&#x8A00;&#x5B66;&#x4E60;&#x624B;&#x8BB0;(1)</a></li>
<li><a href="http://www.cs.virginia.edu/~evans/cs216/guides/x86.html" target="_blank" rel="external">X86 Assembly Guide</a></li>
<li><a href="https://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax" target="_blank" rel="external">https://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/04/24/understand-gcc-assembly-output/" data-id="cinn9brte00hwkfizi3nrklkn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/assembly/">assembly</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gcc/">gcc</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-speed-up-cplusplus-compilation" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/24/speed-up-cplusplus-compilation/" class="article-date">
  <time datetime="2016-04-24T08:07:15.000Z" itemprop="datePublished">2016-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/language/">language</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/24/speed-up-cplusplus-compilation/">speed up c++ compilation</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="how-c-compilor-work"><a href="#How-c-compilor-work" class="headerlink" title="How c++ compilor work?"></a>How c++ compilor work?</h3><h3 id="speed-up-tips"><a href="#Speed-up-tips" class="headerlink" title="Speed up tips"></a>Speed up tips</h3><ul>
<li>check code<ul>
<li>Don&#x2019;t include not needed headers, use forward declaration for class if possible</li>
<li>Pimpl (pointer to implementation), interface and implement do their job clear</li>
<li>Reduce interdependency</li>
<li>Clean not needed headers</li>
<li>inline and template</li>
<li>Guard Conditions</li>
</ul>
</li>
<li>other tips<ul>
<li>PCH (Previous Compile Header)</li>
<li>Unity Build</li>
<li>ccache</li>
</ul>
</li>
<li>compile resource<ul>
<li>parallel compile, compile multiple modules at the same times</li>
<li>use more faster computer</li>
<li>distribute compile</li>
</ul>
</li>
</ul>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="www.cnblogs.com/baiyanhuang/archive/2010/01/17/1730717.html">&#x5982;&#x4F55;&#x52A0;&#x5FEB;C++&#x4EE3;&#x7801;&#x7684;&#x7F16;&#x8BD1;&#x901F;&#x5EA6;</a></li>
<li><a href="http://stackoverflow.com/questions/373142/what-techniques-can-be-used-to-speed-up-c-compilation-times" target="_blank" rel="external">http://stackoverflow.com/questions/373142/what-techniques-can-be-used-to-speed-up-c-compilation-times</a></li>
<li><a href="https://segmentfault.com/a/1190000002790854" target="_blank" rel="external">&#x600E;&#x6837;&#x524A;&#x51CF;C++&#x4EE3;&#x7801;&#x95F4;&#x4F9D;&#x8D56;</a></li>
<li><a href="https://www.zhihu.com/question/42964826" target="_blank" rel="external">&#x4E3A;&#x4EC0;&#x4E48;C++&#x7F16;&#x8BD1;&#x901F;&#x5EA6;&#x6BD4;Java&#x6162;&#x5F97;&#x591A;&#xFF1F;</a></li>
<li><a href="https://www.reddit.com/comments/r9p4c" target="_blank" rel="external">Walter Bright on C++ Compilation Speed</a></li>
<li><a href="http://www.drdobbs.com/cpp/c-compilation-speed/228701711" target="_blank" rel="external">C++ Compilation Speed</a></li>
<li><a href="http://www.futurechips.org/tips-for-power-coders/how-to-trick-cc-compilers-into-generating-terrible-code.html" target="_blank" rel="external">How to trick C/C++ compilers into generating terrible code?</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/04/24/speed-up-cplusplus-compilation/" data-id="cinn9brtc00htkfiz5av1by58" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/18/hexo/" class="article-date">
  <time datetime="2016-04-18T15:44:19.000Z" itemprop="datePublished">2016-04-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/18/hexo/">Hexo</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="why-leave-jekyll-and-move-to-hexo"><a href="#Why-leave-jekyll-and-move-to-hexo" class="headerlink" title="Why leave jekyll and move to hexo"></a>Why leave jekyll and move to hexo</h3><ul>
<li>Jekyll<ul>
<li>markdown syntax parsing change on github, and after my modify it not work as<br>before (so sad ;( )</li>
<li>Jekyll use ruby</li>
</ul>
</li>
<li>hexo<ul>
<li>Hexo use node.js</li>
<li>Have good themes</li>
</ul>
</li>
</ul>
<h3 id="what-is-hexo"><a href="#What-is-hexo" class="headerlink" title="What is hexo"></a>What is hexo</h3><p>A fast, simple &amp; powerful blog framework<br>see <a href="https://hexo.io/" target="_blank" rel="external">https://hexo.io/</a> for more</p>
<h3 id="installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><ul>
<li><code>mkdir hexo</code></li>
<li><code>hexo init</code><ul>
<li>if fail to install depenances auto, install them manually.<ul>
<li><code>cat package.json</code>, and look at the object of dependencies, just install them</li>
<li><code>npm install xxx --save</code></li>
<li>you can list installed modules by <code>ls node_modules</code></li>
</ul>
</li>
</ul>
</li>
<li>modify _config.yml, here is my changes:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/_config.yml b/_config.yml</span><br><span class="line">index 26c27e9..9b0b32c 100644</span><br><span class="line">--- a/_config.yml</span><br><span class="line">+++ b/_config.yml</span><br><span class="line">@@ -3,11 +3,12 @@</span><br><span class="line"> ## Source: https://github.com/hexojs/hexo/</span><br><span class="line"> </span><br><span class="line"> # Site</span><br><span class="line">-title: Hexo</span><br><span class="line">+title: Matrix207&apos;s Blog</span><br><span class="line"> subtitle:</span><br><span class="line"> description:</span><br><span class="line">-author: John Doe</span><br><span class="line">-language:</span><br><span class="line">+author: Matrix207</span><br><span class="line">+language: zh-Hans</span><br><span class="line">+#language:</span><br><span class="line"> timezone:</span><br><span class="line"> </span><br><span class="line"> # URL</span><br><span class="line">@@ -28,7 +29,7 @@ i18n_dir: :lang</span><br><span class="line"> skip_render:</span><br><span class="line"> </span><br><span class="line"> # Writing</span><br><span class="line">-new_post_name: :title.md # File name of new posts</span><br><span class="line">+new_post_name: :year-:month-:day-:title.md # File name of new posts</span><br><span class="line"> default_layout: post</span><br><span class="line"> titlecase: false # Transform title into titlecase</span><br><span class="line"> external_link: true # Open external links in new tab</span><br><span class="line">@@ -63,9 +64,17 @@ pagination_dir: page</span><br><span class="line"> # Extensions</span><br><span class="line"> ## Plugins: https://hexo.io/plugins/</span><br><span class="line"> ## Themes: https://hexo.io/themes/</span><br><span class="line">-theme: landscape</span><br><span class="line">+#theme: landscape</span><br><span class="line">+theme: hexo-theme-next/</span><br><span class="line"> </span><br><span class="line"> # Deployment</span><br><span class="line"> ## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line"> deploy:</span><br><span class="line">-  type:</span><br><span class="line">+  type: git</span><br><span class="line">+  repository: github.com:matrix207/matrix207.github.com.git</span><br><span class="line">+  branch: master</span><br><span class="line">+</span><br><span class="line">+# Toc</span><br><span class="line">+toc:</span><br><span class="line">+  maxDepth: 3</span><br><span class="line">+</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="select-theme-hexo-theme-next-or-landscape"><a href="#Select-theme-hexo-theme-next-or-landscape" class="headerlink" title="Select theme: hexo-theme-next or landscape"></a>Select theme: hexo-theme-next or landscape</h3><ul>
<li>compare these two themes, I like hexo-theme-next more than landscape. But </li>
</ul>
<h3 id="what-features-i-need"><a href="#What-features-I-need" class="headerlink" title="What features I need"></a>What features I need</h3><ul>
<li>menus</li>
</ul>
<h3 id="tips-for-fixing-issues"><a href="#Tips-for-fixing-issues" class="headerlink" title="Tips for fixing issues"></a>Tips for fixing issues</h3><ul>
<li>The <code>node</code> is not the real node, use command <code>sudo apt-get install nodejs-legacy</code><ul>
<li>ref <a href="https://github.com/rauchg/slackin/issues/128" target="_blank" rel="external">https://github.com/rauchg/slackin/issues/128</a></li>
</ul>
</li>
<li>Not found tags for hexo-theme-next <ul>
<li>ref <a href="http://theme-next.iissnan.com/theme-settings.html#&#x6807;&#x7B7E;&#x4E91;&#x9875;&#x9762;" target="_blank" rel="external">http://theme-next.iissnan.com/theme-settings.html#&#x6807;&#x7B7E;&#x4E91;&#x9875;&#x9762;</a></li>
<li>ref <a href="http://ijiaober.github.io/2014/08/05/hexo/hexo-04/" target="_blank" rel="external">http://ijiaober.github.io/2014/08/05/hexo/hexo-04/</a></li>
</ul>
</li>
<li>Not found page directory<ul>
<li>ref <a href="http://www.imys.net/20150514/hexo-toc.html" target="_blank" rel="external">http://www.imys.net/20150514/hexo-toc.html</a></li>
</ul>
</li>
</ul>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">https://github.com/iissnan/hexo-theme-next</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/04/18/hexo/" data-id="cinn9brta00hnkfizsb1sj5s8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-malloc" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/13/malloc/" class="article-date">
  <time datetime="2016-04-12T16:00:00.000Z" itemprop="datePublished">2016-04-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/13/malloc/">malloc</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="algorithms"><a href="#Algorithms" class="headerlink" title="Algorithms"></a>Algorithms</h3><p>The main properties of the algorithms are:</p>
<ul>
<li>For large (&gt;= 512 bytes) requests, it is a pure best-fit allocator,<br>with ties normally decided via FIFO (i.e. least recently used).</li>
<li>For small (&lt;= 64 bytes by default) requests, it is a caching<br>allocator, that maintains pools of quickly recycled chunks.</li>
<li>In between, and for combinations of large and small requests, it does<br>the best it can trying to meet both goals at once.</li>
<li>For very large requests (&gt;= 128KB by default), it relies on system<br>memory mapping facilities, if supported.</li>
</ul>
<h3 id="test"><a href="#Test" class="headerlink" title="Test"></a>Test</h3><ul>
<li><p>test code</p>
<pre><code>// gcc -o t t.c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define ARRAY_SIZE(x) sizeof(x)/sizeof(x[0])

void test(size_t require)
{
    char* p = malloc(require);
    char* q = malloc(1);
    size_t size = malloc_usable_size(p);
    printf(&quot;memory require %lu, allocated %lu, address %p, next address %p, dis %ld\n&quot;,
            require, size, p, q, q-p);
    free(p);
    free(q);
}

int main()
{
    int fast_bin[] = {1, 2, 4, 8, 20, 24};
    int small_bin[] = {25, 30, 40, 41, 50, 60, 64, 70, 72, 73};
    int large_bin[] = {1024, 128*1024, 135*1024, 256*1024, 512*1024, 1024*1024};
    int i=0;
    printf(&quot;-----------Fast bin: memory pool-------------\n&quot;);
    for (i=0;i&lt;ARRAY_SIZE(fast_bin);i++) {
        test(fast_bin[i]);
    }
    printf(&quot;-----------Samll bin-------------\n&quot;);
    for (i=0;i&lt;ARRAY_SIZE(small_bin);i++) {
        test(small_bin[i]);
    }
    printf(&quot;-----------Large bin-------------\n&quot;);
    for (i=0;i&lt;ARRAY_SIZE(large_bin);i++) {
        test(large_bin[i]);
    }
    return 0;
}
</code></pre></li>
<li><p>test</p>
<pre><code>dennis@dennis:~/tt$ ./t
-----------Fast bin-------------
memory require 1, allocated 24, address 0x6ea010, next address 0x6ea030, dis 32
memory require 2, allocated 24, address 0x6ea030, next address 0x6ea010, dis -32
memory require 4, allocated 24, address 0x6ea010, next address 0x6ea030, dis 32
memory require 8, allocated 24, address 0x6ea030, next address 0x6ea010, dis -32
memory require 20, allocated 24, address 0x6ea010, next address 0x6ea030, dis 32
memory require 24, allocated 24, address 0x6ea030, next address 0x6ea010, dis -32
-----------Samll bin-------------
memory require 25, allocated 40, address 0x6ea050, next address 0x6ea010, dis -64
memory require 30, allocated 40, address 0x6ea050, next address 0x6ea010, dis -64
memory require 40, allocated 40, address 0x6ea050, next address 0x6ea010, dis -64
memory require 41, allocated 56, address 0x6ea080, next address 0x6ea010, dis -112
memory require 50, allocated 56, address 0x6ea080, next address 0x6ea010, dis -112
memory require 60, allocated 72, address 0x6ea0c0, next address 0x6ea010, dis -176
memory require 64, allocated 72, address 0x6ea0c0, next address 0x6ea010, dis -176
memory require 70, allocated 72, address 0x6ea0c0, next address 0x6ea010, dis -176
memory require 72, allocated 72, address 0x6ea0c0, next address 0x6ea010, dis -176
memory require 73, allocated 88, address 0x6ea110, next address 0x6ea010, dis -256
-----------Large bin-------------
memory require 1024, allocated 1032, address 0x6ea010, next address 0x6ea420, dis 1040
memory require 102400, allocated 102408, address 0x6ea010, next address 0x703020, dis 102416
memory require 131072, allocated 131080, address 0x6ea010, next address 0x70a020, dis 131088
memory require 262144, allocated 266224, address 0x7f0fc1283010, next address 0x6ea010, dis -139705634623488
memory require 524288, allocated 528368, address 0x7f0fc1243010, next address 0x6ea010, dis -139705634361344
memory require 1048576, allocated 1052656, address 0x7f0fc11c3010, next address 0x6ea010, dis -139705633837056
</code></pre></li>
</ul>
<p>When require memory size less than 24, use fastbin to allocate memory;<br>When require size large than 24, use smallbin</p>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><strong><a href="https://sploitfun.wordpress.com/2015/02/10/understanding-glibc-malloc/" target="_blank" rel="external">Understanding glibc malloc</a></strong></li>
<li><strong><a href="http://tyrande000.how/2016/02/20/linux&#x4E0B;&#x7684;&#x5806;&#x7BA1;&#x7406;/" target="_blank" rel="external">Linux&#x4E0B;&#x7684;&#x5806;&#x7BA1;&#x7406;</a></strong></li>
<li><strong><a href="http://www.valleytalk.org/wp-content/uploads/2015/02/glibc&#x5185;&#x5B58;&#x7BA1;&#x7406;ptmalloc&#x6E90;&#x4EE3;&#x7801;&#x5206;&#x6790;1.pdf" target="_blank" rel="external">http://www.valleytalk.org/wp-content/uploads/2015/02/glibc&#x5185;&#x5B58;&#x7BA1;&#x7406;ptmalloc&#x6E90;&#x4EE3;&#x7801;&#x5206;&#x6790;1.pdf</a></strong></li>
<li><strong><a href="https://github.com/lattera/glibc" target="_blank" rel="external">https://github.com/lattera/glibc</a></strong></li>
<li><a href="http://zmrlinux.com/category/linux-kernrl/mm/page/3/" target="_blank" rel="external">&#x5185;&#x5B58;&#x7BA1;&#x7406;</a></li>
<li><a href="http://luodw.cc/2016/02/17/malloc/" target="_blank" rel="external">http://luodw.cc/2016/02/17/malloc/</a></li>
<li><a href="http://blog.csdn.net/ordeder/article/details/41654509" target="_blank" rel="external">http://blog.csdn.net/ordeder/article/details/41654509</a></li>
<li><a href="http://stackoverflow.com/questions/8367001/how-to-check-heap-size-for-a-process-on-linux" target="_blank" rel="external">http://stackoverflow.com/questions/8367001/how-to-check-heap-size-for-a-process-on-linux</a></li>
<li><a href="http://stackoverflow.com/questions/1281686/determine-size-of-dynamically-allocated-memory-in-c" target="_blank" rel="external">http://stackoverflow.com/questions/1281686/determine-size-of-dynamically-allocated-memory-in-c</a></li>
<li><a href="http://read.pudn.com/downloads92/doc/360828/Linux&#x4E0B;&#x52A8;&#x6001;&#x5185;&#x5B58;&#x5206;&#x914D;&#x5B89;&#x5168;&#x6027;&#x5206;&#x6790;.pdf" target="_blank" rel="external">http://read.pudn.com/downloads92/doc/360828/Linux&#x4E0B;&#x52A8;&#x6001;&#x5185;&#x5B58;&#x5206;&#x914D;&#x5B89;&#x5168;&#x6027;&#x5206;&#x6790;.pdf</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/04/13/malloc/" data-id="cinn9brt700hjkfizobiikcpx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/malloc/">malloc</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-performance-optimization-of-cplusplus" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/12/performance-optimization-of-cplusplus/" class="article-date">
  <time datetime="2016-03-11T16:00:00.000Z" itemprop="datePublished">2016-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/language/">language</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/12/performance-optimization-of-cplusplus/">performance optimization of C++</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="tools-for-detect-time-killer"><a href="#Tools-for-detect-time-killer" class="headerlink" title="Tools for detect time killer"></a>Tools for detect time killer</h3><ul>
<li><a href="http://oprofile.sourceforge.net/news/" target="_blank" rel="external">OProfile</a></li>
<li><a href="http://icl.cs.utk.edu/papi/" target="_blank" rel="external">PAPI</a></li>
</ul>
<h3 id="tips-for-performance-improvement-code-optimization"><a href="#Tips-for-Performance-Improvement-Code-Optimization" class="headerlink" title="Tips for Performance Improvement Code Optimization"></a>Tips for Performance Improvement Code Optimization</h3><ul>
<li>Optimize Your Code using Appropriate Algorithm</li>
<li>Optimize Your Code for Memory</li>
<li>Using operators</li>
<li>If Condition Optimization<ul>
<li><code>if (a &amp;&amp; b)</code>&#xFF0C; place <code>b</code> first if <code>b</code> is more likely to be false</li>
</ul>
</li>
<li>Problems with Functions</li>
<li>Optimizing Loops<ul>
<li>It is faster to test if something is equal to zero than to compare two<br>different numbers.</li>
</ul>
</li>
<li>Reference<ul>
<li><a href="http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization" target="_blank" rel="external">http://www.thegeekstuff.com/2015/01/c-cpp-code-optimization</a></li>
<li><a href="http://stackoverflow.com/questions/2030189/general-c-performance-improvement-tips" target="_blank" rel="external">http://stackoverflow.com/questions/2030189/general-c-performance-improvement-tips</a></li>
</ul>
</li>
</ul>
<h3 id="memory-allocate-on-stack-or-heap"><a href="#memory-allocate-on-stack-or-heap" class="headerlink" title="memory allocate on stack or heap"></a>memory allocate on stack or heap</h3><p>Allocate memory on stack is more faster then heap cause of different architecture.<br>The heap is a far more complicated data structure than the stack.</p>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="http://stackoverflow.com/questions/2264969/why-is-memory-allocation-on-heap-much-slower-than-on-stack" target="_blank" rel="external">http://stackoverflow.com/questions/2264969/why-is-memory-allocation-on-heap-much-slower-than-on-stack</a></li>
<li><a href="http://stackoverflow.com/questions/4974617/what-is-more-efficient-stack-memory-or-heap" target="_blank" rel="external">http://stackoverflow.com/questions/4974617/what-is-more-efficient-stack-memory-or-heap</a></li>
<li><a href="http://stackoverflow.com/questions/161053/which-is-faster-stack-allocation-or-heap-allocation" target="_blank" rel="external">http://stackoverflow.com/questions/161053/which-is-faster-stack-allocation-or-heap-allocation</a></li>
</ul>
<h3 id="vector-vs-array"><a href="#vector-vs-array" class="headerlink" title="vector vs array"></a>vector vs array</h3><ul>
<li>Have same assembly instruction<ul>
<li>index operation is same</li>
<li>dereference operation is same</li>
<li>increment operation is same</li>
<li><a href="http://stackoverflow.com/questions/381621/using-arrays-or-stdvectors-in-c-whats-the-performance-gap" target="_blank" rel="external">http://stackoverflow.com/questions/381621/using-arrays-or-stdvectors-in-c-whats-the-performance-gap</a></li>
</ul>
</li>
<li>But there are some attributes make vector slower than C array<ul>
<li>Vector possible to store data in non-continuous chunk of memory</li>
<li>Vector allocate memory on heap always</li>
<li><a href="http://assoc.tumblr.com/post/411601680/performance-of-stl-vector-vs-plain-c-arrays" target="_blank" rel="external">http://assoc.tumblr.com/post/411601680/performance-of-stl-vector-vs-plain-c-arrays</a></li>
</ul>
</li>
<li>Another performance test between vector , boost array and C array<ul>
<li><a href="http://www.cnblogs.com/mudoot/articles/boost_array_0001.html" target="_blank" rel="external">http://www.cnblogs.com/mudoot/articles/boost_array_0001.html</a></li>
</ul>
</li>
</ul>
<h3 id="use-the-right-container"><a href="#Use-the-right-container" class="headerlink" title="Use the right container"></a>Use the right container</h3><ul>
<li>more container compare and select<ul>
<li>vector is good at read data</li>
<li>list is good at insert and remove data</li>
<li>deque has good balance for read, insert and remove data</li>
<li><a href="http://www.cppblog.com/sailing/articles/161659.html" target="_blank" rel="external">http://www.cppblog.com/sailing/articles/161659.html</a></li>
</ul>
</li>
<li>reference<ul>
<li><a href="http://stackoverflow.com/questions/3664272/is-stdvector-so-much-slower-than-plain-arrays" target="_blank" rel="external">http://stackoverflow.com/questions/3664272/is-stdvector-so-much-slower-than-plain-arrays</a></li>
</ul>
</li>
</ul>
<h3 id="some-tips-when-using-c"><a href="#Some-tips-when-using-C" class="headerlink" title="Some tips when using C++"></a>Some tips when using C++</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Foo</span><br><span class="line">{</span><br><span class="line">    const BigObject &amp; bar();</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">BigObject obj = foo.bar();  // OOPS!  This creates a copy!</span><br><span class="line">const BigOject &amp;obj = foo.bar();  // does not create a copy</span><br></pre></td></tr></table></figure>
<h3 id="some-books"><a href="#some-books" class="headerlink" title="some books"></a>some books</h3><ul>
<li>Effective C++</li>
<li>More Effective C++</li>
<li>Effective STL</li>
<li>C++ Coding Standards</li>
<li>Efficient C++: Performance Programming Techniques</li>
</ul>
<h3 id="know-some-compile-and-linker-options"><a href="#Know-some-compile-and-linker-options" class="headerlink" title="Know some compile and linker options"></a>Know some compile and linker options</h3><ul>
<li>gcc</li>
</ul>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><strong><a href="https://en.wikibooks.org/wiki/Optimizing_C++" target="_blank" rel="external">https://en.wikibooks.org/wiki/Optimizing_C++</a></strong></li>
<li><strong><a href="http://agner.org/optimize/optimizing_cpp.pdf" target="_blank" rel="external">http://agner.org/optimize/optimizing_cpp.pdf</a></strong></li>
<li><a href="http://www.artima.com/cppsource/how_to_go_slow.html" target="_blank" rel="external">http://www.artima.com/cppsource/how_to_go_slow.html</a></li>
<li><a href="https://github.com/fffaraz/awesome-cpp" target="_blank" rel="external">https://github.com/fffaraz/awesome-cpp</a></li>
<li><a href="https://notabug.org/koz.ross/awesome-c" target="_blank" rel="external">https://notabug.org/koz.ross/awesome-c</a></li>
<li><a href="https://github.com/jobbole/awesome-c-cn" target="_blank" rel="external">https://github.com/jobbole/awesome-c-cn</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/03/12/performance-optimization-of-cplusplus/" data-id="cinn9brt600hfkfiz7z74tuyv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/performance/">performance</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-check-pow-overflow" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/09/check-pow-overflow/" class="article-date">
  <time datetime="2016-03-08T16:00:00.000Z" itemprop="datePublished">2016-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/09/check-pow-overflow/">check pow overflow</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="source-code"><a href="#Source-code" class="headerlink" title="Source code"></a>Source code</h3><pre><code>// Create by matrix207 2016-03-09
// g++ -o t check-pow-overflow.cc

#include &lt;iostream&gt;
#include &lt;typeinfo&gt;
#include &lt;cmath&gt;
#include &lt;limits&gt;

/*
 * Check if pow overflow for type T (int,float,long,double)
 * a^b &lt;= m  &lt;=&gt; log(a^b) &lt;= log(m) &lt;=&gt; b*log(a) &lt;= log(m) &lt;=&gt; b &lt;= log(m)/log(a)
 * @param a
 *     base number
 * @param b
 *     exponent number
 * @return
 *     1 if overflow, otherwise 0
 */
template&lt;typename T1, typename T2&gt;
int check_pow(T1 a, T2 b)
{
    int ret = 0;
    // i:int, f:float, d:double, l:long
    std::cout &lt;&lt; &quot;Type: &quot; &lt;&lt; typeid(a).name() &lt;&lt; &quot;,&quot; &lt;&lt; typeid(b).name() &lt;&lt; &quot; &quot;;
    double max_a = std::log(std::numeric_limits&lt;T1&gt;::max());
    double max_b = std::log(std::numeric_limits&lt;T2&gt;::max());
    double max_max = max_a &lt; max_b ? max_b : max_a;
    if (b * std::log(a) &lt; max_max) {
        double c = std::pow(a, b);
        std::cout &lt;&lt; a &lt;&lt; &quot;^&quot; &lt;&lt; b &lt;&lt; &quot;=&quot; &lt;&lt; c &lt;&lt; std::endl;
    } else {
        std::cout &lt;&lt; a &lt;&lt; &quot;^&quot; &lt;&lt; b &lt;&lt; &quot; overflow&quot; &lt;&lt; std::endl;
        ret = 1;
    }
    return ret;
}

int main(int argc, char* argv[])
{
    std::cout &lt;&lt; &quot;\n&gt;&gt;&gt; Test int type &lt;&lt;&lt;&quot; &lt;&lt; std::endl;
    check_pow(25, 1);
    check_pow(25, 10);
    check_pow(25, 100);
    check_pow(25, 1000);

    std::cout &lt;&lt; &quot;\n&gt;&gt;&gt; Test long type &lt;&lt;&lt;&quot; &lt;&lt; std::endl;
    check_pow(25L, 1L);
    check_pow(25L, 10L);
    check_pow(25L, 100L);
    check_pow(25L, 1000L);

    std::cout &lt;&lt; &quot;\n&gt;&gt;&gt; Test float type &lt;&lt;&lt;&quot; &lt;&lt; std::endl;
    check_pow(25.3f, 1.0f);
    check_pow(25.3f, 10.0f);
    check_pow(25.3f, 100.0f);
    check_pow(25.3f, 1000.0f);

    std::cout &lt;&lt; &quot;\n&gt;&gt;&gt; Test double type &lt;&lt;&lt;&quot; &lt;&lt; std::endl;
    check_pow(25.3, 1.0);
    check_pow(25.3, 10.0);
    check_pow(25.3, 100.0);
    check_pow(25.3, 1000.0);

    std::cout &lt;&lt; &quot;\n&gt;&gt;&gt; Test mix type &lt;&lt;&lt;&quot; &lt;&lt; std::endl;
    check_pow(25, 10.0); // int, double
    check_pow(25, 100.0); // int, double
    check_pow(25, 1000.0); // int, double
    check_pow(25.0f, 10.0); // float, double
    check_pow(25.0f, 100.0); // float, double
    check_pow(25.0f, 1000.0); // float, double

    std::cout &lt;&lt; &quot;\n&gt;&gt;&gt; Test others &lt;&lt;&lt;&quot; &lt;&lt; std::endl;
    check_pow(0, 100);
    check_pow(0, -2);
    check_pow(-1, -2);
    check_pow(-1, -20);
    check_pow(25, -20);

    return 0;
}
</code></pre><h3 id="test"><a href="#Test" class="headerlink" title="Test"></a>Test</h3><pre><code>[dennis@localhost code]$ g++ -o t check-pow-overflow.cc
[dennis@localhost code]$ ./t

&gt;&gt;&gt; Test int type &lt;&lt;&lt;
Type: i,i 25^1=25
Type: i,i 25^10 overflow
Type: i,i 25^100 overflow
Type: i,i 25^1000 overflow

&gt;&gt;&gt; Test long type &lt;&lt;&lt;
Type: l,l 25^1=25
Type: l,l 25^10=9.53674e+13
Type: l,l 25^100 overflow
Type: l,l 25^1000 overflow

&gt;&gt;&gt; Test float type &lt;&lt;&lt;
Type: f,f 25.3^1=25.3
Type: f,f 25.3^10=1.0745e+14
Type: f,f 25.3^100 overflow
Type: f,f 25.3^1000 overflow

&gt;&gt;&gt; Test double type &lt;&lt;&lt;
Type: d,d 25.3^1=25.3
Type: d,d 25.3^10=1.0745e+14
Type: d,d 25.3^100=2.05141e+140
Type: d,d 25.3^1000 overflow

&gt;&gt;&gt; Test mix type &lt;&lt;&lt;
Type: i,d 25^10=9.53674e+13
Type: i,d 25^100=6.22302e+139
Type: i,d 25^1000 overflow
Type: f,d 25^10=9.53674e+13
Type: f,d 25^100=6.22302e+139
Type: f,d 25^1000 overflow

&gt;&gt;&gt; Test other &lt;&lt;&lt;
Type: i,i 0^100=0
Type: i,i 0^-2 overflow
Type: i,i -1^-2 overflow
Type: i,i -1^-20 overflow
Type: i,i 25^-20=1.09951e-28
</code></pre><h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://www.cplusplus.com/reference/cmath/pow/" target="_blank" rel="external">pow C++ Reference</a></li>
<li><a href="http://www.cplusplus.com/reference/cmath/log/" target="_blank" rel="external">log C++ Reference</a></li>
<li><a href="http://en.cppreference.com/w/cpp/numeric/math/pow" target="_blank" rel="external">std::pow</a></li>
<li><a href="http://en.cppreference.com/w/cpp/types/numeric_limits" target="_blank" rel="external">std::numeric_limits</a></li>
<li><a href="http://stackoverflow.com/questions/18609085/how-can-i-check-if-stdpow-will-overflow-double" target="_blank" rel="external">http://stackoverflow.com/questions/18609085/how-can-i-check-if-stdpow-will-overflow-double</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/03/09/check-pow-overflow/" data-id="cinn9brt000h6kfizxdxef9hc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-stack-trace-when-program-crash" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/09/stack-trace-when-program-crash/" class="article-date">
  <time datetime="2016-03-08T16:00:00.000Z" itemprop="datePublished">2016-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/09/stack-trace-when-program-crash/">stack trace when program crash</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="source"><a href="#Source" class="headerlink" title="Source"></a>Source</h4><pre><code>#include &lt;stdio.h&gt;
#include &lt;execinfo.h&gt;
#include &lt;signal.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;

void handler(int sig) {
    void *array[10];
    size_t size;

    // get void*&apos;s for all entries on the stack
    size = backtrace(array, 10);

    // print out all the frames to stderr
    fprintf(stderr, &quot;Error: signal %d:\n&quot;, sig);
    backtrace_symbols_fd(array, size, STDERR_FILENO);
    exit(1);
}

void baz() {
    int *foo = (int*)-1; // make a bad pointer
    printf(&quot;%d\n&quot;, *foo);       // causes segfault
}

void bar() { baz(); }
void foo() { bar(); }

int main(int argc, char **argv) {
    signal(SIGSEGV, handler);   // install our handler
    foo(); // this will call foo, bar, and baz.  baz segfaults.
}
</code></pre><h4 id="compile-and-test"><a href="#Compile-and-test" class="headerlink" title="Compile and test"></a>Compile and test</h4><pre><code>[dennis@localhost code]$ gcc -g -rdynamic -o t stacktrace.c
[dennis@localhost code]$ ./t
Error: signal 11:
./t(handler+0x1c)[0x400a32]
/lib64/libc.so.6(+0x34960)[0x7fa03d30d960]
./t(baz+0x14)[0x400a8b]
./t(bar+0xe)[0x400aae]
./t(foo+0xe)[0x400abe]
./t(main+0x28)[0x400ae8]
/lib64/libc.so.6(__libc_start_main+0xf0)[0x7fa03d2f8fe0]
./t[0x400949]
</code></pre><h4 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><ul>
<li><a href="http://stackoverflow.com/questions/77005/how-to-generate-a-stacktrace-when-my-gcc-c-app-crashes" target="_blank" rel="external">http://stackoverflow.com/questions/77005/how-to-generate-a-stacktrace-when-my-gcc-c-app-crashes</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/03/09/stack-trace-when-program-crash/" data-id="cinn9brt100h9kfizcj4cawlj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/crash/">crash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/stack/">stack</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cplusplus" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/05/cplusplus/" class="article-date">
  <time datetime="2016-03-04T16:00:00.000Z" itemprop="datePublished">2016-03-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/language/">language</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/05/cplusplus/">c++</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="books"><a href="#Books" class="headerlink" title="Books"></a>Books</h3><ul>
<li><a href="http://www.parashift.com/c++-faq-lite/" target="_blank" rel="external">C++FAQS</a></li>
<li>Junior<ul>
<li><a href="">(C++11)C++11 - &#x7EF4;&#x57FA;&#x767E;&#x79D1;&#xFF0C;&#x81EA;&#x7531;&#x7684;&#x767E;&#x79D1;&#x5168;&#x4E66;</a></li>
<li><a href="">(C++11)&#x6DF1;&#x5165;&#x7406;&#x89E3;C++11&#xFF1A;C++ 11&#x65B0;&#x7279;&#x6027;&#x89E3;&#x6790;&#x4E0E;&#x5E94;&#x7528; &#x8FF7;&#x4F60;</a></li>
<li>[C++&#x6807;&#x51C6;&#x7A0B;&#x5E8F;&#x5E93;&#x2013;&#x81EA;&#x4FEE;&#x6559;&#x7A0B;&#x4E0E;&#x53C2;&#x8003;&#x624B;&#x518C;]</li>
<li>[C++&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x539F;&#x7406;&#x4E0E;&#x5B9E;&#x8DF5;]</li>
<li>[C++&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;&#x8BED;&#x8A00; &#x7279;&#x522B;&#x7248;]</li>
<li>[C++&#x7F16;&#x7A0B;&#x60EF;&#x7528;&#x6CD5;&#x2014;&#x2014;&#x9AD8;&#x7EA7;&#x7A0B;&#x5E8F;&#x5458;&#x5E38;&#x7528;&#x65B9;&#x6CD5;&#x548C;&#x6280;&#x5DE7;]</li>
<li>[C++&#x7F16;&#x7A0B;&#x89C4;&#x8303;-101&#x6761;&#x89C4;&#x5219;&#x51C6;&#x5219;&#x4E0E;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;]</li>
<li>[C++&#x8BED;&#x8A00;&#x7684;&#x8BBE;&#x8BA1;&#x548C;&#x6F14;&#x5316;]</li>
<li>[C++&#x91CA;&#x96BE;&#x89E3;&#x60D1;]</li>
<li>[C&#x548C;C++&#x5B89;&#x5168;&#x7F16;&#x7801;&#xFF08;&#x4E2D;&#x6587;&#x7248;&#xFF09;]</li>
<li>[Effective C++&#x4E2D;&#x6587;&#x7248;&#xFF08;&#x7B2C;&#x4E09;&#x7248;&#xFF09;]</li>
<li>[More Effective C++ &#x4E2D;&#x6587;&#x7248;]</li>
<li>[[Effective STL&#x4E2D;&#x6587;&#x7248;&#xFF1A;50&#x6761;&#x6709;&#x6548;&#x4F7F;&#x7528;STL&#x7684;&#x7ECF;&#x9A8C;]]</li>
<li>[Exceptional C++ Style(Herb Sutter).&#x4E2D;&#x6587;&#x7248;]</li>
<li>[Exceptional C++ &#x4E2D;&#x6587;&#x7248;]</li>
<li>[More Exceptional C++(&#x4E2D;&#x6587;&#x7248;)]</li>
<li>[From C++ to Objective-C-english]</li>
<li>[From C++ to Objective-C-&#x4E2D;&#x6587;&#x7248;]</li>
<li>[Linux C&#x7F16;&#x7A0B;&#x4E00;&#x7AD9;&#x5F0F;&#x5B66;&#x4E60;6.14&#x2013;&#x5B8B;&#x52B2;&#x886B;]</li>
<li>[&#x4ECE;&#x7F3A;&#x9677;&#x4E2D;&#x5B66;&#x4E60;C&#x3001;C++]</li>
<li>[&#x4F60;&#x5FC5;&#x987B;&#x77E5;&#x9053;&#x7684;222&#x4E2A;C++&#x8BED;&#x8A00;&#x95EE;&#x9898;.&#x8303;&#x7ACB;&#x950B;.&#x626B;&#x63CF;&#x7248;]</li>
<li>[&#x6807;&#x51C6;C++&#x5E93;&#x51FD;&#x6570;&#x53C2;&#x8003;]</li>
<li>[&#x6DF1;&#x5165;&#x5B66;&#x4E60;&#xFF1A;GNU C++ for Linux &#x7F16;&#x7A0B;&#x6280;&#x672F;]</li>
<li>[&#x7F16;&#x5199;&#x9AD8;&#x8D28;&#x91CF;&#x4EE3;&#x7801; &#x6539;&#x5584;C++&#x7A0B;&#x5E8F;&#x7684;150&#x4E2A;&#x5EFA; &#x8BAE;.&#x674E;&#x5065;.&#x626B;&#x63CF;&#x7248;]</li>
</ul>
</li>
<li>C/C++&#x8FDB;&#x9636;<ul>
<li>[Accelerated C++&#x4E2D;&#x6587;&#x7248; ]</li>
<li>[Advanced c++ Programming Styles and Idioms&#x4E2D;&#x6587;&#x7248;]</li>
<li>[C++ API&#x8BBE;&#x8BA1;&#x2013;&#x82F1;&#x6587;&#x7248;]</li>
<li>[C++ Templates&#x4E2D;&#x6587;&#x7248;]</li>
<li><a href="http://www.cnblogs.com/Solstice/category/287661.html" target="_blank" rel="external">C++ &#x5DE5;&#x7A0B;&#x5B9E;&#x8DF5;&#x7ECF;&#x9A8C;&#x8C08;&#x2013;&#x9648;&#x7855;</a></li>
<li>[C++ API&#x8BBE;&#x8BA1;]</li>
<li>[C++&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x4E0E;&#x91CD;&#x7528;]</li>
<li>[C++&#x6807;&#x51C6;&#x5E93;&#x2014;&#x2014;&#x81EA;&#x5B66;&#x6559;&#x7A0B;&#x4E0E;&#x53C2;&#x8003;&#x624B;&#x518C;(&#x7B2C;2&#x7248;)&#x82F1;&#x6587;&#x7248;]</li>
<li>[C++&#x6C89;&#x601D;&#x5F55;(Ruminations on C++)&#x4E2D;&#x6587;&#x7B2C;2&#x7248;]</li>
<li>[C++&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;]</li>
<li>[C++&#x8BBE;&#x8BA1;&#x65B0;&#x601D;&#x7EF4;(Modern_C++_Design)]</li>
<li>[&#x5927;&#x89C4;&#x6A21;C++&#x7A0B;&#x5E8F;&#x8BBE;&#x8BA1;]</li>
<li>[&#x6A21;&#x677F;&#x7F16;&#x7A0B;&#x4E0E;OO&#x7F16;&#x7A0B;&#x8303;&#x578B;&#x2013;&#x6DF7;&#x642D;]</li>
<li>[&#x6DF1;&#x5EA6;&#x63A2;&#x7D22;C++&#x5BF9;&#x8C61;&#x6A21;&#x578B;]</li>
<li>[&#x9AD8;&#x8D28;&#x91CF;C++&#xFF0F;C&#x7F16;&#x7A0B;&#x6307;&#x5357;]</li>
<li>[Imperfect C++]</li>
<li>[C++ &#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x6307;&#x5357;]</li>
</ul>
</li>
</ul>
<h3 id="projects"><a href="#Projects" class="headerlink" title="Projects"></a>Projects</h3><ul>
<li>1.<a href="https://github.com/google/leveldb" target="_blank" rel="external">leveldb</a><ul>
<li>Google&#x51FA;&#x54C1;&#xFF0C;&#x9075;&#x5FAA;Google C++&#x7F16;&#x7801;&#x89C4;&#x8303;</li>
<li>&#x4F5C;&#x8005;&#x662F;Jeff Dean&#x5927;&#x795E;</li>
<li>&#x6D89;&#x53CA;&#x67E5;&#x627E;&#x3001;&#x7F13;&#x5B58;&#x3001;&#x6587;&#x4EF6;&#x8BFB;&#x5199;&#x3001;&#x591A;&#x7EBF;&#x7A0B;&#x3001;&#x8DE8;&#x5E73;&#x53F0;&#x7B49;&#x8BF8;&#x591A;&#x5E38;&#x89C1;&#x95EE;&#x9898;</li>
<li>&#x6700;&#x65B0;&#x7248;&#x672C;1.15.0&#x4EE3;&#x7801;&#x91CF;&#x4E5F;&#x4E0D;&#x5230;2&#x4E07;&#x884C;</li>
<li>&#x57FA;&#x7840;&#x7684;key-value&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E7F;&#x6CDB;&#x7528;&#x4E8E;Google&#x5185;&#x90E8;&#x548C;&#x8BB8;&#x591A;&#x5F00;&#x6E90;&#x9879;&#x76EE;</li>
</ul>
</li>
<li><a href="http://code.google.com/p/googletest/" target="_blank" rel="external">Google Test</a></li>
<li><a href="https://developers.google.com/protocol-buffers/" target="_blank" rel="external">Protocol Buffers</a></li>
<li>2.<a href="http://www.llvm.org/" target="_blank" rel="external">llvm</a></li>
<li>2.<a href="https://github.com/google/leveldb" target="_blank" rel="external">muduo</a></li>
</ul>
<h3 id="lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h3><ul>
<li><a href="http://zh.cppreference.com/w/cpp/language/lambda" target="_blank" rel="external">http://zh.cppreference.com/w/cpp/language/lambda</a></li>
</ul>
<h3 id="resource-manager"><a href="#resource-manager" class="headerlink" title="resource manager"></a>resource manager</h3><ul>
<li><p>Implement ScopeGuard</p>
<ul>
<li><a href="https://en.wikibooks.org/wiki/More_C++_Idioms/Scope_Guard" target="_blank" rel="external">https://en.wikibooks.org/wiki/More_C++_Idioms/Scope_Guard</a></li>
<li><a href="http://mindhacks.cn/2012/08/27/modern-cpp-practices/" target="_blank" rel="external">http://mindhacks.cn/2012/08/27/modern-cpp-practices/</a></li>
</ul>
</li>
<li><p>Sample code:</p>
<pre><code>// TODO: not work
// g++ -o t -std=c++11 c++11.cc
#include &lt;stdio.h&gt;
#include &lt;vector&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;functional&gt;

#define TT_HERE() {std::cout &lt;&lt; __FUNCTION__ &lt;&lt; &quot;:&quot; &lt;&lt; __LINE__ &lt;&lt; std::endl;}
#define TT_PRINT_MSG(x) {std::cout &lt;&lt; __LINE__ &lt;&lt; &quot;:&quot; &lt;&lt; x &lt;&lt; std::endl;}

class ScopeGuard
{
public:
    explicit ScopeGuard(std::function&lt;void()&gt; onExitScope)
        : onExitScope_(onExitScope), dismissed_(false)
    { }

    ~ScopeGuard()
    {
        TT_HERE();
        if(!dismissed_)
        {
            onExitScope_();
        }
    }

    void Dismiss()
    {
        dismissed_ = true;
    }

private:
    std::function&lt;void()&gt; onExitScope_;
    bool dismissed_;

private: // noncopyable
    ScopeGuard(ScopeGuard const&amp;);
    ScopeGuard&amp; operator=(ScopeGuard const&amp;);
};

#define SCOPEGUARD_LINENAME_CAT(name, line) name##line
#define SCOPEGUARD_LINENAME(name, line) SCOPEGUARD_LINENAME_CAT(name, line)

#define ON_SCOPE_EXIT(callback) ScopeGuard SCOPEGUARD_LINENAME(EXIT, __LINE__)(callback)

class A
{
public:
    A () { TT_HERE(); }
    ~A () { TT_HERE(); }
};

void release()
{
    std::cout &lt;&lt; &quot;do release&quot; &lt;&lt; std::endl;
}

class B
{
public:
    B () {
        TT_HERE();
    }
    ~B () { TT_HERE(); }
    void Fun1() {
        A a;
        std::cout &lt;&lt; &quot;do something in Fun1&quot; &lt;&lt; std::endl;
        std::cout &lt;&lt; &quot;throw exception&quot; &lt;&lt; std::endl;
        throw;
        release;
    }
};

class C
{
public:
    C () {
        TT_HERE();
    }
    ~C () { TT_HERE(); }
    void Fun1() {
        A a;
        ON_SCOPE_EXIT( [&amp;] { release();} );
        std::cout &lt;&lt; &quot;do something in Fun1&quot; &lt;&lt; std::endl;
        std::cout &lt;&lt; &quot;throw exception&quot; &lt;&lt; std::endl;
        throw;
    }
};

void Test1()
{
    std::vector&lt;int&gt; v;
    v.push_back(1);
    v.push_back(2);
    v.push_back(3);

    std::for_each(std::begin(v), std::end(v), [](int n) {std::cout &lt;&lt; n &lt;&lt; std::endl;});

    auto is_odd = [](int n) {return n%2==1;};
    auto pos = std::find_if(std::begin(v), std::end(v), is_odd);
    if(pos != std::end(v))
        std::cout &lt;&lt; *pos &lt;&lt; std::endl;
}

int main()
{
    std::cout &lt;&lt; &quot;------------------------&quot; &lt;&lt; std::endl;
    B b;
    //b.Fun1();
    std::cout &lt;&lt; &quot;------------------------&quot; &lt;&lt; std::endl;
    C c;
    c.Fun1();
    std::cout &lt;&lt; &quot;------------------------&quot; &lt;&lt; std::endl;

    return 0;
}
</code></pre></li>
</ul>
<h3 id="error-handle"><a href="#Error-handle" class="headerlink" title="Error handle"></a>Error handle</h3><ul>
<li>Target:<ul>
<li>easy to use</li>
<li>more error message</li>
<li>be strong</li>
</ul>
</li>
<li><p>Error information collection</p>
<ul>
<li>information include: error, location and context</li>
<li><p><code>ENSURE(0 &lt;= index &amp;&amp; index &lt; v.size())(index)(v.size());</code></p>
<pre><code>Failed: 0 &lt;= index &amp;&amp; index &lt; v.size()  (error)
File: xxx.cpp Line: 123                 (location)
Context Variables:                      (context)
    index = 12345
    v.size() = 100
</code></pre></li>
<li><p>support multiple express <code>(ENSURE(expr)(var1)(var2)(var3))</code></p>
</li>
<li><code>static_assert(std::is_same&lt;decltype(expr), bool&gt;::value, &quot;ENSURE(expr) can only be used on bool expression&quot;);</code></li>
</ul>
</li>
<li><p>Implementation sample</p>
<pre><code>// Create by matrix207 2016-03-08
// compile: g++ -o t -std=c++0x ensure.cc
// expand macro with : g++ -E -P -std=c++0x ensure.cc
#include &lt;exception&gt;
#include &lt;iostream&gt;
#include &lt;sstream&gt;

class MyException
{
public:
    MyException(const char *exp, const char *file, int line)
        : SMART_ASSERT_A (*this),
          SMART_ASSERT_B (*this)
    {
        std::ostringstream so;
        so &lt;&lt; &quot;Ensure failed : &quot; &lt;&lt; &apos;\n&apos;
           &lt;&lt; &apos;\t&apos; &lt;&lt; &quot;Expression : &quot; &lt;&lt; exp &lt;&lt; &apos;\n&apos;
           &lt;&lt; &apos;\t&apos; &lt;&lt; &quot;Location : &quot; &lt;&lt; file &lt;&lt; &apos;:&apos; &lt;&lt; line &lt;&lt; &apos;\n&apos;;
        m_what += so.str();
    }
    template&lt;typename T&gt;
    MyException&amp; printVariable(const char* name, T v)
    {
        std::ostringstream so;
        so &lt;&lt; &apos;\t&apos; &lt;&lt; name &lt;&lt; &quot; : &quot; &lt;&lt; v &lt;&lt; &apos;\n&apos;;
        m_what += so.str();
        return *this;
    }
    MyException&amp; err(int error)
    {
        std::ostringstream so;
        so &lt;&lt; &apos;\t&apos; &lt;&lt; &quot;Error : &quot; &lt;&lt; error &lt;&lt; &apos;\n&apos;;
        m_what += so.str();
        return *this;
    }
    MyException&amp; msg(const char* msg)
    {
        std::ostringstream so;
        so &lt;&lt; &apos;\t&apos; &lt;&lt; &quot;Message : &quot; &lt;&lt; msg &lt;&lt; &apos;\n&apos;;
        m_what += so.str();
        return *this;
    }
    const char *what() const throw ()
    {
        return m_what.c_str();
    }
    MyException&amp; SMART_ASSERT_A;
    MyException&amp; SMART_ASSERT_B;
private:
    mutable std::string m_what;
};

#define SMART_ASSERT_A(x) SMART_ASSERT_AB(x, B)
#define SMART_ASSERT_B(x) SMART_ASSERT_AB(x, A)
#define SMART_ASSERT_AB(x,next) \
    SMART_ASSERT_A.printVariable(#x,(x)).SMART_ASSERT_ ## next

#define MY_ENSURE(expr) \
    if (expr); else throw MyException(#expr,__FILE__,__LINE__).SMART_ASSERT_A

int main()
{
    try
    {
        int a = 2;
        MY_ENSURE(a &gt; 3)(a).err(10001).msg(&quot;error occur!&quot;);
    }
    catch (const MyException&amp; e)
    {
        std::cout &lt;&lt; &quot;catch exception:\n&quot; &lt;&lt; e.what() &lt;&lt; std::endl;
    }
    return 0;
}
</code></pre></li>
<li><p>test</p>
<pre><code>[dennis@localhost code]$ g++ -g -o t -std=c++0x ensure.cc
[dennis@localhost code]$ ./t
catch exception:
Ensure failed : 
    Expression : a &gt; 3
    Location : ensure.cc:67
    a : 2
    Error : 10001
    Message : error occur!
</code></pre></li>
</ul>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://zh.cppreference.com/w/" target="_blank" rel="external">http://zh.cppreference.com/w/</a></li>
<li><a href="https://en.wikibooks.org/wiki/More_C++_Idioms" target="_blank" rel="external">https://en.wikibooks.org/wiki/More_C++_Idioms</a></li>
<li><a href="http://www.drdobbs.com/cpp/enhancing-assertions/184403745" target="_blank" rel="external">Enhancing Assertions</a></li>
<li><a href="http://www.cnblogs.com/cbscan/archive/2012/10/26/2740838.html" target="_blank" rel="external">http://www.cnblogs.com/cbscan/archive/2012/10/26/2740838.html</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/03/05/cplusplus/" data-id="cinn9brsw00h0kfizucwx3t44" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c++</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-c" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/05/c/" class="article-date">
  <time datetime="2016-03-04T16:00:00.000Z" itemprop="datePublished">2016-03-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/language/">language</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/05/c/">c</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="books"><a href="#Books" class="headerlink" title="Books"></a>Books</h3><h3 id="projects"><a href="#Projects" class="headerlink" title="Projects"></a>Projects</h3><ul>
<li>1.<a href="http://home.tiscali.cz/~cz210552/webbench.html" target="_blank" rel="external">Webbench</a></li>
<li>2.<a href="http://sourceforge.net/projects/tinyhttpd/" target="_blank" rel="external">Tinyhttpd</a></li>
<li>3.<a href="http://sourceforge.net/projects/cjson/" target="_blank" rel="external">cJSON</a></li>
<li>4.<a href="http://code.google.com/p/cmockery/downloads/list" target="_blank" rel="external">CMokery</a></li>
<li>5.<a href="http://software.schmorp.de/pkg/libev.html" target="_blank" rel="external">Libev</a></li>
<li>6.<a href="http://memcached.org/" target="_blank" rel="external">Memcached</a></li>
<li>7.<a href="http://www.lua.org/" target="_blank" rel="external">Lua</a></li>
<li>8.<a href="http://www.sqlite.org/" target="_blank" rel="external">SQLite</a></li>
<li>9.<a href="http://minnie.tuhs.org/cgi-bin/utree.pl?file=V6" target="_blank" rel="external">UNIX v6</a></li>
<li>10.<a href="http://www.netbsd.org/" target="_blank" rel="external">NETBSD</a></li>
</ul>
<h3 id="reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><ul>
<li><a href="http://blog.jobbole.com/79023/" target="_blank" rel="external">&#x6700;&#x503C;&#x5F97;&#x9605;&#x8BFB;&#x5B66;&#x4E60;&#x7684; 10 &#x4E2A; C &#x8BED;&#x8A00;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x4EE3;&#x7801;</a></li>
<li><a href="https://notabug.org/koz.ross/awesome-c" target="_blank" rel="external">https://notabug.org/koz.ross/awesome-c</a></li>
<li><a href="https://github.com/jobbole/awesome-c-cn" target="_blank" rel="external">https://github.com/jobbole/awesome-c-cn</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://matrix207.github.com/2016/03/05/c/" data-id="cinn9brsv00gxkfiz6pciq7ir" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/english/">english</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kernel/">kernel</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/language/">language</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/math/">math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/others/">others</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/person/">person</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/program/">program</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/source/">source</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/storage/">storage</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/windows/">windows</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/FAQ/" style="font-size: 10px;">FAQ</a> <a href="/tags/IRC/" style="font-size: 10px;">IRC</a> <a href="/tags/Translation/" style="font-size: 13px;">Translation</a> <a href="/tags/android/" style="font-size: 10px;">android</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/assembly/" style="font-size: 10px;">assembly</a> <a href="/tags/awk/" style="font-size: 11px;">awk</a> <a href="/tags/batch/" style="font-size: 14px;">batch</a> <a href="/tags/blog/" style="font-size: 10px;">blog</a> <a href="/tags/book/" style="font-size: 10px;">book</a> <a href="/tags/c/" style="font-size: 15px;">c</a> <a href="/tags/c/" style="font-size: 19px;">c++</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/crash/" style="font-size: 10px;">crash</a> <a href="/tags/database/" style="font-size: 17px;">database</a> <a href="/tags/debug/" style="font-size: 12px;">debug</a> <a href="/tags/dot/" style="font-size: 10px;">dot</a> <a href="/tags/driver/" style="font-size: 10px;">driver</a> <a href="/tags/emacs/" style="font-size: 11px;">emacs</a> <a href="/tags/exploit/" style="font-size: 10px;">exploit</a> <a href="/tags/file-system/" style="font-size: 10px;">file system</a> <a href="/tags/filesystem/" style="font-size: 12px;">filesystem</a> <a href="/tags/flowchart/" style="font-size: 10px;">flowchart</a> <a href="/tags/gcc/" style="font-size: 10px;">gcc</a> <a href="/tags/git/" style="font-size: 12px;">git</a> <a href="/tags/google/" style="font-size: 11px;">google</a> <a href="/tags/graphviz/" style="font-size: 11px;">graphviz</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/hosts/" style="font-size: 10px;">hosts</a> <a href="/tags/iscsi/" style="font-size: 14px;">iscsi</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/job/" style="font-size: 10px;">job</a> <a href="/tags/json/" style="font-size: 10px;">json</a> <a href="/tags/kernel/" style="font-size: 14px;">kernel</a> <a href="/tags/linux/" style="font-size: 14px;">linux</a> <a href="/tags/lisp/" style="font-size: 10px;">lisp</a> <a href="/tags/lua/" style="font-size: 10px;">lua</a> <a href="/tags/makefile/" style="font-size: 10px;">makefile</a> <a href="/tags/malloc/" style="font-size: 10px;">malloc</a> <a href="/tags/math/" style="font-size: 11px;">math</a> <a href="/tags/maxima/" style="font-size: 10px;">maxima</a> <a href="/tags/memory/" style="font-size: 11px;">memory</a> <a href="/tags/memory-overflow/" style="font-size: 10px;">memory overflow</a> <a href="/tags/mtrace/" style="font-size: 10px;">mtrace</a> <a href="/tags/netdisk/" style="font-size: 10px;">netdisk</a> <a href="/tags/network/" style="font-size: 20px;">network</a> <a href="/tags/others/" style="font-size: 18px;">others</a> <a href="/tags/pandoc/" style="font-size: 10px;">pandoc</a> <a href="/tags/performance/" style="font-size: 16px;">performance</a> <a href="/tags/person/" style="font-size: 11px;">person</a> <a href="/tags/protobuf/" style="font-size: 11px;">protobuf</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/rsync/" style="font-size: 10px;">rsync</a> <a href="/tags/sed/" style="font-size: 11px;">sed</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/skype/" style="font-size: 11px;">skype</a> <a href="/tags/sms/" style="font-size: 10px;">sms</a> <a href="/tags/source/" style="font-size: 11px;">source</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/stack/" style="font-size: 10px;">stack</a> <a href="/tags/storage/" style="font-size: 15px;">storage</a> <a href="/tags/study/" style="font-size: 10px;">study</a> <a href="/tags/svn/" style="font-size: 11px;">svn</a> <a href="/tags/sync/" style="font-size: 10px;">sync</a> <a href="/tags/test/" style="font-size: 11px;">test</a> <a href="/tags/time/" style="font-size: 10px;">time</a> <a href="/tags/tools/" style="font-size: 15px;">tools</a> <a href="/tags/valgrind/" style="font-size: 10px;">valgrind</a> <a href="/tags/vi/" style="font-size: 10px;">vi</a> <a href="/tags/vim/" style="font-size: 14px;">vim</a> <a href="/tags/virtual/" style="font-size: 11px;">virtual</a> <a href="/tags/wget/" style="font-size: 10px;">wget</a> <a href="/tags/windows/" style="font-size: 11px;">windows</a> <a href="/tags/wireshark/" style="font-size: 10px;">wireshark</a> <a href="/tags/write/" style="font-size: 13px;">write</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">September 2012</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/27/include-what-you-use/">使用IWYU整理头文件引用</a>
          </li>
        
          <li>
            <a href="/2016/04/24/understand-gcc-assembly-output/">understand gcc assembly output</a>
          </li>
        
          <li>
            <a href="/2016/04/24/speed-up-cplusplus-compilation/">speed up c++ compilation</a>
          </li>
        
          <li>
            <a href="/2016/04/18/hexo/">Hexo</a>
          </li>
        
          <li>
            <a href="/2016/04/13/malloc/">malloc</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Matrix207<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>